<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build a simple CMake project using Conan &mdash; conan 2.21.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/tutorial/consuming_packages/build_simple_cmake_project.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=210d0441"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using build tools as Conan packages" href="use_tools_as_conan_packages.html" />
    <link rel="prev" title="Consuming packages" href="../consuming_packages.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.21
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../consuming_packages.html">Consuming packages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Build a simple CMake project using Conan</a></li>
<li class="toctree-l3"><a class="reference internal" href="use_tools_as_conan_packages.html">Using build tools as Conan packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="different_configurations.html">Building for multiple configurations: Release, Debug, Static and Shared</a></li>
<li class="toctree-l3"><a class="reference internal" href="the_flexibility_of_conanfile_py.html">Understanding the flexibility of using conanfile.py vs conanfile.txt</a></li>
<li class="toctree-l3"><a class="reference internal" href="cross_building_with_conan.html">How to cross-compile your applications using Conan: host and build contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro_to_versioning.html">Introduction to versioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../creating_packages.html">Creating packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_repositories.html">Working with Conan repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_packages.html">Developing packages locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ci_tutorial/tutorial.html">CI Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../incubating.html">Incubating features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">Whatâ€™s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  ðŸ“– The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../consuming_packages.html">Consuming packages</a></li>
      <li class="breadcrumb-item active">Build a simple CMake project using Conan</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/tutorial/consuming_packages/build_simple_cmake_project.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="build-a-simple-cmake-project-using-conan">
<span id="consuming-packages-build-simple-cmake-project"></span><h1>Build a simple CMake project using Conan<a class="headerlink" href="#build-a-simple-cmake-project-using-conan" title="Link to this heading">Â¶</a></h1>
<p>Letâ€™s get started with an example: we are going to create a string compressor application
that uses one of the most popular C++ libraries: <a class="reference external" href="https://zlib.net/">Zlib</a>.</p>
<p>Weâ€™ll use CMake as build system in this case but keep in mind that Conan <strong>works with any
build system</strong> and is not limited to using CMake. You can check more examples with other
build systems in the <a class="reference internal" href="#consuming-packages-read-more"><span class="std std-ref">Read More
section</span></a>.</p>
<p>Please, first clone the sources to recreate this project, you can find them in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2 repository</a> in GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/consuming_packages/simple_cmake_project
</pre></div>
</div>
<p>We start from a very simple C language project with this structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ src
    â””â”€â”€ main.c
</pre></div>
</div>
<p>This project contains a basic <em>CMakeLists.txt</em> including the <strong>zlib</strong> dependency and the
source code for the string compressor program in <em>main.c</em>.</p>
<p>Letâ€™s have a look at the <em>main.c</em> file:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><strong>main.c</strong></span><a class="headerlink" href="#id1" title="Link to this code">Â¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;zlib.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer_in</span><span class="w"> </span><span class="p">[</span><span class="mi">256</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;Conan is a MIT-licensed, Open Source package manager for C and C++ development &quot;</span>
<span class="w">                            </span><span class="s">&quot;for C and C++ development, allowing development teams to easily and efficiently &quot;</span>
<span class="w">                            </span><span class="s">&quot;manage their packages and dependencies across platforms and build systems.&quot;</span><span class="p">};</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer_out</span><span class="w"> </span><span class="p">[</span><span class="mi">256</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="w">    </span><span class="n">z_stream</span><span class="w"> </span><span class="n">defstream</span><span class="p">;</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">zalloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Z_NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">zfree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Z_NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">opaque</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Z_NULL</span><span class="p">;</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">avail_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">uInt</span><span class="p">)</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">buffer_in</span><span class="p">);</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">next_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Bytef</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">buffer_in</span><span class="p">;</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">avail_out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">uInt</span><span class="p">)</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer_out</span><span class="p">);</span>
<span class="w">    </span><span class="n">defstream</span><span class="p">.</span><span class="n">next_out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Bytef</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">buffer_out</span><span class="p">;</span>

<span class="w">    </span><span class="n">deflateInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">defstream</span><span class="p">,</span><span class="w"> </span><span class="n">Z_BEST_COMPRESSION</span><span class="p">);</span>
<span class="w">    </span><span class="n">deflate</span><span class="p">(</span><span class="o">&amp;</span><span class="n">defstream</span><span class="p">,</span><span class="w"> </span><span class="n">Z_FINISH</span><span class="p">);</span>
<span class="w">    </span><span class="n">deflateEnd</span><span class="p">(</span><span class="o">&amp;</span><span class="n">defstream</span><span class="p">);</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Uncompressed size is: %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">buffer_in</span><span class="p">));</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Compressed size is: %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">buffer_out</span><span class="p">));</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;ZLIB VERSION: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">zlibVersion</span><span class="p">());</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Also, the contents of <em>CMakeLists.txt</em> are:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><strong>CMakeLists.txt</strong></span><a class="headerlink" href="#id2" title="Link to this code">Â¶</a></div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.15</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">compressor</span><span class="w"> </span><span class="s">C</span><span class="p">)</span>

<span class="nb">find_package</span><span class="p">(</span><span class="s">ZLIB</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">src/main.c</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">ZLIB::ZLIB</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Our application relies on the <strong>Zlib</strong> library. Conan, by default, tries to install
libraries from a remote server called <a class="reference external" href="https://conan.io/center/">ConanCenter</a>.
You can search there for libraries and also check the available versions. In our case,
after checking the available versions for <a class="reference external" href="https://conan.io/center/zlib">Zlib</a> we
choose to use one of the latest versions: <strong>zlib/1.3.1</strong>.</p>
<p>The easiest way to install the <strong>Zlib</strong> library and find it from our project with Conan is
using a <em>conanfile.txt</em> file. Letâ€™s create one with the following content:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><strong>conanfile.txt</strong></span><a class="headerlink" href="#id3" title="Link to this code">Â¶</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[requires]</span>
<span class="na">zlib/1.3.1</span>

<span class="k">[generators]</span>
<span class="na">CMakeDeps</span>
<span class="na">CMakeToolchain</span>
</pre></div>
</div>
</div>
<p>As you can see we added two sections to this file with a syntax similar to an <em>INI</em> file.</p>
<blockquote>
<div><ul class="simple">
<li><p>The <strong>[requires]</strong> section is where we declare the libraries we want to use in the
project, in this case, <strong>zlib/1.3.1</strong>.</p></li>
<li><p>The <strong>[generators]</strong> section tells Conan to generate the files that the compilers or
build systems will use to find the dependencies and build the project. In this case,
as our project is based on <em>CMake</em>, we will use <a class="reference internal" href="../../reference/tools/cmake/cmakedeps.html#conan-tools-cmakedeps"><span class="std std-ref">CMakeDeps</span></a> to
generate information about where the <strong>Zlib</strong> library files are installed and
<a class="reference internal" href="../../reference/tools/cmake/cmaketoolchain.html#conan-tools-cmaketoolchain"><span class="std std-ref">CMakeToolchain</span></a> to pass build information to <em>CMake</em>
using a <em>CMake</em> toolchain file.</p></li>
</ul>
</div></blockquote>
<p>Besides the <em>conanfile.txt</em>, we need a <strong>Conan profile</strong> to build our project. Conan
profiles allow users to define a configuration set for things like the compiler, build
configuration, architecture, shared or static libraries, etc. Conan, by default, will
not try to detect a profile automatically, so we need to create one. To let Conan try
to guess the profile, based on the current operating system and installed tools, please
run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan<span class="w"> </span>profile<span class="w"> </span>detect<span class="w"> </span>--force
</pre></div>
</div>
<p>This will detect the operating system, build architecture and compiler settings based on
the environment. It will also set the build configuration as <em>Release</em> by default. The
generated profile will be stored in the Conan home folder with name <em>default</em> and will be
used by Conan in all commands by default unless another profile is specified via the command
line. An example of the output of this command for macOS would be:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">$ conan profile detect --force</span>
<span class="na">Found apple-clang 14.0</span>
<span class="na">apple-clang&gt;</span><span class="o">=</span><span class="s">13, using the major as version</span>
<span class="na">Detected profile</span><span class="o">:</span>
<span class="k">[settings]</span>
<span class="na">arch</span><span class="o">=</span><span class="s">x86_64</span>
<span class="na">build_type</span><span class="o">=</span><span class="s">Release</span>
<span class="na">compiler</span><span class="o">=</span><span class="s">apple-clang</span>
<span class="na">compiler.cppstd</span><span class="o">=</span><span class="s">gnu17</span>
<span class="na">compiler.libcxx</span><span class="o">=</span><span class="s">libc++</span>
<span class="na">compiler.version</span><span class="o">=</span><span class="s">14</span>
<span class="na">os</span><span class="o">=</span><span class="s">Macos</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>A note about the detected C++ standard by Conan</strong></p>
<p>Conan will always set the default C++ standard as the one that the detected compiler
version uses by default, except for the case of macOS using apple-clang. In this case,
for apple-clang&gt;=11, it sets <code class="docutils literal notranslate"><span class="pre">compiler.cppstd=gnu17</span></code>. If you want to use a different
C++ standard, you can edit the default profile file directly. First, get the location
of the default profile using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>profile<span class="w"> </span>path<span class="w"> </span>default
/Users/user/.conan2/profiles/default
</pre></div>
</div>
<p>Then open and edit the file and set <code class="docutils literal notranslate"><span class="pre">compiler.cppstd</span></code> to the C++ standard you want
to use.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Using a compiler other than the auto-detected one</strong></p>
<p>If you want to change a Conan profile to use a compiler different from the default
one, you need to change the <code class="docutils literal notranslate"><span class="pre">compiler</span></code> setting and also tell Conan explicitly where
to find it using the <a class="reference internal" href="../../reference/tools/cmake/cmaketoolchain.html#conan-cmake-toolchain-conf"><span class="std std-ref">tools.build:compiler_executables
configuration</span></a>.</p>
</div>
<p>We will use Conan to install <strong>Zlib</strong> and generate the files that CMake needs to
find this library and build our project. We will generate those files in the folder
<em>build</em>. To do that, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--output-folder<span class="o">=</span>build<span class="w"> </span>--build<span class="o">=</span>missing
</pre></div>
</div>
<p>You will get something similar to this as the output of that command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--output-folder<span class="o">=</span>build<span class="w"> </span>--build<span class="o">=</span>missing
...
--------<span class="w"> </span>Computing<span class="w"> </span>dependency<span class="w"> </span>graph<span class="w"> </span>----------
zlib/1.3.1:<span class="w"> </span>Not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>cache,<span class="w"> </span>looking<span class="w"> </span><span class="k">in</span><span class="w"> </span>remotes...
zlib/1.3.1:<span class="w"> </span>Checking<span class="w"> </span>remote:<span class="w"> </span>conancenter
zlib/1.3.1:<span class="w"> </span>Trying<span class="w"> </span>with<span class="w"> </span><span class="s1">&#39;conancenter&#39;</span>...
Downloading<span class="w"> </span>conanmanifest.txt
Downloading<span class="w"> </span>conanfile.py
Downloading<span class="w"> </span>conan_export.tgz
Decompressing<span class="w"> </span>conan_export.tgz
zlib/1.3.1:<span class="w"> </span>Downloaded<span class="w"> </span>recipe<span class="w"> </span>revision<span class="w"> </span>f1fadf0d3b196dc0332750354ad8ab7b
Graph<span class="w"> </span>root
<span class="w">    </span>conanfile.txt:<span class="w"> </span>/home/conan/examples2/tutorial/consuming_packages/simple_cmake_project/conanfile.txt
Requirements
<span class="w">    </span>zlib/1.3.1#f1fadf0d3b196dc0332750354ad8ab7b<span class="w"> </span>-<span class="w"> </span>Downloaded<span class="w"> </span><span class="o">(</span>conancenter<span class="o">)</span>

--------<span class="w"> </span>Computing<span class="w"> </span>necessary<span class="w"> </span>packages<span class="w"> </span>----------
Requirements
<span class="w">    </span>zlib/1.3.1#f1fadf0d3b196dc0332750354ad8ab7b:cdc9a35e010a17fc90bb845108cf86cfcbce64bf#dd7bf2a1ab4eb5d1943598c09b616121<span class="w"> </span>-<span class="w"> </span>Download<span class="w"> </span><span class="o">(</span>conancenter<span class="o">)</span>

--------<span class="w"> </span>Installing<span class="w"> </span>packages<span class="w"> </span>----------

Installing<span class="w"> </span><span class="o">(</span>downloading,<span class="w"> </span>building<span class="o">)</span><span class="w"> </span>binaries...
zlib/1.3.1:<span class="w"> </span>Retrieving<span class="w"> </span>package<span class="w"> </span>cdc9a35e010a17fc90bb845108cf86cfcbce64bf<span class="w"> </span>from<span class="w"> </span>remote<span class="w"> </span><span class="s1">&#39;conancenter&#39;</span>
Downloading<span class="w"> </span>conanmanifest.txt
Downloading<span class="w"> </span>conaninfo.txt
Downloading<span class="w"> </span>conan_package.tgz
Decompressing<span class="w"> </span>conan_package.tgz
zlib/1.3.1:<span class="w"> </span>Package<span class="w"> </span>installed<span class="w"> </span>cdc9a35e010a17fc90bb845108cf86cfcbce64bf
zlib/1.3.1:<span class="w"> </span>Downloaded<span class="w"> </span>package<span class="w"> </span>revision<span class="w"> </span>dd7bf2a1ab4eb5d1943598c09b616121

--------<span class="w"> </span>Finalizing<span class="w"> </span>install<span class="w"> </span><span class="o">(</span>deploy,<span class="w"> </span>generators<span class="o">)</span><span class="w"> </span>----------
conanfile.txt:<span class="w"> </span>Generator<span class="w"> </span><span class="s1">&#39;CMakeToolchain&#39;</span><span class="w"> </span>calling<span class="w"> </span><span class="s1">&#39;generate()&#39;</span>
conanfile.txt:<span class="w"> </span>Generator<span class="w"> </span><span class="s1">&#39;CMakeDeps&#39;</span><span class="w"> </span>calling<span class="w"> </span><span class="s1">&#39;generate()&#39;</span>
conanfile.txt:<span class="w"> </span>Generating<span class="w"> </span>aggregated<span class="w"> </span>env<span class="w"> </span>files
</pre></div>
</div>
<p>As you can see in the output, there are a couple of things that happened:</p>
<blockquote>
<div><ul class="simple">
<li><p>Conan installed the <em>Zlib</em> library from the remote server, which should be the Conan
Center server by default if the library is available. This server stores both the Conan
recipes, which are the files that define how libraries must be built, and the binaries
that can be reused so we donâ€™t have to build from sources every time.</p></li>
<li><p>Conan generated several files under the <strong>build</strong> folder. Those files
were generated by both the <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> generators we set in
the <strong>conanfile.txt</strong>. <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> generates files so that CMake finds the Zlib
library we have just downloaded. On the other side, <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> generates a
toolchain file for CMake so that we can transparently build our project with CMake
using the same settings that we detected for our default profile.</p></li>
</ul>
</div></blockquote>
<p>Now we are ready to build and run our <strong>compressor</strong> app:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Windows</span><a class="headerlink" href="#id4" title="Link to this code">Â¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># assuming Visual Studio 15 2017 is your VS version and that it matches your default profile</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15 2017&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span><span class="s2">&quot;conan_toolchain.cmake&quot;</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
...
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Built<span class="w"> </span>target<span class="w"> </span>compressor
$<span class="w"> </span>Release<span class="se">\c</span>ompressor.exe
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.11
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Linux, macOS</span><a class="headerlink" href="#id5" title="Link to this code">Â¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
...
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Built<span class="w"> </span>target<span class="w"> </span>compressor
$<span class="w"> </span>./compressor
Uncompressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">233</span>
Compressed<span class="w"> </span>size<span class="w"> </span>is:<span class="w"> </span><span class="m">147</span>
ZLIB<span class="w"> </span>VERSION:<span class="w"> </span><span class="m">1</span>.2.11
</pre></div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> might generate CMake <strong>preset</strong> files, that allows users with a modern CMake (<code class="docutils literal notranslate"><span class="pre">&gt;=3.23</span></code>) to
use them with <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--preset</span></code> instead of passing the toolchain file argument.
See <a class="reference internal" href="../../examples/tools/cmake/cmake_toolchain/build_project_cmake_presets.html#examples-tools-cmake-toolchain-build-project-presets"><span class="std std-ref">Building with CMake presets</span></a></p>
<div class="admonition seealso" id="consuming-packages-read-more">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://academy.jfrog.com/conan-2-essentials/2131739?utm_source=Conan+Docs">JFrog Academy Conan 2 Essentials: Building A Simple CMake Project From Conan</a></p></li>
<li><p><a class="reference internal" href="../../examples/tools/cmake/cmake_toolchain/build_project_cmake_presets.html#examples-tools-cmake-toolchain-build-project-presets"><span class="std std-ref">Building with CMake presets</span></a></p></li>
<li><p><a class="reference internal" href="../../examples/tools/autotools/build_project_autotools_toolchain.html#examples-tools-autotools-autotools-toolchain-build-project-autotools-toolchain"><span class="std std-ref">Getting started with Autotools</span></a></p></li>
<li><p><a class="reference internal" href="../../examples/tools/meson/build_simple_meson_project.html#examples-tools-meson-toolchain-build-simple-meson-project"><span class="std std-ref">Getting started with Meson</span></a></p></li>
<li><p><a class="reference internal" href="../../examples/tools/google/bazeltoolchain/build_simple_bazel_project.html#examples-tools-bazel-toolchain-build-simple-bazel-project"><span class="std std-ref">Getting started with Bazel</span></a></p></li>
<li><p><a class="reference internal" href="../../examples/tools/google/bazeltoolchain/build_simple_bazel_7x_project.html#examples-tools-bazel-7x-toolchain-build-simple-bazel-project"><span class="std std-ref">Getting started with Bazel 7.x</span></a></p></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../consuming_packages.html" class="btn btn-neutral float-left" title="Consuming packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="use_tools_as_conan_packages.html" class="btn btn-neutral float-right" title="Using build tools as Conan packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">Last updated on Oct 02, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 2.21
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/2.21/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>