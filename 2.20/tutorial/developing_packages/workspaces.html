<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workspaces &mdash; conan 2.20.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/tutorial/developing_packages/workspaces.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f4a0ca01"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Versioning" href="../versioning.html" />
    <link rel="prev" title="Understanding the Conan Package layout" href="package_layout.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.20
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whatsnew.html">What’s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../consuming_packages.html">Consuming packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_packages.html">Creating packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_repositories.html">Working with Conan repositories</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../developing_packages.html">Developing packages locally</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="local_package_development_flow.html">Package Development Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="editable_packages.html">Packages in editable mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="package_layout.html">Understanding the Conan Package layout</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Workspaces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ci_tutorial/tutorial.html">CI Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devops/devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../incubating.html">Incubating features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  📖 The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/tutorial/developing_packages/workspaces.html">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tutorial.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../developing_packages.html">Developing packages locally</a></li>
      <li class="breadcrumb-item active">Workspaces</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/develop2/tutorial/developing_packages/workspaces.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="workspaces">
<span id="tutorial-workspaces"></span><h1>Workspaces<a class="headerlink" href="#workspaces" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is part of the new incubating features. This means that it is under development, and looking for user
testing and feedback. For more info see <a class="reference internal" href="../../incubating.html#incubating"><span class="std std-ref">Incubating section</span></a>.</p>
</div>
<p>In the previous section, we worked with <em>editable packages</em> and how to define a custom layout. Let’s introduce the concept
of <em>workspace</em> and how to use it.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The workspace feature can be enabled defining the environment variable <code class="docutils literal notranslate"><span class="pre">CONAN_WORKSPACE_ENABLE=will_break_next</span></code>.
The value <code class="docutils literal notranslate"><span class="pre">will_break_next</span></code> is used to emphasize that it will change in next releases, and this feature is for testing only,
it cannot be used in production.</p>
</div>
<p>A Conan <em>workspace</em> gives you the chance to manage several packages as <code class="docutils literal notranslate"><span class="pre">editable</span></code> mode in an
<em>orchestrated</em> or <em>monolithic</em> (also called <em>super-build</em>) way:</p>
<ul class="simple">
<li><p><em>orchestrated</em>, we denote Conan building the editable packages one by one starting on the applications/consumers if exist.</p></li>
<li><p><em>monolithic</em>, we denote the editable packages built as a monolith, generating a single result (generators, etc) for the whole workspace.</p></li>
</ul>
<p>Notice that the packages added to the workspace are automatically resolved as <code class="docutils literal notranslate"><span class="pre">editable</span></code> ones. Those editable packages
are named as workspace’s <code class="docutils literal notranslate"><span class="pre">packages</span></code>.</p>
</section>
<section id="how-to-define-a-workspace">
<h2>How to define a workspace<a class="headerlink" href="#how-to-define-a-workspace" title="Link to this heading">¶</a></h2>
<p>Workspaces are defined by the files <code class="docutils literal notranslate"><span class="pre">conanws.yml</span></code> and/or <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> files. Any Conan workspace command will traverse
up the file system from the current working directory to the filesystem root, until it finds one of those files. That will
define the “root” workspace folder. The paths in the <code class="docutils literal notranslate"><span class="pre">conanws</span></code> file are intended to be relative to be relocatable if
necessary, or could be committed to Git in monorepo-like projects.</p>
<p>Through the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">workspace</span></code> command, we can open, add, and/or remove <code class="docutils literal notranslate"><span class="pre">packages</span></code> from the current workspace.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Read the <a class="reference internal" href="../../reference/workspace_files.html#reference-workspace-files"><span class="std std-ref">workspace files</span></a> section.
Read the <a class="reference internal" href="../../reference/commands/workspace.html#reference-commands-workspace"><span class="std std-ref">conan workspace command</span></a> section.</p>
</div>
</section>
<section id="monolithic-build">
<span id="tutorial-workspaces-monolithic"></span><h2>Monolithic build<a class="headerlink" href="#monolithic-build" title="Link to this heading">¶</a></h2>
<p>Conan workspaces can be built as a single monolithic project (super-project), which can be very convenient.
Let’s see it with an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>workspace
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>super-install
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>conan-release<span class="w"> </span><span class="c1"># use conan-default in Win</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>conan-release
</pre></div>
</div>
<p>Let’s explain a bit what happened.
At first, the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">new</span> <span class="pre">workspace</span></code> created a template project with some relevant files and the following structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── CMakeLists.txt
├── app1
│    ├── CMakeLists.txt
│    ├── conanfile.py
│    ├── src
│    │    ├── app1.cpp
│    │    ├── app1.h
│    │    └── main.cpp
│    └── test_package
│        └── conanfile.py
├── conanws.py
├── conanws.yml
├── liba
│    ├── CMakeLists.txt
│    ├── conanfile.py
│    ├── include
│    │    └── liba.h
│    ├── src
│    │    └── liba.cpp
│    └── test_package
│        ├── CMakeLists.txt
│        ├── conanfile.py
│        └── src
│            └── example.cpp
└── libb
    ├── CMakeLists.txt
    ├── conanfile.py
    ├── include
    │    └── libb.h
    ├── src
    │    └── libb.cpp
    └── test_package
        ├── CMakeLists.txt
        ├── conanfile.py
        └── src
            └── example.cpp
</pre></div>
</div>
<p>The root <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> defines the super-project with:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">CMakeLists.txt</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.25</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">monorepo</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>

<span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>

<span class="nb">function</span><span class="p">(</span><span class="s">add_project</span><span class="w"> </span><span class="s">PACKAGE_NAME</span><span class="w"> </span><span class="s">SUBFOLDER</span><span class="p">)</span>
<span class="w">    </span><span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span><span class="w"> </span><span class="s2">&quot;Adding project: ${PACKAGE_NAME}. Folder: ${SUBFOLDER}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w">        </span><span class="o">${</span><span class="nv">PACKAGE_NAME</span><span class="o">}</span>
<span class="w">        </span><span class="s">SOURCE_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_LIST_DIR</span><span class="o">}</span><span class="s">/</span><span class="o">${</span><span class="nv">SUBFOLDER</span><span class="o">}</span>
<span class="w">        </span><span class="s">SYSTEM</span>
<span class="w">        </span><span class="s">OVERRIDE_FIND_PACKAGE</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="o">${</span><span class="nv">PACKAGE_NAME</span><span class="o">}</span><span class="p">)</span>
<span class="nb">endfunction</span><span class="p">()</span>

<span class="nb">include</span><span class="p">(</span><span class="s">build/conanws_build_order.cmake</span><span class="p">)</span>

<span class="nb">foreach</span><span class="p">(</span><span class="s">pair</span><span class="w"> </span><span class="o">${</span><span class="nv">CONAN_WS_BUILD_ORDER</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">string</span><span class="p">(</span><span class="s">FIND</span><span class="w"> </span><span class="s2">&quot;${pair}&quot;</span><span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="s">pos</span><span class="p">)</span>
<span class="w">    </span><span class="nb">string</span><span class="p">(</span><span class="s">SUBSTRING</span><span class="w"> </span><span class="s2">&quot;${pair}&quot;</span><span class="w"> </span><span class="s">0</span><span class="w"> </span><span class="s2">&quot;${pos}&quot;</span><span class="w"> </span><span class="s">pkg</span><span class="p">)</span>
<span class="w">    </span><span class="nb">math</span><span class="p">(</span><span class="s">EXPR</span><span class="w"> </span><span class="s">pos</span><span class="w"> </span><span class="s2">&quot;${pos} + 1&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># Skip the separator</span>
<span class="w">    </span><span class="nb">string</span><span class="p">(</span><span class="s">SUBSTRING</span><span class="w"> </span><span class="s2">&quot;${pair}&quot;</span><span class="w"> </span><span class="s2">&quot;${pos}&quot;</span><span class="w"> </span><span class="s">-1</span><span class="w"> </span><span class="s">folder</span><span class="p">)</span>

<span class="w">    </span><span class="nb">add_project</span><span class="p">(</span><span class="o">${</span><span class="nv">pkg</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">folder</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="c"># This target should be defined in the liba/CMakeLists.txt, but we can fix it here</span>
<span class="w">    </span><span class="nb">get_target_property</span><span class="p">(</span><span class="s">target_type</span><span class="w"> </span><span class="o">${</span><span class="nv">pkg</span><span class="o">}</span><span class="w"> </span><span class="s">TYPE</span><span class="p">)</span>
<span class="w">    </span><span class="nb">if</span><span class="w"> </span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">target_type</span><span class="w"> </span><span class="s">STREQUAL</span><span class="w"> </span><span class="s2">&quot;EXECUTABLE&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="nb">add_library</span><span class="p">(</span><span class="o">${</span><span class="nv">pkg</span><span class="o">}</span><span class="s">::</span><span class="o">${</span><span class="nv">pkg</span><span class="o">}</span><span class="w"> </span><span class="s">ALIAS</span><span class="w"> </span><span class="o">${</span><span class="nv">pkg</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">endif</span><span class="p">()</span>
<span class="nb">endforeach</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>So basically, the super-project uses <code class="docutils literal notranslate"><span class="pre">FetchContent</span></code> to add the subfolders’ sub-projects.
For this to work correctly, the subprojects must be CMake based subprojects with
<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>. Also, the subprojects must define the correct targets as would be
defined by the <code class="docutils literal notranslate"><span class="pre">find_package()</span></code> scripts, like <code class="docutils literal notranslate"><span class="pre">liba::liba</span></code>. If this is not the case,
it is always possible to define some local <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> targets.</p>
<p>This super-build <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> defines dynamically the correct sub-projects order. Note
that the <code class="docutils literal notranslate"><span class="pre">FetchContent</span></code> strategy requires to define the different sub-projects in the correct
build-order. While this is easy for workspaces with very few packages, this can become a burden
for larger workspaces. The definition of the build-order is done in the generated
<code class="docutils literal notranslate"><span class="pre">conanws_build_order.cmake</span></code> file, that is created by the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">workspace</span> <span class="pre">super-install</span></code> command
calling the <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> workspace <code class="docutils literal notranslate"><span class="pre">build_order()</span></code> method. It is the responsibility of the workspace
to translate the information of the <code class="docutils literal notranslate"><span class="pre">build_order()</span></code> to specifics of the build system. The exact
implementation, like the <code class="docutils literal notranslate"><span class="pre">conanws_build_order.cmake</span></code> file, is not a “built-in” workspace feature, note
this is only the example approach provided by the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">new</span> <span class="pre">workspace</span></code> default template. Users can
implement their own logic in their <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> files.</p>
<p>The other important part is the <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> file:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">conanws.py</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">Workspace</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">save</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeDeps</span><span class="p">,</span> <span class="n">CMakeToolchain</span><span class="p">,</span> <span class="n">cmake_layout</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyWs</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; This is a special conanfile, used only for workspace definition of layout</span>
<span class="sd">    and generators. It shouldn&#39;t have requirements, tool_requirements. It shouldn&#39;t have</span>
<span class="sd">    build() or package() methods</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">deps</span> <span class="o">=</span> <span class="n">CMakeDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">deps</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Ws</span><span class="p">(</span><span class="n">Workspace</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">root_conanfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyWs</span>  <span class="c1"># Note this is the class name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_order</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>  <span class="c1"># default behavior prints the build order</span>
        <span class="n">pkglist</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">it</span><span class="p">[</span><span class="s2">&quot;ref&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">it</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">order</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">level</span><span class="p">])</span>
        <span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;build/conanws_build_order.cmake&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;set(CONAN_WS_BUILD_ORDER </span><span class="si">{</span><span class="n">pkglist</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The role of the <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">MyWs(ConanFile)</span></code> embedded conanfile is important, it defines
the super-project necessary generators and layout.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">workspace</span> <span class="pre">super-install</span></code> does not install the different editables separately, for
this command, the editables do not exist, they are just treated as a single “node” in
the dependency graph, as they will be part of the super-project build. So there is only
a single generated <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> and a single common set of dependencies
<code class="docutils literal notranslate"><span class="pre">xxx-config.cmake</span></code> files for all super-project external dependencies.</p>
<p>The template above worked without external dependencies, but everything would work
the same when there are external dependencies. This can be tested with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>cmake_lib<span class="w"> </span>-d<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mymath
$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.
$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>workspace<span class="w"> </span>-d<span class="w"> </span><span class="nv">requires</span><span class="o">=</span>mymath/0.1
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>super-install
$<span class="w"> </span>cmake<span class="w"> </span>...
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">new</span> <span class="pre">workspace</span></code> generates a CMake based super project.
But it is possible to define a super-project using other build systems, like a
MSBuild solution file that adds the different <code class="docutils literal notranslate"><span class="pre">.vcxproj</span></code> subprojects. As long as
the super-project knows how to aggregate and manage the sub-projects, this is possible.</p>
<p>It might also be possible for the <code class="docutils literal notranslate"><span class="pre">add()</span></code> method in the <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> to manage the
addition of the subprojects to the super-project, if there is some structure.</p>
</div>
</section>
<section id="orchestrated-build">
<span id="tutorial-workspaces-orchestrated"></span><h2>Orchestrated build<a class="headerlink" href="#orchestrated-build" title="Link to this heading">¶</a></h2>
<p>Conan workspaces can also build the different <code class="docutils literal notranslate"><span class="pre">packages</span></code> separately, and taking into account if there are packages defined
as consumers of the other ones.</p>
<p>Let’s use another structure to understand better how it works. Now, let’s create it from scratch with the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">workspace</span> <span class="pre">init</span> <span class="pre">.</span></code> that creates an almost empty conanws.py/conanws.yml, and using the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">new</span> <span class="pre">cmake_lib/cmake_exe</span></code> basic templates, that create regular CMake-based conan packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>myproject<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>myproject
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>init<span class="w"> </span>.
$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>cmake_lib<span class="w"> </span>-d<span class="w"> </span><span class="nv">name</span><span class="o">=</span>hello<span class="w"> </span>-d<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">1</span>.0<span class="w"> </span>-o<span class="w"> </span>hello
$<span class="w"> </span>conan<span class="w"> </span>new<span class="w"> </span>cmake_exe<span class="w"> </span>-d<span class="w"> </span><span class="nv">name</span><span class="o">=</span>app<span class="w"> </span>-d<span class="w"> </span><span class="nv">version</span><span class="o">=</span><span class="m">1</span>.0<span class="w"> </span>-d<span class="w"> </span><span class="nv">requires</span><span class="o">=</span>hello/1.0<span class="w"> </span>-o<span class="w"> </span>app
</pre></div>
</div>
<p>Those commands created a file structure like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── conanws.py
├── conanws.yml
├── app
│    ├── CMakeLists.txt
│    ├── conanfile.py
│    ├── src
│    │    ├── app.cpp
│    │    ├── app.h
│    │    └── main.cpp
│    └── test_package
│        └── conanfile.py
└── hello
     ├── CMakeLists.txt
     ├── conanfile.py
     ├── include
     │    └── hello.h
     ├── src
     │    └── hello.cpp
     └── test_package
         ├── CMakeLists.txt
         ├── conanfile.py
         └── src
             └── example.cpp
</pre></div>
</div>
<p>Now, the <code class="docutils literal notranslate"><span class="pre">conanws.yml</span></code> is empty and the <code class="docutils literal notranslate"><span class="pre">conanws.py</span></code> has a quite minimal definition. Let’s add the <code class="docutils literal notranslate"><span class="pre">app</span></code> application
(consumes <code class="docutils literal notranslate"><span class="pre">hello</span></code>) and the <code class="docutils literal notranslate"><span class="pre">hello</span></code> lib as new <code class="docutils literal notranslate"><span class="pre">packages</span></code> to the workspace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>add<span class="w"> </span>hello
Reference<span class="w"> </span><span class="s1">&#39;hello/1.0&#39;</span><span class="w"> </span>added<span class="w"> </span>to<span class="w"> </span>workspace
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>add<span class="w"> </span>app
Reference<span class="w"> </span><span class="s1">&#39;app/1.0&#39;</span><span class="w"> </span>added<span class="w"> </span>to<span class="w"> </span>workspace
</pre></div>
</div>
<p>Defined the workspace’s <code class="docutils literal notranslate"><span class="pre">packages</span></code>, we can build them and execute the application:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>build
$<span class="w"> </span>app/build/Release/app
hello/1.0:<span class="w"> </span>Hello<span class="w"> </span>World<span class="w"> </span>Release!
...
app/1.0:<span class="w"> </span>Hello<span class="w"> </span>World<span class="w"> </span>Release!
...
</pre></div>
</div>
<p>For any feedback, please open new tickets in <a class="reference external" href="https://github.com/conan-io/conan/issues">https://github.com/conan-io/conan/issues</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="package_layout.html" class="btn btn-neutral float-left" title="Understanding the Conan Package layout" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../versioning.html" class="btn btn-neutral float-right" title="Versioning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">Last updated on Sep 29, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 2.20
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/2.20/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>