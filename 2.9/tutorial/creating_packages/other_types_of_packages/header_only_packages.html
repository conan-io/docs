<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Header-only packages &mdash; conan 2.9.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=2da93098" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/conan.css?v=7d9e9f1e" />

  
    <link rel="shortcut icon" href="../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/tutorial/creating_packages/other_types_of_packages/header_only_packages.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=2fd2eeca"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Package prebuilt binaries" href="package_prebuilt_binaries.html" />
    <link rel="prev" title="Other types of packages" href="../other_types_of_packages.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/conan-docs-logo-2.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whatsnew.html">Whatâ€™s new in Conan 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Install</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../consuming_packages.html">Consuming packages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../creating_packages.html">Creating packages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../create_your_first_package.html">Create your first Conan package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../handle_sources_in_packages.html">Handle sources in packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add_dependencies_to_packages.html">Add dependencies to packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../preparing_the_build.html">Preparing the build</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configure_options_settings.html">Configure settings and options in recipes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../build_packages.html">Build packages: the build() method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../package_method.html">Package files: the package() method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../define_package_information.html">Define information for consumers: the package_info() method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../test_conan_packages.html">Testing Conan packages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../other_types_of_packages.html">Other types of packages</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Header-only packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="package_prebuilt_binaries.html">Package prebuilt binaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="tool_requires_packages.html">Tool requires packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../conan_repositories.html">Working with Conan repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developing_packages.html">Developing packages locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_features.html">Other important Conan features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../devops.html">Devops guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../knowledge.html">Knowledge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  ðŸ“– The complete Conan 2 training is now available for free on
                  JFrog Academy: <a
                  href="https://academy.jfrog.com/path/conan-cc-package-manager?utm_source=Conan+Docs"
                  target="_blank">Essentials</a> and <a
                  href="https://academy.jfrog.com/path/conan-2-advanced?utm_source=Conan+Docs"
                  target="_blank">Advanced</a>.
                </p>
              </div>                                                  
          </div>
          
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/tutorial/creating_packages/other_types_of_packages/header_only_packages.html">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../tutorial.html">Tutorial</a></li>
          <li class="breadcrumb-item"><a href="../../creating_packages.html">Creating packages</a></li>
          <li class="breadcrumb-item"><a href="../other_types_of_packages.html">Other types of packages</a></li>
      <li class="breadcrumb-item active">Header-only packages</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="header-only-packages">
<span id="creating-packages-other-header-only"></span><h1>Header-only packages<a class="headerlink" href="#header-only-packages" title="Link to this heading">Â¶</a></h1>
<p>In this section, we are going to learn how to create a recipe for a header-only library.</p>
<p>Please, first clone the sources to recreate this project. You can find them in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2 repository</a> on GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/creating_packages/other_packages/header_only
</pre></div>
</div>
<p>A header-only library is composed only of header files. That means a consumer doesnâ€™t link with any library but
includes headers, so we need only one binary configuration for a header-only library.</p>
<p>In the <a class="reference internal" href="../create_your_first_package.html#creating-packages-create-your-first-conan-package"><span class="std std-ref">Create your first Conan package</span></a> section, we learned about the settings, and how building the
recipe applying different <code class="docutils literal notranslate"><span class="pre">build_type</span></code> (Release/Debug) generates a new binary package.</p>
<p>As we only need one binary package, we donâ€™t need to declare the <cite>settings</cite> attribute.
This is a basic recipe for a header-only recipe:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">conanfile.py</span><a class="headerlink" href="#id2" title="Link to this code">Â¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
 <span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">copy</span>


 <span class="k">class</span><span class="w"> </span><span class="nc">SumConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
     <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span>
     <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
     <span class="c1"># No settings/options are necessary, this is header only</span>
     <span class="n">exports_sources</span> <span class="o">=</span> <span class="s2">&quot;include/*&quot;</span>
     <span class="c1"># We can avoid copying the sources to the build folder in the cache</span>
     <span class="n">no_copy_source</span> <span class="o">=</span> <span class="kc">True</span>

     <span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="c1"># This will also copy the &quot;include&quot; folder</span>
         <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;*.h&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_folder</span><span class="p">)</span>

     <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="c1"># For header-only packages, libdirs and bindirs are not used</span>
         <span class="c1"># so it&#39;s necessary to set those as empty.</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">bindirs</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libdirs</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<p>Please, note that we are setting <code class="docutils literal notranslate"><span class="pre">cpp_info.bindirs</span></code> and <code class="docutils literal notranslate"><span class="pre">cpp_info.libdirs</span></code> to <code class="docutils literal notranslate"><span class="pre">[]</span></code> because
header-only libraries donâ€™t have compiled libraries or binaries, but they default to <code class="docutils literal notranslate"><span class="pre">[&quot;bin&quot;]</span></code>, and <code class="docutils literal notranslate"><span class="pre">[&quot;lib&quot;]</span></code>, then it is necessary to change it.</p>
<p>Also check that we are setting the <a class="reference internal" href="../../../reference/conanfile/attributes.html#conan-conanfile-properties-no-copy-source"><span class="std std-ref">no_copy_source</span></a> attribute to <code class="docutils literal notranslate"><span class="pre">True</span></code> so that the source code
will not be copied from the <code class="docutils literal notranslate"><span class="pre">source_folder</span></code> to the <code class="docutils literal notranslate"><span class="pre">build_folder</span></code>. This is a typical
optimization for header-only libraries to avoid extra copies.</p>
<p>Our header-only library is this simple function that sums two numbers:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">include/sum.h</span><a class="headerlink" href="#id3" title="Link to this code">Â¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>The folder <cite>examples2/tutorial/creating_packages/other_packages/header_only</cite> in the cloned project contains a <code class="docutils literal notranslate"><span class="pre">test_package</span></code>
folder with an example of an application consuming the header-only library. So we can run a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span> <span class="pre">.</span></code> command
to build the package and test the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.
...
<span class="o">[</span><span class="w"> </span><span class="m">50</span>%<span class="o">]</span><span class="w"> </span>Building<span class="w"> </span>CXX<span class="w"> </span>object<span class="w"> </span>CMakeFiles/example.dir/src/example.cpp.o
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Linking<span class="w"> </span>CXX<span class="w"> </span>executable<span class="w"> </span>example
<span class="o">[</span><span class="m">100</span>%<span class="o">]</span><span class="w"> </span>Built<span class="w"> </span>target<span class="w"> </span>example

--------<span class="w"> </span>Testing<span class="w"> </span>the<span class="w"> </span>package:<span class="w"> </span>Running<span class="w"> </span>test<span class="o">()</span><span class="w"> </span>----------
sum/0.1<span class="w"> </span><span class="o">(</span><span class="nb">test</span><span class="w"> </span>package<span class="o">)</span>:<span class="w"> </span>Running<span class="w"> </span>test<span class="o">()</span>
sum/0.1<span class="w"> </span><span class="o">(</span><span class="nb">test</span><span class="w"> </span>package<span class="o">)</span>:<span class="w"> </span>RUN:<span class="w"> </span>./example
<span class="m">1</span><span class="w"> </span>+<span class="w"> </span><span class="nv">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<p>After running the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> a new binary package is created for the header-only library, and we can see how the
<code class="docutils literal notranslate"><span class="pre">test_package</span></code> project can use it correctly.</p>
<p>We can list the binary packages created running this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>list<span class="w"> </span><span class="s2">&quot;sum/0.1#:*&quot;</span>
Local<span class="w"> </span>Cache
<span class="w">  </span>sum
<span class="w">    </span>sum/0.1
<span class="w">      </span>revisions
<span class="w">        </span>c1a714a086933b067bcbf12002fb0780<span class="w"> </span><span class="o">(</span><span class="m">2024</span>-05-09<span class="w"> </span><span class="m">15</span>:28:51<span class="w"> </span>UTC<span class="o">)</span>
<span class="w">          </span>packages
<span class="w">            </span>da39a3ee5e6b4b0d3255bfef95601890afd80709
<span class="w">              </span>info
</pre></div>
</div>
<p>We get one package with the package ID <code class="docutils literal notranslate"><span class="pre">da39a3ee5e6b4b0d3255bfef95601890afd80709</span></code>.
Letâ€™s see what happen if we run the <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> but specifying <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">build_type=Debug</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>conan<span class="w"> </span>list<span class="w"> </span><span class="s2">&quot;sum/0.1#:*&quot;</span>
Local<span class="w"> </span>Cache
<span class="w">  </span>sum
<span class="w">    </span>sum/0.1
<span class="w">      </span>revisions
<span class="w">        </span>c1a714a086933b067bcbf12002fb0780<span class="w"> </span><span class="o">(</span><span class="m">2024</span>-05-09<span class="w"> </span><span class="m">15</span>:28:51<span class="w"> </span>UTC<span class="o">)</span>
<span class="w">          </span>packages
<span class="w">            </span>da39a3ee5e6b4b0d3255bfef95601890afd80709
<span class="w">              </span>info
</pre></div>
</div>
<p>Even in the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> executable is built for Debug, we get the same binary package for the header-only library.
This is because we didnâ€™t specify the <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute in the recipe, so the changes in the input settings (<code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">build_type=Debug</span></code>)
do not affect the recipe and therefore the generated binary package is always the same.</p>
<section id="header-only-library-with-tests">
<h2>Header-only library with tests<a class="headerlink" href="#header-only-library-with-tests" title="Link to this heading">Â¶</a></h2>
<p>In the previous example, we saw why a recipe header-only library shouldnâ€™t declare the <code class="docutils literal notranslate"><span class="pre">settings</span></code> attribute,
but sometimes the recipe needs them to build some executable, for example, for testing the library.
Nonetheless, the binary package of the header-only library should still be unique, so we are going to review how to
achieve that.</p>
<p>Please, first clone the sources to recreate this project. You can find them in the
<a class="reference external" href="https://github.com/conan-io/examples2">examples2 repository</a> on GitHub:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples2.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>examples2/tutorial/creating_packages/other_packages/header_only_gtest
</pre></div>
</div>
<p>We have the same header-only library that sums two numbers, but now we have this recipe:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">copy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">cmake_layout</span><span class="p">,</span> <span class="n">CMake</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SumConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">exports_sources</span> <span class="o">=</span> <span class="s2">&quot;include/*&quot;</span><span class="p">,</span> <span class="s2">&quot;test/*&quot;</span>
    <span class="n">no_copy_source</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeToolchain&quot;</span><span class="p">,</span> <span class="s2">&quot;CMakeDeps&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_requires</span><span class="p">(</span><span class="s2">&quot;gtest/1.11.0&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">check_min_cppstd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools.build:skip_test&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">build_script_folder</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
            <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">bindir</span><span class="p">,</span> <span class="s2">&quot;test_sum&quot;</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This will also copy the &quot;include&quot; folder</span>
        <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;*.h&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">package_folder</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># For header-only packages, libdirs and bindirs are not used</span>
        <span class="c1"># so it&#39;s necessary to set those as empty.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">bindirs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libdirs</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">package_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
<p>These are the changes introduced in the recipe:</p>
<blockquote>
<div><ul class="simple">
<li><p>We are introducing a <code class="docutils literal notranslate"><span class="pre">test_require</span></code> to <code class="docutils literal notranslate"><span class="pre">gtest/1.11.0</span></code>. A <code class="docutils literal notranslate"><span class="pre">test_require</span></code> is similar to a regular requirement
but it is not propagated to the consumers and cannot conflict.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gtest</span></code> needs at least C++11 to build. So we introduced a <code class="docutils literal notranslate"><span class="pre">validate()</span></code> method calling <code class="docutils literal notranslate"><span class="pre">check_min_cppstd</span></code>.</p></li>
<li><p>As we are building the <code class="docutils literal notranslate"><span class="pre">gtest</span></code> examples with CMake, we use the generators <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code>,
and we declared the <code class="docutils literal notranslate"><span class="pre">cmake_layout()</span></code> to have a known/standard directory structure.</p></li>
<li><p>We have a <code class="docutils literal notranslate"><span class="pre">build()</span></code> method, building the tests, but only when the standard conf <code class="docutils literal notranslate"><span class="pre">tools.build:skip_test</span></code> is not
True. Use that conf as a standard way to enable/disable the testing. It is used by the helpers like <code class="docutils literal notranslate"><span class="pre">CMake</span></code> to
skip the <code class="docutils literal notranslate"><span class="pre">cmake.test()</span></code> in case we implement the tests in CMake.</p></li>
<li><p>We have a <code class="docutils literal notranslate"><span class="pre">package_id()</span></code> method calling <code class="docutils literal notranslate"><span class="pre">self.info.clear()</span></code>. This is internally removing all the information
(settings, options, requirements) from the package_id calculation so we generate only one configuration for our
header-only library.</p></li>
</ul>
</div></blockquote>
<p>We can call <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> to build and test our package.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span>compiler.cppstd<span class="o">=</span><span class="m">14</span><span class="w"> </span>--build<span class="w"> </span>missing
...
Running<span class="w"> </span>main<span class="o">()</span><span class="w"> </span>from<span class="w"> </span>/Users/luism/.conan2/p/tmp/9bf83ef65d5ff0d6/b/googletest/src/gtest_main.cc
<span class="o">[==========]</span><span class="w"> </span>Running<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>suite.
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span>Global<span class="w"> </span><span class="nb">test</span><span class="w"> </span>environment<span class="w"> </span>set-up.
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span>SumTest
<span class="o">[</span><span class="w"> </span>RUN<span class="w">      </span><span class="o">]</span><span class="w"> </span>SumTest.BasicSum
<span class="o">[</span><span class="w">       </span>OK<span class="w"> </span><span class="o">]</span><span class="w"> </span>SumTest.BasicSum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="o">)</span>
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span>SumTest<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>total<span class="o">)</span>

<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span>Global<span class="w"> </span><span class="nb">test</span><span class="w"> </span>environment<span class="w"> </span>tear-down
<span class="o">[==========]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>suite<span class="w"> </span>ran.<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>total<span class="o">)</span>
<span class="o">[</span><span class="w">  </span>PASSED<span class="w">  </span><span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>test.
sum/0.1:<span class="w"> </span>Package<span class="w"> </span><span class="s1">&#39;da39a3ee5e6b4b0d3255bfef95601890afd80709&#39;</span><span class="w"> </span>built
...
</pre></div>
</div>
</div></blockquote>
<p>We can run <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code> again specifying a different <code class="docutils literal notranslate"><span class="pre">compiler.cppstd</span></code> and the built package would be the same:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span>compiler.cppstd<span class="o">=</span><span class="m">17</span>
...
sum/0.1:<span class="w"> </span>RUN:<span class="w"> </span>./test_sum
Running<span class="w"> </span>main<span class="o">()</span><span class="w"> </span>from<span class="w"> </span>/Users/luism/.conan2/p/tmp/9bf83ef65d5ff0d6/b/googletest/src/gtest_main.cc
<span class="o">[==========]</span><span class="w"> </span>Running<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>suite.
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span>Global<span class="w"> </span><span class="nb">test</span><span class="w"> </span>environment<span class="w"> </span>set-up.
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span>SumTest
<span class="o">[</span><span class="w"> </span>RUN<span class="w">      </span><span class="o">]</span><span class="w"> </span>SumTest.BasicSum
<span class="o">[</span><span class="w">       </span>OK<span class="w"> </span><span class="o">]</span><span class="w"> </span>SumTest.BasicSum<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="o">)</span>
<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span>SumTest<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>total<span class="o">)</span>

<span class="o">[</span>----------<span class="o">]</span><span class="w"> </span>Global<span class="w"> </span><span class="nb">test</span><span class="w"> </span>environment<span class="w"> </span>tear-down
<span class="o">[==========]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>from<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>suite<span class="w"> </span>ran.<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>ms<span class="w"> </span>total<span class="o">)</span>
<span class="o">[</span><span class="w">  </span>PASSED<span class="w">  </span><span class="o">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>test.
sum/0.1:<span class="w"> </span>Package<span class="w"> </span><span class="s1">&#39;da39a3ee5e6b4b0d3255bfef95601890afd80709&#39;</span><span class="w"> </span>built
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once we have the <code class="docutils literal notranslate"><span class="pre">sum/0.1</span></code> binary package available (in a server, after a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">upload</span></code>, or in the local cache),
we can install it even if we donâ€™t specify input values for <code class="docutils literal notranslate"><span class="pre">os</span></code>, <code class="docutils literal notranslate"><span class="pre">arch</span></code>, â€¦ etc. This is a new feature of Conan 2.X.</p>
<p>We could call <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span> <span class="pre">--require</span> <span class="pre">sum/0.1</span></code> with an empty profile and would get the binary package from the
server. But if we miss the binary and we need to build the package again, it will fail because of the lack of
settings.</p>
</div>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../other_types_of_packages.html" class="btn btn-neutral float-left" title="Other types of packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="package_prebuilt_binaries.html" class="btn btn-neutral float-right" title="Package prebuilt binaries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">Last updated on Feb 25, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 2.9
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.26/index.html">2.26</a></dd>
        
    
        
            <dd><a href="/2.25/index.html">2.25</a></dd>
        
    
        
            <dd><a href="/2.24/index.html">2.24</a></dd>
        
    
        
            <dd><a href="/2.23/index.html">2.23</a></dd>
        
    
        
            <dd><a href="/2.22/index.html">2.22</a></dd>
        
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/2.9/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>