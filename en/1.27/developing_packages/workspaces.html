<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workspaces &mdash; conan 1.27.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/developing_packages/workspaces.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=004d8020"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Package apps and devtools" href="../devtools.html" />
    <link rel="prev" title="Packages in editable mode" href="editable_packages.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.27
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../developing_packages.html">Developing packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="package_dev_flow.html">Package development flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="editable_packages.html">Packages in editable mode</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Workspaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conan-workspace-definition">Conan workspace definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-configuration-build-environments">Single configuration build environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-configuration-build-environments">Multi configuration build environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#out-of-source-builds">Out of source builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conan_v2.html">Road to Conan 2.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  üìñ The complete Conan 2 training is now available for free on
                  JFrog Academy: <a
                  href="https://academy.jfrog.com/path/conan-cc-package-manager?utm_source=Conan+Docs"
                  target="_blank">Essentials</a> and <a
                  href="https://academy.jfrog.com/path/conan-2-advanced?utm_source=Conan+Docs"
                  target="_blank">Advanced</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../developing_packages.html">Developing packages</a></li>
      <li class="breadcrumb-item active">Workspaces</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="workspaces">
<span id="id1"></span><h1>Workspaces<a class="headerlink" href="#workspaces" title="Link to this heading">ÔÉÅ</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an <strong>experimental</strong> feature. This is actually a preview of the feature, with the main goal of receiving feedbacks and improving
it. Consider the file formats, commands and flows to be unstable and subject to changes in the next releases.</p>
</div>
<p>Sometimes, it is necessary to work simultaneously on more than one package. In theory, each package should be a ‚Äúwork unit‚Äù, and developers
should be able to work on them in isolation. But sometimes, some changes require modifications in more than one package at the same time.
The local development flow can help, but it still requires using <strong class="command">export-pkg</strong> to put the artifacts in the local cache, where other
packages under development will consume them.</p>
<p>The Conan workspaces allow to have more than one package in user folders, and have them directly use other packages from user folders
without needing to put them in the local cache. Furthermore, they enable incremental builds on large projects containing multiple packages.</p>
<p>Lets introduce them with a practical example; the code can be found in the conan examples repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/conan-io/examples.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>features/workspace/cmake
</pre></div>
</div>
<p>Note that this folder contains two files <em>conanws_gcc.yml</em> and <em>conanws_vs.yml</em>, for gcc (Makefiles, single-configuration build environments)
and for Visual Studio (MSBuild, multi-configuration build environment), respectively.</p>
<section id="conan-workspace-definition">
<h2>Conan workspace definition<a class="headerlink" href="#conan-workspace-definition" title="Link to this heading">ÔÉÅ</a></h2>
<p>Workspaces are defined in a yaml file, with any user defined name. Its structure is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">editables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">say/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">say</span>
<span class="w">    </span><span class="nt">hello/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello</span>
<span class="w">    </span><span class="nt">chat/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat</span>
<span class="nt">layout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">layout_gcc</span>
<span class="nt">workspace_generator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cmake</span>
<span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat/0.1@user/testing</span>
</pre></div>
</div>
<p>The first section <code class="docutils literal notranslate"><span class="pre">editables</span></code> defines the mapping between package references and relative paths. Each one is equivalent to
a <a class="reference internal" href="../reference/commands/development/editable.html#conan-editable-add"><span class="std std-ref">conan editable add</span></a> command (Do NOT do this ‚Äì it is not necessary. It will be automatically done later. Just to understand
the behavior):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>add<span class="w"> </span>say<span class="w"> </span>say/0.1@user/testing<span class="w"> </span>--layout<span class="o">=</span>layout_gcc
$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>add<span class="w"> </span>hello<span class="w"> </span>hello/0.1@user/testing<span class="w"> </span>--layout<span class="o">=</span>layout_gcc
$<span class="w"> </span>conan<span class="w"> </span>editable<span class="w"> </span>add<span class="w"> </span>chat<span class="w"> </span>chat/0.1@user/testing<span class="w"> </span>--layout<span class="o">=</span>layout_gcc
</pre></div>
</div>
<p>The main difference is that this <em>Editable</em> state is only temporary for this workspace. It doesn‚Äôt affect other projects or
packages, which can still consume these say, hello, chat packages from the local cache.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">layout:</span> <span class="pre">layout_gcc</span></code> declaration in the workspace affects all the packages. It is also possible to define
a different layout per package, as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">editables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">say/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">say</span>
<span class="w">        </span><span class="nt">layout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom_say_layout</span>
</pre></div>
</div>
<p>Layout files are explained in <a class="reference internal" href="../reference/config_files/editable_layout.html#editable-layout"><span class="std std-ref">Editable layout files</span></a> and in the <a class="reference internal" href="editable_packages.html#editable-packages"><span class="std std-ref">Packages in editable mode</span></a> sections.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">workspace_generator</span></code> defines the file that will be generated for the top project. The only supported value so far
is <code class="docutils literal notranslate"><span class="pre">cmake</span></code> and it will generate a <em>conanworkspace.cmake</em> file that looks like:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_say_SRC</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/say/src&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_say_BUILD</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/say/build/Debug&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_hello_SRC</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/hello/src&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_hello_BUILD</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/hello/build/Debug&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_chat_SRC</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/chat/src&quot;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PACKAGE_chat_BUILD</span><span class="w"> </span><span class="s2">&quot;&lt;path&gt;/examples/workspace/cmake/chat/build/Debug&quot;</span><span class="p">)</span>

<span class="nb">macro</span><span class="p">(</span><span class="s">conan_workspace_subdirectories</span><span class="p">)</span>
<span class="w">    </span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="o">${</span><span class="nv">PACKAGE_say_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PACKAGE_say_BUILD</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="o">${</span><span class="nv">PACKAGE_hello_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PACKAGE_hello_BUILD</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">add_subdirectory</span><span class="p">(</span><span class="o">${</span><span class="nv">PACKAGE_chat_SRC</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PACKAGE_chat_BUILD</span><span class="o">}</span><span class="p">)</span>
<span class="nb">endmacro</span><span class="p">()</span>
</pre></div>
</div>
<p>This file can be included in your user-defined <em>CMakeLists.txt</em> (this file is not generated).
Here you can see the <em>CMakeLists.txt</em> used in this project:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.0</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">WorkspaceProject</span><span class="p">)</span>

<span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/conanworkspace.cmake</span><span class="p">)</span>
<span class="nb">conan_workspace_subdirectories</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">root:</span> <span class="pre">chat/0.1&#64;user/testing</span></code> defines which is the consumer node of the graph, typically some kind of executable. You
can provide a comma separated list of references, as a string, or a yaml list (abbreviated or full as yaml items). All the root nodes will be in the same dependency graph, leading to conflicts if they
depend on different versions of the same library, as in any other Conan command.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">editables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">say/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">say</span>
<span class="w">    </span><span class="nt">hello/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello</span>
<span class="w">    </span><span class="nt">chat/0.1@user/testing</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat</span>

<span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat/0.1@user/testing, say/0.1@user/testing</span>
<span class="c1"># or</span>
<span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;helloa/0.1@lasote/stable&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;hellob/0.1@lasote/stable&quot;</span><span class="p p-Indicator">]</span>
<span class="c1"># or</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">helloa/0.1@lasote/stable</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hellob/0.1@lasote/stable</span>
</pre></div>
</div>
</section>
<section id="single-configuration-build-environments">
<h2>Single configuration build environments<a class="headerlink" href="#single-configuration-build-environments" title="Link to this heading">ÔÉÅ</a></h2>
<p>There are some build systems, like Make, that require the developer to manage different configurations in different build folders,
and switch between folders to change configuration. The file described above is <em>conan_gcc.yml</em> file, which defines a Conan workspace that
works for a CMake based project for MinGW/Unix Makefiles gcc environments (working for apple-clang or clang would be very similar, if not identical).</p>
<p>Lets use it to install this workspace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>build_release<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build_release
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>install<span class="w"> </span>../conanws_gcc.yml<span class="w"> </span>--profile<span class="o">=</span>my_profile
</pre></div>
</div>
<p>Here we assume that you have a <code class="docutils literal notranslate"><span class="pre">my_profile</span></code> profile defined which would use a single-configuration build system (like Makefiles). The
example is tested with gcc in Linux, but working with apple-clang with Makefiles would be the same).
You should see something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Configuration:
<span class="o">[</span>settings<span class="o">]</span>
...
<span class="nv">build_type</span><span class="o">=</span>Release
<span class="nv">compiler</span><span class="o">=</span>gcc
compiler.libcxx<span class="o">=</span>libstdc++
compiler.version<span class="o">=</span><span class="m">4</span>.9
...

Requirements
<span class="w">    </span>chat/0.1@user/testing<span class="w"> </span>from<span class="w"> </span>user<span class="w"> </span>folder<span class="w"> </span>-<span class="w"> </span>Editable
<span class="w">    </span>hello/0.1@user/testing<span class="w"> </span>from<span class="w"> </span>user<span class="w"> </span>folder<span class="w"> </span>-<span class="w"> </span>Editable
<span class="w">    </span>say/0.1@user/testing<span class="w"> </span>from<span class="w"> </span>user<span class="w"> </span>folder<span class="w"> </span>-<span class="w"> </span>Editable
Packages
<span class="w">    </span>chat/0.1@user/testing:df2c4f4725219597d44b7eab2ea5c8680abd57f9<span class="w"> </span>-<span class="w"> </span>Editable
<span class="w">    </span>hello/0.1@user/testing:b0e473ad8697d6069797b921517d628bba8b5901<span class="w"> </span>-<span class="w"> </span>Editable
<span class="w">    </span>say/0.1@user/testing:80faec7955dcba29246085ff8d64a765db3b414f<span class="w"> </span>-<span class="w"> </span>Editable

say/0.1@user/testing:<span class="w"> </span>Generator<span class="w"> </span>cmake<span class="w"> </span>created<span class="w"> </span>conanbuildinfo.cmake
...
hello/0.1@user/testing:<span class="w"> </span>Generator<span class="w"> </span>cmake<span class="w"> </span>created<span class="w"> </span>conanbuildinfo.cmake
...
chat/0.1@user/testing:<span class="w"> </span>Generator<span class="w"> </span>cmake<span class="w"> </span>created<span class="w"> </span>conanbuildinfo.cmake
...
</pre></div>
</div>
<p>These <em>conanbuildinfo.cmake</em> files have been created in each package <em>build/Release</em> folder, as defined by the
<em>layout_gcc</em> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># This helps to define the location of CMakeLists.txt within package</span>
<span class="k">[source_folder]</span>
<span class="na">src</span>

<span class="c1"># This defines where the conanbuildinfo.cmake will be written to</span>
<span class="k">[build_folder]</span>
<span class="na">build/{{settings.build_type}}</span>
</pre></div>
</div>
<p>Now we can configure and build our project as usual:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span><span class="c1"># or just $ make</span>
$<span class="w"> </span>../chat/build/Release/app
Release:<span class="w"> </span>Hello<span class="w"> </span>World!
Release:<span class="w"> </span>Hello<span class="w"> </span>World!
Release:<span class="w"> </span>Hello<span class="w"> </span>World!
</pre></div>
</div>
<p>Now, go do a change in some of the packages, for example the ‚Äúsay‚Äù one, and rebuild. See how it does an incremental build (fast).</p>
<p>Note that nothing will really be installed in the local cache, all the dependencies are resolved locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>search<span class="w"> </span>say
There<span class="w"> </span>are<span class="w"> </span>no<span class="w"> </span>packages<span class="w"> </span>matching<span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;say&#39;</span><span class="w"> </span>pattern
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The package <em>conanfile.py</em> recipes do not contain anything special, they are standard recipes. But the packages <em>CMakeLists.txt</em>
have defined the following:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">conan_basic_setup</span><span class="p">(</span><span class="s">NO_OUTPUT_DIRS</span><span class="p">)</span>
</pre></div>
</div>
<p>This is because the default <code class="docutils literal notranslate"><span class="pre">conan_basic_setup()</span></code> does define output directories for artifacts such as <em>bin</em>, <em>lib</em>, etc, which
is not what the local project layout expects. You need to check and make sure that your build scripts and recipe matches both
the expected local layout (as defined in layout files), and the recipe <code class="docutils literal notranslate"><span class="pre">package()</span></code> method logic.</p>
</div>
<p>Building for debug mode is done in its own folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build_debug<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build_debug
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>install<span class="w"> </span>../conanws_gcc.yml<span class="w"> </span>--profile<span class="o">=</span>my_gcc_profile<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span><span class="c1"># or just $ make</span>
$<span class="w"> </span>../chat/build/Debug/app
Debug:<span class="w"> </span>Bye<span class="w"> </span>World!
Debug:<span class="w"> </span>Bye<span class="w"> </span>World!
Debug:<span class="w"> </span>Bye<span class="w"> </span>World!
</pre></div>
</div>
</section>
<section id="multi-configuration-build-environments">
<h2>Multi configuration build environments<a class="headerlink" href="#multi-configuration-build-environments" title="Link to this heading">ÔÉÅ</a></h2>
<p>Some build systems, like Visual Studio (MSBuild), use ‚Äúmulti-configuration‚Äù environments. That is, even if the project is configured just once
you can switch between different configurations (like Debug/Release) directly in the IDE and build there.</p>
<p>The above example uses the Conan <code class="docutils literal notranslate"><span class="pre">cmake</span></code> generator, that creates a single <em>conanbuildinfo.cmake</em> file. This is not a problem if we have our
configurations built in different folders. Each one will contain its own <em>conanbuildinfo.cmake</em>. For Visual Studio that means that if
we wanted to switch from Debug&lt;-&gt;Release, we should issue a new <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">workspace</span> <span class="pre">install</span></code> command with the right <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">build_type</span></code> and
do a clean build, in order to get the right dependencies.</p>
<p>Conan has the <a class="reference internal" href="../integrations/build_system/cmake/cmake_multi_generator.html#cmake-multi"><span class="std std-ref">cmake_multi generator</span></a> generator, that allows this direct switch of Debug/Release configuration in the IDE. The <em>conanfile.py</em>
recipes they have defined the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> generator, so the first step is to override that in our <em>conanws_vs.yml</em> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">editables</span><span class="p">:</span>
<span class="nt">say/0.1@user/testing</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">say</span>
<span class="nt">hello/0.1@user/testing</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello</span>
<span class="nt">chat/0.1@user/testing</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat</span>
<span class="nt">layout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">layout_vs</span>
<span class="nt">generators</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cmake_multi</span>
<span class="nt">workspace_generator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cmake</span>
<span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chat/0.1@user/testing</span>
</pre></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">generators:</span> <span class="pre">cmake_multi</span></code> line, that will define the generators to be used by our workspace packages. Also, our <em>CMakeLists.txt</em>
should take into account that now we won‚Äôt have a <em>conanbuildinfo.cmake</em> file, but a <em>conanbuildinfo_multi.cmake</em> file. See for example
the <em>hello/src/CMakeLists.txt</em> file:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">Hello</span><span class="p">)</span>

<span class="nb">if</span><span class="p">(</span><span class="s">EXISTS</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/conanbuildinfo_multi.cmake</span><span class="p">)</span>
<span class="w">    </span><span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/conanbuildinfo_multi.cmake</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
<span class="w">    </span><span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/conanbuildinfo.cmake</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">conan_basic_setup</span><span class="p">(</span><span class="s">NO_OUTPUT_DIRS</span><span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span><span class="s">hello</span><span class="w"> </span><span class="s">hello.cpp</span><span class="p">)</span>
<span class="nb">conan_target_link_libraries</span><span class="p">(</span><span class="s">hello</span><span class="p">)</span>
</pre></div>
</div>
<p>The last <code class="docutils literal notranslate"><span class="pre">conan_target_link_libraries(hello)</span></code> is a helper that does the right linking with Debug/Release libraries (also works when using cmake
targets).</p>
<p>Make sure to install both Debug and Release configurations straight ahead, if we want to later switch between them in the IDE:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>install<span class="w"> </span>../conanws_vs.yml
$<span class="w"> </span>conan<span class="w"> </span>workspace<span class="w"> </span>install<span class="w"> </span>../conanws_vs.yml<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15 Win64&quot;</span>
</pre></div>
</div>
<p>With those commands you will get a Visual Studio solution, that you can open, select the <em>app</em> executable as StartUp project, and start building,
executing, debugging, switching from Debug and Release configurations freely from the IDE, without needing to issue further Conan commands.</p>
<p>You can check in the project folders, how the following files have been generated:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hello
  |- build
        | - conanbuildinfo_multi.cmake
        | - conanbuildinfo_release.cmake
        | - conanbuildinfo_debug.cmake
</pre></div>
</div>
<p>Note that they are not located in <em>build/Release</em> and <em>build/Debug</em> subfolders; that is because of the multi-config environment. To account for that
the <em>layout_vs</em> define the <code class="docutils literal notranslate"><span class="pre">[build_folder]</span></code> not as <code class="docutils literal notranslate"><span class="pre">build/{settings.build_type}</span></code> but just as:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[build_folder]</span>
<span class="na">build</span>
</pre></div>
</div>
</section>
<section id="out-of-source-builds">
<h2>Out of source builds<a class="headerlink" href="#out-of-source-builds" title="Link to this heading">ÔÉÅ</a></h2>
<p>The above examples are using a build folder in-source of the packages in editable mode. It is possible to define out-of-source builds layouts,
using relative paths and the <code class="docutils literal notranslate"><span class="pre">reference</span></code> argument. The following layout definition could be used to locate the build artifacts of an
editable package in a sibling <code class="docutils literal notranslate"><span class="pre">build/&lt;package-name&gt;</span></code> folder:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[build_folder]</span>
<span class="na">../build/{{reference.name}}/{{settings.build_type}}</span>

<span class="k">[includedirs]</span>
<span class="na">src</span>

<span class="k">[libdirs]</span>
<span class="na">../build/{{reference.name}}/{{settings.build_type}}/lib</span>
</pre></div>
</div>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Link to this heading">ÔÉÅ</a></h2>
<p>Note that this way of developing packages shouldn‚Äôt be used to create the final packages (you could try to use <strong class="command">conan export-pkg</strong>), but instead,
a full package creation with <strong class="command">conan create</strong> (best in CI) is recommended.</p>
<p>So far, only the CMake super-project generator is implemented. A Visual Studio one is being considered, and seems feasible, but not yet available.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>We really want your feedback. Please submit any issues to <a class="reference external" href="https://github.com/conan-io/conan/issues">https://github.com/conan-io/conan/issues</a> with any suggestion, problem, idea,
and using [workspaces] prefix in the issue title.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="editable_packages.html" class="btn btn-neutral float-left" title="Packages in editable mode" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../devtools.html" class="btn btn-neutral float-right" title="Package apps and devtools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2019, JFrog.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.27
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.26/index.html">2.26</a></dd>
        
    
        
            <dd><a href="/2.25/index.html">2.25</a></dd>
        
    
        
            <dd><a href="/2.24/index.html">2.24</a></dd>
        
    
        
            <dd><a href="/2.23/index.html">2.23</a></dd>
        
    
        
            <dd><a href="/2.22/index.html">2.22</a></dd>
        
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.27/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>