<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMake &mdash; conan 1.27.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/reference/build_helpers/cmake.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=004d8020"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AutoToolsBuildEnvironment (configure/make)" href="autotools.html" />
    <link rel="prev" title="Build helpers" href="../build_helpers.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.27
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conanfile.html">conanfile.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../profiles.html">Profiles</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../build_helpers.html">Build helpers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">CMake</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constructor">Constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-used-generators">Default used generators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autotools.html">AutoToolsBuildEnvironment (configure/make)</a></li>
<li class="toctree-l3"><a class="reference internal" href="visual_studio.html">MSBuild</a></li>
<li class="toctree-l3"><a class="reference internal" href="visual_studio.html#visualstudiobuildenvironment">VisualStudioBuildEnvironment</a></li>
<li class="toctree-l3"><a class="reference internal" href="meson.html">Meson</a></li>
<li class="toctree-l3"><a class="reference internal" href="run_environment.html">RunEnvironment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hooks.html">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conan_v2_mode.html">CONAN_V2_MODE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conan_v2.html">Road to Conan 2.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  📖 The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../build_helpers.html">Build helpers</a></li>
      <li class="breadcrumb-item active">CMake</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/reference/build_helpers/cmake.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cmake">
<span id="cmake-reference"></span><h1>CMake<a class="headerlink" href="#cmake" title="Link to this heading"></a></h1>
<p>The <cite>CMake</cite> class helps us to invoke <cite>cmake</cite> command with the generator, flags and definitions, reflecting the specified Conan settings.</p>
<p>There are two ways to invoke your cmake tools:</p>
<ul class="simple">
<li><p>Using the helper attributes <code class="docutils literal notranslate"><span class="pre">cmake.command_line</span></code> and <code class="docutils literal notranslate"><span class="pre">cmake.build_config</span></code>:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>

 <span class="k">class</span><span class="w"> </span><span class="nc">ExampleConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
     <span class="o">...</span>

     <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;cmake &quot;</span><span class="si">%s</span><span class="s1">&quot; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">,</span> <span class="n">cmake</span><span class="o">.</span><span class="n">command_line</span><span class="p">))</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;cmake --build . </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cmake</span><span class="o">.</span><span class="n">build_config</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;cmake --build . --target install&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Using the helper methods:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># same as cmake.configure(source_folder=self.source_folder, build_folder=self.build_folder)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> <span class="c1"># Build the &quot;RUN_TESTS&quot; or &quot;test&quot; target</span>
        <span class="c1"># Build the &quot;install&quot; target, defining CMAKE_INSTALL_PREFIX to self.package_folder</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
</pre></div>
</div>
<section id="constructor">
<h2>Constructor<a class="headerlink" href="#constructor" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CMake</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conanfile</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmake_system_name</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">toolset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">make_program</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">set_cmake_flags</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">msbuild_verbosity</span><span class="o">=</span><span class="s1">&#39;minimal&#39;</span><span class="p">,</span> <span class="n">cmake_program</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">generator_platform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">append_vcvars</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong> (Required): Conanfile object. Usually <code class="docutils literal notranslate"><span class="pre">self</span></code> in a <em>conanfile.py</em></p></li>
<li><p><strong>generator</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Specify a custom generator instead of autodetect it. e.g., “MinGW Makefiles”</p></li>
<li><p><strong>cmake_system_name</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">True</span></code>): Specify a custom value for <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code> instead of autodetect it.</p></li>
<li><p><strong>parallel</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">True</span></code>): If <code class="docutils literal notranslate"><span class="pre">True</span></code>, will append the <cite>-jN</cite> attribute for parallel building being N the <a class="reference internal" href="../tools.html#tools-cpu-count"><span class="std std-ref">cpu_count()</span></a>.
Also applies to parallel test execution (by defining <code class="docutils literal notranslate"><span class="pre">CTEST_PARALLEL_LEVEL</span></code> environment variable).</p></li>
<li><p><strong>build_type</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Force the build type instead of taking the value from the settings.
Note that <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> will not be declared when using CMake multi-configuration generators such as
Visual Studio or XCode as it will not have effect.</p></li>
<li><p><strong>toolset</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Specify a toolset for Visual Studio.</p></li>
<li><p><strong>make_program</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Indicate path to <code class="docutils literal notranslate"><span class="pre">make</span></code>.</p></li>
<li><p><strong>set_cmake_flags</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Whether or not to set CMake flags like <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_C_FLAGS</span></code>, etc.</p></li>
<li><p><strong>msbuild_verbosity</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">minimal</span></code>): verbosity level for
MSBuild (in case of Visual Studio generator). Set this parameter to <code class="docutils literal notranslate"><span class="pre">None</span></code> to avoid
using it in the command line.</p></li>
<li><p><strong>cmake_program</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Path to the custom cmake executable.</p></li>
<li><p><strong>generator_platform</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Generator platform name or none to autodetect (-A cmake option).</p></li>
<li><p><strong>append_vcvars</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">False</span></code>): When a Visual Studio environment is activated by the build helper, append it to respect existing environment. <code class="docutils literal notranslate"><span class="pre">CMake</span></code> helper sometimes, like when using the Ninja generator, needs to call <code class="docutils literal notranslate"><span class="pre">vcvars</span></code> to set the VS environment. By default the <code class="docutils literal notranslate"><span class="pre">vcvars</span></code> is pre-pended to the environment, taking precedence. With <code class="docutils literal notranslate"><span class="pre">append_vcvars=True</span></code>, the <code class="docutils literal notranslate"><span class="pre">vcvars</span></code> will append to the end of the environment (for “list” environment variables, like <code class="docutils literal notranslate"><span class="pre">PATH</span></code>), instead of pre-pending, so the existing environment takes precedence.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading"></a></h2>
<section id="generator">
<h3>generator<a class="headerlink" href="#generator" title="Link to this heading"></a></h3>
<p>Specifies a custom CMake generator to use, see also <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">cmake-generators documentation</a>.</p>
</section>
<section id="generator-platform">
<h3>generator_platform<a class="headerlink" href="#generator-platform" title="Link to this heading"></a></h3>
<p>Specifies a custom CMake generator platform to use, see also <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_GENERATOR_PLATFORM.html">CMAKE_GENERATOR_PLATFORM documentation</a>.</p>
</section>
<section id="verbose">
<h3>verbose<a class="headerlink" href="#verbose" title="Link to this heading"></a></h3>
<p><strong>Defaulted to</strong>: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Set it to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> to automatically set the definition <code class="docutils literal notranslate"><span class="pre">CMAKE_VERBOSE_MAKEFILE</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="build-folder-read-only">
<h3>build_folder (Read only)<a class="headerlink" href="#build-folder-read-only" title="Link to this heading"></a></h3>
<p>Build folder where the <code class="docutils literal notranslate"><span class="pre">configure()</span></code> and <code class="docutils literal notranslate"><span class="pre">build()</span></code> methods will be called.</p>
</section>
<section id="build-type-deprecated">
<h3>build_type [Deprecated]<a class="headerlink" href="#build-type-deprecated" title="Link to this heading"></a></h3>
<p>Build type can be forced with this variable instead of taking it from the settings.</p>
</section>
<section id="flags-read-only">
<h3>flags (Read only)<a class="headerlink" href="#flags-read-only" title="Link to this heading"></a></h3>
<p>Flag conversion of <code class="docutils literal notranslate"><span class="pre">definitions</span></code> to be used in the command line invocation (<code class="docutils literal notranslate"><span class="pre">-D</span></code>).</p>
</section>
<section id="is-multi-configuration-read-only">
<h3>is_multi_configuration (Read only)<a class="headerlink" href="#is-multi-configuration-read-only" title="Link to this heading"></a></h3>
<p>Indicates whether the generator selected allows builds with multi configuration: Release, Debug…
Multi configuration generators are Visual Studio and Xcode ones.</p>
</section>
<section id="command-line-read-only">
<h3>command_line (Read only)<a class="headerlink" href="#command-line-read-only" title="Link to this heading"></a></h3>
<p>Arguments and flags calculated by the build helper that will be applied. It indicates the generator, the Conan definitions and the flags
converted from the specified Conan settings. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span>...<span class="w"> </span>-DCONAN_C_FLAGS<span class="o">=</span>-m64<span class="w"> </span>-Wno-dev
</pre></div>
</div>
</section>
<section id="build-config-read-only">
<h3>build_config (Read only)<a class="headerlink" href="#build-config-read-only" title="Link to this heading"></a></h3>
<p>Value for <strong class="command">--config</strong> option for Multi-configuration IDEs. This flag will only be set if the generator <code class="docutils literal notranslate"><span class="pre">is_multi_configuration</span></code>
and <code class="docutils literal notranslate"><span class="pre">build_type</span></code> was not forced in constructor class.</p>
<p>An example of the value of this property could be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--config<span class="w"> </span>Release
</pre></div>
</div>
</section>
<section id="parallel">
<h3>parallel<a class="headerlink" href="#parallel" title="Link to this heading"></a></h3>
<p><strong>Defaulted to</strong>: <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
<p>Run CMake process in parallel for compilation, installation and testing. This is translated into the proper command line argument:
For <code class="docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code> it is <code class="docutils literal notranslate"><span class="pre">-jX</span></code> and for <code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span></code> it is <code class="docutils literal notranslate"><span class="pre">/m:X</span></code>.</p>
<p>However, the parallel executing can be changed for testing like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
<span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>  <span class="c1"># &#39;parallel&#39; is enabled by default</span>
<span class="n">cmake</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">cmake</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
<p>In the case of <code class="docutils literal notranslate"><span class="pre">cmake.test()</span></code> this flag sets the <code class="docutils literal notranslate"><span class="pre">CTEST_PARALLEL_LEVEL</span></code> variable to the according value in <a class="reference internal" href="../tools.html#tools-cpu-count"><span class="std std-ref">tools.cpu_count()</span></a>.</p>
</section>
<section id="definitions">
<h3>definitions<a class="headerlink" href="#definitions" title="Link to this heading"></a></h3>
<p>The CMake helper will automatically append some definitions based on your settings:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ANDROID_ABI</p></td>
<td><p>Just alias for CMAKE_ANDROID_ARCH_ABI</p></td>
</tr>
<tr class="row-odd"><td><p>ANDROID_NDK</p></td>
<td><p>Defined when one of ANDROID_NDK_ROOT or ANDROID_NDK_HOME environment variables presented</p></td>
</tr>
<tr class="row-even"><td><p>BUILD_SHARED_LIBS</p></td>
<td><p>Only if your recipe has a <code class="docutils literal notranslate"><span class="pre">shared</span></code> option</p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_ANDROID_ARCH_ABI</p></td>
<td><p>Set to a suitable value if cross-building to an Android is detected</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_BUILD_TYPE</p></td>
<td><p>Debug, Release… from <code class="docutils literal notranslate"><span class="pre">self.settings.build_type</span></code> or <code class="docutils literal notranslate"><span class="pre">build_type</span></code> attribute <strong>only</strong> if <code class="docutils literal notranslate"><span class="pre">is_multi_configuration</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_EXPORT_NO_PACKAGE_REGISTRY</p></td>
<td><p>Defined by default to disable the package registry</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_MODULE_PATH</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">conanfile.install_folder</span></code> when using <code class="docutils literal notranslate"><span class="pre">cmake_find_package</span></code> or <code class="docutils literal notranslate"><span class="pre">cmake_find_package_multi</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_OSX_ARCHITECTURES</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">i386</span></code> if architecture is x86 in an OSX system</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_PREFIX_PATH</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">conanfile.install_folder</span></code> when using <code class="docutils literal notranslate"><span class="pre">cmake_find_package_multi</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_SYSTEM_NAME</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">self.settings.os</span></code> value if cross-building is detected</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_SYSTEM_VERSION</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">self.settings.os_version</span></code> value if cross-building is detected</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_CMAKE_CXX_EXTENSIONS</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">ON</span></code> or <code class="docutils literal notranslate"><span class="pre">OFF</span></code> value when GNU extensions for the given C++ standard are enabled</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_CMAKE_CXX_STANDARD</p></td>
<td><p>Set to the <code class="docutils literal notranslate"><span class="pre">self.settings.compiler.cppstd</span></code> value (or <code class="docutils literal notranslate"><span class="pre">self.settings.cppstd</span></code> for backward compatibility)</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_CMAKE_FIND_ROOT_PATH</p></td>
<td><p>Definition set only if same environment variable is declared by user</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_CMAKE_FIND_ROOT_PATH_MODE_INCLUDE</p></td>
<td><p>Definition set only if same environment variable is declared by user</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_CMAKE_FIND_ROOT_PATH_MODE_LIBRARY</p></td>
<td><p>Definition set only if same environment variable is declared by user</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_CMAKE_FIND_ROOT_PATH_MODE_PROGRAM</p></td>
<td><p>Definition set only if same environment variable is declared by user</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_CMAKE_POSITION_INDEPENDENT_CODE</p></td>
<td><p>Set when <code class="docutils literal notranslate"><span class="pre">fPIC</span></code> option exists and <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">fPIC</span></code> exists and <code class="docutils literal notranslate"><span class="pre">False</span></code> but <code class="docutils literal notranslate"><span class="pre">shared</span></code> option exists and <code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-even"><td><p>CONAN_CMAKE_SYSTEM_PROCESSOR</p></td>
<td><p>Definition set only if same environment variable is declared by user</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_COMPILER</p></td>
<td><p>Conan internal variable to check the compiler</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_CXX_FLAGS</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">-m32</span></code> or <code class="docutils literal notranslate"><span class="pre">-m64</span></code> values based on the architecture and <code class="docutils literal notranslate"><span class="pre">/MP</span></code> for MSVS</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_C_FLAGS</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">-m32</span></code> or <code class="docutils literal notranslate"><span class="pre">-m64</span></code> values based on the architecture and <code class="docutils literal notranslate"><span class="pre">/MP</span></code> for MSVS</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_EXPORTED</p></td>
<td><p>Defined when CMake is called using Conan CMake helper</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_IN_LOCAL_CACHE</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> if the build runs in local cache, <code class="docutils literal notranslate"><span class="pre">OFF</span></code> if running in a user folder</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_LIBCXX</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">self.settings.compiler.libcxx</span></code> value</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_LINK_RUNTIME</p></td>
<td><p>Set to the runtime value from <code class="docutils literal notranslate"><span class="pre">self.settings.compiler.runtime</span></code> for MSVS</p></td>
</tr>
<tr class="row-even"><td><p>CONAN_SHARED_LINKER_FLAGS</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">-m32</span></code> or <code class="docutils literal notranslate"><span class="pre">-m64</span></code> values based on the architecture</p></td>
</tr>
<tr class="row-odd"><td><p>CONAN_STD_CXX_FLAG</p></td>
<td><p>Set to the flag corresponding to the C++ standard defined in <code class="docutils literal notranslate"><span class="pre">self.settings.compiler.cppstd</span></code>. Used for CMake &lt; 3.1)</p></td>
</tr>
</tbody>
</table>
<p>There are some definitions set to be used later on the the <code class="docutils literal notranslate"><span class="pre">install()</span></code> step too:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CMAKE_INSTALL_BINDIR</p></td>
<td><p>Set to <em>bin</em> inside the package folder.</p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_INSTALL_DATAROOTDIR</p></td>
<td><p>Set to <em>share</em> inside the package folder.</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_INSTALL_INCLUDEDIR</p></td>
<td><p>Set to <em>include</em> inside the package folder.</p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_INSTALL_LIBDIR</p></td>
<td><p>Set to <em>lib</em> inside the package folder.</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_INSTALL_LIBEXECDIR</p></td>
<td><p>Set to <em>bin</em> inside the package folder.</p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_INSTALL_OLDINCLUDEDIR</p></td>
<td><p>Set to <em>include</em> inside the package folder.</p></td>
</tr>
<tr class="row-even"><td><p>CMAKE_INSTALL_PREFIX</p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">conanfile.package_folder</span></code> value.</p></td>
</tr>
<tr class="row-odd"><td><p>CMAKE_INSTALL_SBINDIR</p></td>
<td><p>Set to <em>bin</em> inside the package folder.</p></td>
</tr>
</tbody>
</table>
<p>But you can change the automatic definitions after the <code class="docutils literal notranslate"><span class="pre">CMake()</span></code> object creation using the <code class="docutils literal notranslate"><span class="pre">definitions</span></code> property or even add your own
ones:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">definitions</span><span class="p">[</span><span class="s2">&quot;CMAKE_SYSTEM_NAME&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Generic&quot;</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">definitions</span><span class="p">[</span><span class="s2">&quot;MY_CUSTOM_DEFINITION&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>  <span class="c1"># Build --target=install</span>
</pre></div>
</div>
<p>Note that definitions changed <strong>after</strong> the <code class="docutils literal notranslate"><span class="pre">configure()</span></code> call will <strong>not</strong> take effect later on the <code class="docutils literal notranslate"><span class="pre">build()</span></code>, <code class="docutils literal notranslate"><span class="pre">test()</span></code> or
<code class="docutils literal notranslate"><span class="pre">install()</span></code> ones.</p>
</section>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Link to this heading"></a></h2>
<section id="configure">
<h3>configure()<a class="headerlink" href="#configure" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">defs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">source_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_build_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="n">pkg_config_paths</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Configures <cite>CMake</cite> project with the given parameters.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>args</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): A list of additional arguments to be passed to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command. Each argument will be escaped according to the current shell. No extra arguments will be added if <code class="docutils literal notranslate"><span class="pre">args=None</span></code></p></li>
<li><p><strong>defs</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): A dict that will be converted to a list of CMake command line variable definitions of the form <code class="docutils literal notranslate"><span class="pre">-DKEY=VALUE</span></code>. Each value will be escaped according to the current shell and can be either <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code> or of numeric type</p></li>
<li><p><strong>source_dir</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): <strong>[DEPRECATED]</strong> Use <code class="docutils literal notranslate"><span class="pre">source_folder</span></code> instead. CMake’s source directory where
<em>CMakeLists.txt</em> is located. The default value is the <code class="docutils literal notranslate"><span class="pre">build</span></code> folder if <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified (or the <code class="docutils literal notranslate"><span class="pre">source</span></code> folder if
<code class="docutils literal notranslate"><span class="pre">no_copy_source</span></code> is specified). Relative paths are allowed and will be relative to <code class="docutils literal notranslate"><span class="pre">build_folder</span></code>.</p></li>
<li><p><strong>build_dir</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): <strong>[DEPRECATED]</strong> Use <code class="docutils literal notranslate"><span class="pre">build_folder</span></code> instead. CMake’s output directory. The
default value is the package <code class="docutils literal notranslate"><span class="pre">build</span></code> root folder if <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified. The <code class="docutils literal notranslate"><span class="pre">CMake</span></code> object will store <code class="docutils literal notranslate"><span class="pre">build_folder</span></code>
internally for subsequent calls to <code class="docutils literal notranslate"><span class="pre">build()</span></code>.</p></li>
<li><p><strong>source_folder</strong>: CMake’s source directory where <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> is located. The default value is the <code class="docutils literal notranslate"><span class="pre">self.source_folder</span></code>.
Relative paths are allowed and will be relative to <code class="docutils literal notranslate"><span class="pre">self.source_folder</span></code>.</p></li>
<li><p><strong>build_folder</strong>: CMake’s output directory. The default value is the <code class="docutils literal notranslate"><span class="pre">self.build_folder</span></code> if <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified.
The <code class="docutils literal notranslate"><span class="pre">CMake</span></code> object will store <code class="docutils literal notranslate"><span class="pre">build_folder</span></code> internally for subsequent calls to <code class="docutils literal notranslate"><span class="pre">build()</span></code>.</p></li>
<li><p><strong>cache_build_folder</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Use the given subfolder as build folder when building the package in the local cache.
This argument doesn’t have effect when the package is being built in user folder with <strong class="command">conan build</strong> but overrides <strong>build_folder</strong> when working in the local cache.
See <a class="reference internal" href="../conanfile/attributes.html#in-local-cache"><span class="std std-ref">self.in_local_cache</span></a>.</p></li>
<li><p><strong>pkg_config_paths</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Specify folders (in a list) of relative paths to the install folder or
absolute ones where to find <code class="docutils literal notranslate"><span class="pre">*.pc</span></code> files (by using the env var <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code>). If <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified but the conanfile
is using the <code class="docutils literal notranslate"><span class="pre">pkg_config</span></code> generator, the <code class="docutils literal notranslate"><span class="pre">self.install_folder</span></code> will be added to the <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code> in order to locate the
pc files of the requirements of the conanfile.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="build">
<h3>build()<a class="headerlink" href="#build" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Builds <cite>CMake</cite> project with the given parameters.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>args</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): A list of additional arguments to be passed to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command. Each argument will be escaped according to the current shell. No extra arguments will be added if <code class="docutils literal notranslate"><span class="pre">args=None</span></code></p></li>
<li><p><strong>build_dir</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): CMake’s output directory. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified the <code class="docutils literal notranslate"><span class="pre">build_dir</span></code> from <code class="docutils literal notranslate"><span class="pre">configure()</span></code> will be used.</p></li>
<li><p><strong>target</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): Specifies the target to execute. The default <em>all</em> target will be built if <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified. <code class="docutils literal notranslate"><span class="pre">&quot;install&quot;</span></code> can be used to relocate files to aid packaging.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="test">
<h3>test()<a class="headerlink" href="#test" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_on_failure</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Build <cite>CMake</cite> test target (could be RUN_TESTS in multi-config projects or <code class="docutils literal notranslate"><span class="pre">test</span></code> in single-config projects), which usually means building and running unit tests</p>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>args</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): A list of additional arguments to be passed to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command. Each argument will be escaped according to the current shell. No extra arguments will be added if <code class="docutils literal notranslate"><span class="pre">args=None</span></code>.</p></li>
<li><p><strong>build_dir</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): CMake’s output directory. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified the <code class="docutils literal notranslate"><span class="pre">build_folder</span></code> from <code class="docutils literal notranslate"><span class="pre">configure()</span></code> will be used.</p></li>
<li><p><strong>target</strong> (Optional, default to <code class="docutils literal notranslate"><span class="pre">None</span></code>). Alternative target name for running the tests. If not defined RUN_TESTS or <code class="docutils literal notranslate"><span class="pre">test</span></code> will be used.</p></li>
<li><p><strong>output_on_failure</strong> (Optional, default to <code class="docutils literal notranslate"><span class="pre">False</span></code>). Enables ctest to show output of failed tests by defining <code class="docutils literal notranslate"><span class="pre">CTEST_OUTPUT_ON_FAILURE</span></code> environment variable (same effect as <code class="docutils literal notranslate"><span class="pre">ctest</span> <span class="pre">--output-on-failure</span></code>).</p></li>
</ul>
</dd>
</dl>
</section>
<section id="install">
<h3>install()<a class="headerlink" href="#install" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">install</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Installs <cite>CMake</cite> project with the given parameters.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>args</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): A list of additional arguments to be passed to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command. Each argument will be escaped according to the current shell. No extra arguments will be added if <code class="docutils literal notranslate"><span class="pre">args=None</span></code>.</p></li>
<li><p><strong>build_dir</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): CMake’s output directory. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified the <code class="docutils literal notranslate"><span class="pre">build_folder</span></code> from <code class="docutils literal notranslate"><span class="pre">configure()</span></code> will be used.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="patch-config-paths-experimental">
<span id="patch-config-paths"></span><h3>patch_config_paths() [EXPERIMENTAL]<a class="headerlink" href="#patch-config-paths-experimental" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">patch_config_paths</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an <strong>experimental</strong> feature subject to breaking changes in future releases.</p>
</div>
<p>This method changes references to the absolute path of the installed package in exported CMake config files to the appropriate Conan
variable. Method also changes references to other packages installation paths in export CMake config files to Conan variable
with their installation roots.
This makes most CMake config files portable.</p>
<p>For example, if a package foo installs a file called <em>fooConfig.cmake</em> to be used by cmake’s <code class="docutils literal notranslate"><span class="pre">find_package()</span></code> method, normally this file
will contain absolute paths to the installed package folder, for example it will contain a line such as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET(Foo_INSTALL_DIR /home/developer/.conan/data/foo/1.0.0/...)
</pre></div>
</div>
<p>This will cause cmake’s <code class="docutils literal notranslate"><span class="pre">find_package()</span></code> method to fail when someone else installs the package via Conan. This function will replace such
paths to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET(Foo_INSTALL_DIR ${CONAN_FOO_ROOT})
</pre></div>
</div>
<p>Which is a variable that is set by <em>conanbuildinfo.cmake</em>, so that <code class="docutils literal notranslate"><span class="pre">find_package()</span></code> now correctly works on this Conan package.</p>
<p>For dependent packages method replaces lines with references to dependencies installation paths such as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET_TARGET_PROPERTIES(foo PROPERTIES INTERFACE_INCLUDE_DIRECTORIES &quot;/home/developer/.conan/data/bar/1.0.0/user/channel/id/include&quot;)
</pre></div>
</div>
<p>to following lines:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>SET_TARGET_PROPERTIES(foo PROPERTIES INTERFACE_INCLUDE_DIRECTORIES &quot;${CONAN_BAR_ROOT}/include&quot;)
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">install()</span></code> method of the CMake object in the conanfile is used, this function should be called <strong>after</strong> that invocation. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">patch_config_paths</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="get-version">
<h3>get_version()<a class="headerlink" href="#get-version" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_version</span><span class="p">()</span>
</pre></div>
</div>
<p>Returns the CMake version in a <code class="docutils literal notranslate"><span class="pre">conans.model.Version</span></code> object as it is evaluated by the
command line. Will raise if cannot resolve it to valid version.</p>
</section>
</section>
<section id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Link to this heading"></a></h2>
<p>There are some environment variables that will also affect the <code class="docutils literal notranslate"><span class="pre">CMake()</span></code> helper class. Check them in the
<a class="reference internal" href="../env_vars.html#cmake-related-variables"><span class="std std-ref">CMAKE RELATED VARIABLES</span></a> section.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>The following example of <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> shows you how to manage a project with conan and CMake.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SomePackage</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;SomePackage&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;cmake&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">configure_cmake</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># put definitions here so that they are re-used in cmake between</span>
    <span class="c1"># build() and package()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">definitions</span><span class="p">[</span><span class="s2">&quot;SOME_DEFINITION_NAME&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;On&quot;</span>

    <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cmake</span>

<span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cmake</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configure_cmake</span><span class="p">()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

    <span class="c1"># run unit tests after the build</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>

    <span class="c1"># run custom make command</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;make -j3 check)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cmake</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configure_cmake</span><span class="p">()</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="default-used-generators">
<h2>Default used generators<a class="headerlink" href="#default-used-generators" title="Link to this heading"></a></h2>
<p>When a compiler or its version is not detected, the CMake helper uses a default generator based on the platform operating system.
For Unix systems it generates <code class="docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code>. For Windows there is no default generator, it will be detected by CMake automatically.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../build_helpers.html" class="btn btn-neutral float-left" title="Build helpers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="autotools.html" class="btn btn-neutral float-right" title="AutoToolsBuildEnvironment (configure/make)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2019, JFrog.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.27
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.27/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>