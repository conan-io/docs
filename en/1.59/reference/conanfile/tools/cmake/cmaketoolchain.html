<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMakeToolchain &mdash; conan 1.59.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/reference/conanfile/tools/cmake/cmaketoolchain.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=1fa155a2"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="CMake" href="cmake.html" />
    <link rel="prev" title="CMakeDeps" href="cmakedeps.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.59
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../conanfile.html">conanfile.py</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../methods.html">Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../tools.html">tools</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../cmake.html">conan.tools.cmake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gnu.html">conan.tools.gnu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google.html">conan.tools.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apple.html">conan.tools.apple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meson.html">conan.tools.meson</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel.html">conan.tools.intel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../env.html">conan.tools.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../system.html">conan.tools.system</a></li>
<li class="toctree-l4"><a class="reference internal" href="../files.html">conan.tools.files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../layout.html">conan.tools.layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scm.html">conan.tools.scm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build.html">conan.tools.build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../android.html">conan.tools.android</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dependencies.html">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html#output-and-running">Output and Running</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../generators.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../build_helpers.html">Build helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../env_vars.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hooks.html">Hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  📖 The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../../../conanfile.html">conanfile.py</a></li>
          <li class="breadcrumb-item"><a href="../../tools.html">tools</a></li>
          <li class="breadcrumb-item"><a href="../cmake.html">conan.tools.cmake</a></li>
      <li class="breadcrumb-item active">CMakeToolchain</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/reference/conanfile/tools/cmake/cmaketoolchain.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cmaketoolchain">
<span id="conan-cmake-toolchain"></span><h1>CMakeToolchain<a class="headerlink" href="#cmaketoolchain" title="Link to this heading"></a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Some of the features used in this section are still <strong>under development</strong>, while they are
recommended and usable and we will try not to break them in future releases, some breaking
changes might still happen if necessary to prepare for the <em>Conan 2.0 release</em>.</p>
</div>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.32.0">1.32.0</a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> is the toolchain generator for CMake. It will generate toolchain files that can be used in the
command line invocation of CMake with the <code class="docutils literal notranslate"><span class="pre">-DCMAKE_TOOLCHAIN_FILE=&lt;path&gt;/conan_toolchain.cmake</span></code>. This generator translates
the current package configuration, settings, and options, into CMake toolchain syntax.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This class will require very soon to define both the “host” and “build” profiles. It is very recommended to
start defining both profiles immediately to avoid future breaking. Furthermore, some features, like trying to
cross-compile might not work at all if the “build” profile is not provided.</p>
</div>
<p>It can be declared as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeToolchain&quot;</span>
</pre></div>
</div>
<p>Or fully instantiated in the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;hello/0.1&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeDeps&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]}</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;MYVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MYVAR_VALUE&quot;</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="p">[</span><span class="s2">&quot;MYDEFINE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MYDEF_VALUE&quot;</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>This will generate the following files after a call to <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> (or when building the package
in the cache) with the information provided in the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method as well as information
translated from the current <code class="docutils literal notranslate"><span class="pre">settings</span></code>:</p>
<ul>
<li><p><em>conan_toolchain.cmake</em> file, containing the translation of Conan settings to CMake variables.
Some things that will be defined in this file:</p>
<ul class="simple">
<li><p>Definition of the CMake generator platform and generator toolset</p></li>
<li><p>Definition of the <code class="docutils literal notranslate"><span class="pre">CMAKE_POSITION_INDEPENDENT_CODE</span></code>, based on <code class="docutils literal notranslate"><span class="pre">fPIC</span></code> option.</p></li>
<li><p>Definition of the C++ standard as necessary</p></li>
<li><p>Definition of the standard library used for C++</p></li>
<li><p>Deactivation of rpaths in OSX</p></li>
<li><p>Since Conan 1.55, set of the <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code> environment variable
to where the Conan generators are located. If user has already defined <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_PATH</span></code>, that Conan folder
will automatically be prepended.</p></li>
</ul>
</li>
<li><p><em>conanvcvars.bat</em>: In some cases, the Visual Studio environment needs to be defined correctly for building,
like when using the Ninja or NMake generators. If necessary, the <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> will generate this script,
so defining the correct Visual Studio prompt is easier.</p></li>
<li><p><em>CMakePresets.json</em>: The toolchain also generates a <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code> standard file, check the documentation
<a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html">here</a>. It is currently using version “3” of
the JSON schema.
Conan creates a <code class="docutils literal notranslate"><span class="pre">default</span></code> configure preset with the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>The CMake <code class="docutils literal notranslate"><span class="pre">generator</span></code> to be used.</p></li>
<li><p>The path to the generated <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p>Some cache variables corresponding to the specified settings cannot work if specified in the toolchain.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> variable when using single-configuration generators.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code> variable set to <code class="docutils literal notranslate"><span class="pre">OFF</span></code>, when configuration <code class="docutils literal notranslate"><span class="pre">tools.build:skip_test</span></code> is true.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><em>CMakeUserPresets.json</em>:  If you declare a <code class="docutils literal notranslate"><span class="pre">layout()</span></code> in the recipe and your <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file is found in
the <code class="docutils literal notranslate"><span class="pre">conanfile.source_folder</span></code> folder, Conan will place a <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> to include the <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>
generated with the above specification. This will allow your IDE to allow your IDE (Visual Studio, Visual Studio Code, CLion…)
or <code class="docutils literal notranslate"><span class="pre">cmake</span></code> tool to locate the  Conan-generated <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code>. The location of the generated <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code>
can be further tweaked by the <code class="docutils literal notranslate"><span class="pre">user_presets_path</span></code> attribute, as documented below.</p>
<p>Note: Conan will skip the generation of the <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> if it already exists and was not
generated by Conan.</p>
</li>
</ul>
<p>By default, the version schema of the generated <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> is 4 and the schema for the <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code> is 3,
so they require CMake &gt;= 3.23.
You can control the version of the generated <code class="docutils literal notranslate"><span class="pre">CMakePresets.json</span></code> and <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> with a configuration
<code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain.presets:max_schema_version</span></code>.</p>
<p>It can be set in the <a class="reference internal" href="../../../config_files/global_conf.html#global-conf"><span class="std std-ref">global.conf</span></a> or with <cite>-c</cite> in the <strong class="command">conan install</strong> command.
The minimum accepted value for this conf is <code class="docutils literal notranslate"><span class="pre">2</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-c<span class="w"> </span>tools.cmake.cmaketoolchain.presets:max_schema_version<span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
<section id="constructor">
<h2>constructor<a class="headerlink" href="#constructor" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conanfile</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conanfile</span></code>: the current recipe object. Always use <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generator</span></code>: CMake generator to be used by cmake CLI (e.g. “Ninja”). By default it will use <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:generator</span></code> conf.</p></li>
</ul>
</section>
<section id="preprocessor-definitions">
<h2>preprocessor_definitions<a class="headerlink" href="#preprocessor-definitions" title="Link to this heading"></a></h2>
<p>This attribute allows defining compiler preprocessor definitions, for multiple configurations (Debug, Release, etc).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="p">[</span><span class="s2">&quot;MYDEF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="o">.</span><span class="n">debug</span><span class="p">[</span><span class="s2">&quot;MYCONFIGDEF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyDebugValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="o">.</span><span class="n">release</span><span class="p">[</span><span class="s2">&quot;MYCONFIGDEF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyReleaseValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>This will be translated to:</p>
<ul class="simple">
<li><p>One <code class="docutils literal notranslate"><span class="pre">add_definitions()</span></code> definition for <code class="docutils literal notranslate"><span class="pre">MYDEF</span></code> in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p>One <code class="docutils literal notranslate"><span class="pre">add_definitions()</span></code> definition, using a cmake generator expression in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file,
using the different values for different configurations.</p></li>
</ul>
</section>
<section id="cache-variables">
<span id="conan-cmake-toolchain-cache-variables"></span><h2>cache_variables<a class="headerlink" href="#cache-variables" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.50.0">1.50.0</a></p>
<p>This attribute allows defining CMake cache-variables. These variables, unlike the
<code class="docutils literal notranslate"><span class="pre">variables</span></code>, are single-config. They will be stored in the <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-presets.7.html#format">CMakePresets.json</a> file (at the
<cite>cacheVariables</cite> in the <cite>configurePreset</cite>) and will be applied with <code class="docutils literal notranslate"><span class="pre">-D</span></code> arguments when
calling <code class="docutils literal notranslate"><span class="pre">cmake.configure</span></code> using the <a class="reference internal" href="cmake.html#conan-cmake-build-helper"><span class="std std-ref">CMake() build
helper</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">cache_variables</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">cache_variables</span><span class="p">[</span><span class="s2">&quot;foo2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">cache_variables</span><span class="p">[</span><span class="s2">&quot;var&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;23&quot;</span>
</pre></div>
</div>
<p>The booleans assigned to a cache_variable will be translated to <code class="docutils literal notranslate"><span class="pre">ON</span></code> and <code class="docutils literal notranslate"><span class="pre">OFF</span></code> symbols in CMake.</p>
</section>
<section id="variables">
<h2>variables<a class="headerlink" href="#variables" title="Link to this heading"></a></h2>
<p>This attribute allows defining CMake variables, for multiple configurations (Debug,
Release, etc). This variables should be use to define things related with the toolchain
and for the majority of cases
<a class="reference internal" href="#conan-cmake-toolchain-cache-variables"><span class="std std-ref">cache_variables</span></a> is what you probably want to
use. Also, take into account that as these variables are defined inside the
<em>conan_toolchain.cmake</em> file, and the toolchain is loaded several times by CMake the
definition of these variables will be done at those points as well.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;MYVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">debug</span><span class="p">[</span><span class="s2">&quot;MYCONFIGVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyDebugValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">release</span><span class="p">[</span><span class="s2">&quot;MYCONFIGVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyReleaseValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>This will be translated to:</p>
<ul class="simple">
<li><p>One <code class="docutils literal notranslate"><span class="pre">set()</span></code> definition for <code class="docutils literal notranslate"><span class="pre">MYVAR</span></code> in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p>One <code class="docutils literal notranslate"><span class="pre">set()</span></code> definition, using a cmake generator expression in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file,
using the different values for different configurations.</p></li>
</ul>
<p>The booleans assigned to a variable will be translated to <code class="docutils literal notranslate"><span class="pre">ON</span></code> and <code class="docutils literal notranslate"><span class="pre">OFF</span></code> symbols in CMake:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;FOO&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;VAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>Will generate the sentences: <code class="docutils literal notranslate"><span class="pre">set(FOO</span> <span class="pre">ON</span> <span class="pre">...)</span></code> and <code class="docutils literal notranslate"><span class="pre">set(VAR</span> <span class="pre">OFF</span> <span class="pre">...)</span></code>.</p>
</section>
<section id="user-presets-path">
<h2>user_presets_path<a class="headerlink" href="#user-presets-path" title="Link to this heading"></a></h2>
<p>This attribute allows specifying the location of the generated <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> file.
Accepted values:</p>
<ul class="simple">
<li><p>An absolute path</p></li>
<li><p>A path relative to <code class="docutils literal notranslate"><span class="pre">self.source_folder</span></code></p></li>
<li><p>The boolean value <code class="docutils literal notranslate"><span class="pre">False</span></code>, to suppress the generation of the file altogether.</p></li>
</ul>
<p>For example, we can prevent the generator from creating <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> in the
following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">user_presets_path</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="generators">
<h2>Generators<a class="headerlink" href="#generators" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> is intended to run with the <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> dependencies generator. Please do not use other
CMake legacy generators (like <code class="docutils literal notranslate"><span class="pre">cmake</span></code>, or <code class="docutils literal notranslate"><span class="pre">cmake_paths</span></code>) with it.</p>
</section>
<section id="using-a-custom-toolchain-file">
<h2>Using a custom toolchain file<a class="headerlink" href="#using-a-custom-toolchain-file" title="Link to this heading"></a></h2>
<p>There are two ways of providing custom CMake toolchain files:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file can be completely skipped and replaced by a user one, defining the
<code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:toolchain_file=&lt;filepath&gt;</span></code> configuration value.</p></li>
<li><p>A custom user toolchain file can be added (included from) to the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> one, by using the
<code class="docutils literal notranslate"><span class="pre">user_toolchain</span></code> block described below, and defining the <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:user_toolchain=[&quot;&lt;filepath&gt;&quot;]</span></code>
configuration value.</p>
<p>The configuration <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:user_toolchain=[&quot;&lt;filepath&gt;&quot;]</span></code> can be defined in the <a class="reference internal" href="../../../config_files/global_conf.html#global-conf"><span class="std std-ref">global.conf</span></a>
but also creating a Conan package for your toolchain and using <code class="docutils literal notranslate"><span class="pre">self.conf_info</span></code> to declare the toolchain file:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyToolchainPackage</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">package_folder</span><span class="p">,</span> <span class="s2">&quot;mytoolchain.cmake&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conf_info</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="s2">&quot;tools.cmake.cmaketoolchain:user_toolchain&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">f</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
<p>If you declare the previous package as a <code class="docutils literal notranslate"><span class="pre">tool_require</span></code>, the toolchain will be automatically applied.</p>
</li>
<li><p>If you have more than one <code class="docutils literal notranslate"><span class="pre">tool_requires</span></code> defined, you can easily append all the user toolchain values
together using the <code class="docutils literal notranslate"><span class="pre">append</span></code> method in each of them, for instance:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyToolRequire</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">package_folder</span><span class="p">,</span> <span class="s2">&quot;mytoolchain.cmake&quot;</span><span class="p">)</span>
        <span class="c1"># Appending the value to any existing one</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conf_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;tools.cmake.cmaketoolchain:user_toolchain&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>So, they’ll be automatically applied by your <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> generator without writing any extra code:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMake</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">exports_sources</span> <span class="o">=</span> <span class="s2">&quot;CMakeLists.txt&quot;</span>
    <span class="n">tool_requires</span> <span class="o">=</span> <span class="s2">&quot;toolchain1/0.1&quot;</span><span class="p">,</span> <span class="s2">&quot;toolchain2/0.1&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeToolchain&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="using-the-toolchain-in-developer-flow">
<h2>Using the toolchain in developer flow<a class="headerlink" href="#using-the-toolchain-in-developer-flow" title="Link to this heading"></a></h2>
<p>One of the advantages of using Conan toolchains is that they can help to achieve the exact same build
with local development flows, than when the package is created in the cache.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install both debug and release deps and create the toolchain</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
</pre></div>
</div>
<p>If you are using a multi-configuration generator (e.g. Windows MSVC):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># Need to pass the generator WITHOUT the platform, that matches your default settings</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>generators/conan_toolchain.cmake
<span class="c1"># Now you can open the IDE, select Debug or Release config and build</span>
<span class="c1"># or, in the command line</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Debug
</pre></div>
</div>
<p><strong>NOTE</strong>: The platform (Win64), is already encoded in the toolchain. The command line shouldn’t pass it, so using
<code class="docutils literal notranslate"><span class="pre">-G</span> <span class="pre">&quot;Visual</span> <span class="pre">Studio</span> <span class="pre">15&quot;</span></code> instead of the <code class="docutils literal notranslate"><span class="pre">-G</span> <span class="pre">&quot;Visual</span> <span class="pre">Studio</span> <span class="pre">15</span> <span class="pre">Win64&quot;</span></code></p>
<p>If you are using a single-configuration generator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build/Release
$<span class="w"> </span>cmake<span class="w"> </span>../..<span class="w">  </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>generators/conan_toolchain.cmake<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.
</pre></div>
</div>
<p>It is recommended to use the <code class="docutils literal notranslate"><span class="pre">cmake_layout(self)</span></code> in the <code class="docutils literal notranslate"><span class="pre">layout()</span></code> method of your <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code>. If a layout
is declared, the <code class="docutils literal notranslate"><span class="pre">CMakeUserPresets.json</span></code> file will be generated in the same folder of your <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file,
so you can use the <code class="docutils literal notranslate"><span class="pre">--preset</span></code> argument for configuring, building, and testing from <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">&gt;=</span> <span class="pre">3.23</span></code> or use an IDE:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The conan_toolchain.cmake is common for both configurations and will be located at &quot;build/generators&quot;</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug

<span class="c1"># For single-configuration generator</span>
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>debug
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>debug
$<span class="w"> </span>ctest<span class="w"> </span>--preset<span class="w"> </span>debug

$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>release
$<span class="w"> </span>ctest<span class="w"> </span>--preset<span class="w"> </span>release

<span class="c1"># For multi-configuration generator</span>
$<span class="w"> </span>cmake<span class="w"> </span>--preset<span class="w"> </span>default

$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>debug
$<span class="w"> </span>ctest<span class="w"> </span>--preset<span class="w"> </span>debug

$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>--preset<span class="w"> </span>release
$<span class="w"> </span>ctest<span class="w"> </span>--preset<span class="w"> </span>release
</pre></div>
</div>
</section>
<section id="conf">
<h2>conf<a class="headerlink" href="#conf" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> is affected by these <a class="reference internal" href="../../../config_files/global_conf.html#global-conf"><span class="std std-ref">[conf]</span></a> variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:generator</span></code> CMake generator to be used by cmake CLI. See all the CMake generators <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html#cmake-generators">here</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:toolchain_file</span></code> user toolchain file to replace the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> one.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:user_toolchain</span></code> list of user toolchains to be included from the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.android:ndk_path</span></code> value for <code class="docutils literal notranslate"><span class="pre">ANDROID_NDK_PATH</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_name</span></code> is not necessary in most cases and is only used to force-define <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_version</span></code> is not necessary in most cases and is only used to force-define <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_VERSION</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_processor</span></code> is not necessary in most cases and is only used to force-define <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_PROCESSOR</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:toolset_arch</span></code>: Will add the <code class="docutils literal notranslate"><span class="pre">,host=xxx</span></code> specifier in the <code class="docutils literal notranslate"><span class="pre">CMAKE_GENERATOR_TOOLSET</span></code> variable of <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmake_layout:build_folder_vars</span></code>: Settings and Options that will produce a different build folder and different CMake presets names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain.presets:max_schema_version</span></code>: Generate CMakeUserPreset.json compatible with the supplied schema version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:cxxflags</span></code> list of extra C++ flags that will be appended to <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS_INIT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:cflags</span></code> list of extra of pure C flags that will be appended to <code class="docutils literal notranslate"><span class="pre">CMAKE_C_FLAGS_INIT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:sharedlinkflags</span></code> list of extra linker flags that will be appended to <code class="docutils literal notranslate"><span class="pre">CMAKE_SHARED_LINKER_FLAGS_INIT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:exelinkflags</span></code> list of extra linker flags that will be appended to <code class="docutils literal notranslate"><span class="pre">CMAKE_EXE_LINKER_FLAGS_INIT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:defines</span></code> list of preprocessor definitions that will be used by <code class="docutils literal notranslate"><span class="pre">add_definitions()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:linker_scripts</span></code> list of linker scripts, each of which will be prepended with <code class="docutils literal notranslate"><span class="pre">-T</span></code> and appended to
<code class="docutils literal notranslate"><span class="pre">CMAKE_EXE_LINKER_FLAGS_INIT</span></code>. Only use this flag with linkers that supports specifying linker scripts with the <code class="docutils literal notranslate"><span class="pre">-T</span></code> flag, such as
<code class="docutils literal notranslate"><span class="pre">ld</span></code>, <code class="docutils literal notranslate"><span class="pre">gold</span></code>, and <code class="docutils literal notranslate"><span class="pre">lld</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:tools.apple:enable_bitcode</span></code> boolean value to enable/disable Bitcode Apple Clang flags, e.g., <code class="docutils literal notranslate"><span class="pre">CMAKE_XCODE_ATTRIBUTE_ENABLE_BITCODE</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:tools.apple:enable_arc</span></code> boolean value to enable/disable ARC Apple Clang flags, e.g., <code class="docutils literal notranslate"><span class="pre">CMAKE_XCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:tools.apple:enable_visibility</span></code> boolean value to enable/disable Visibility Apple Clang flags, e.g., <code class="docutils literal notranslate"><span class="pre">CMAKE_XCODE_ATTRIBUTE_GCC_SYMBOLS_PRIVATE_EXTERN</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:sysroot</span></code> defines the value of <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.gnu:pkg_config</span></code> Since Conan 1.55, the path to the <cite>pkg-config</cite> executable to set the CMake variable <code class="docutils literal notranslate"><span class="pre">PKG_CONFIG_EXECUTABLE</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.build:compiler_executables</span></code> (new in version 1.55) dict-like Python object which specifies the compiler as key
and the compiler executable path as value. Those keys will be mapped as follows:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cpp</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RC</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_RC_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">objc</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_OBJC_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">objcpp</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_OBJCXX_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cuda</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_CUDA_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fortran</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_Fortran_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asm</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_ASM_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hip</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_HIP_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ispc</span></code>: will set <code class="docutils literal notranslate"><span class="pre">CMAKE_ISPC_COMPILER</span></code> in <em>conan_toolchain.cmake</em>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="extending-and-customizing-cmaketoolchain">
<h2>Extending and customizing CMakeToolchain<a class="headerlink" href="#extending-and-customizing-cmaketoolchain" title="Link to this heading"></a></h2>
<p>Since Conan 1.36, <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> implements a powerful capability for extending and customizing the resulting toolchain file.</p>
<p>The following predefined blocks are available, and added in this order:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">user_toolchain</span></code>: Allows to include user toolchains from the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.
If the configuration <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:user_toolchain=[&quot;xxxx&quot;,</span> <span class="pre">&quot;yyyy&quot;]</span></code> is defined, its values will be <code class="docutils literal notranslate"><span class="pre">include(xxx)\ninclude(yyyy)</span></code> as the
first lines in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generic_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_VERSION</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_PROCESSOR</span></code>,
<code class="docutils literal notranslate"><span class="pre">CMAKE_GENERATOR_PLATFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_GENERATOR_TOOLSET</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code>,
<code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">android_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">ANDROID_PLATFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">ANDROID_STL</span></code>, <code class="docutils literal notranslate"><span class="pre">ANDROID_ABI</span></code> and includes <code class="docutils literal notranslate"><span class="pre">ANDROID_NDK_PATH/build/cmake/android.toolchain.cmake</span></code>
where <code class="docutils literal notranslate"><span class="pre">ANDROID_NDK_PATH</span></code> comes defined in <code class="docutils literal notranslate"><span class="pre">tools.android:ndk_path</span></code> configuration value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apple_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_OSX_ARCHITECTURES</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_OSX_SYSROOT</span></code> for Apple systems.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fpic</span></code>: Defines the <code class="docutils literal notranslate"><span class="pre">CMAKE_POSITION_INDEPENDENT_CODE</span></code> when there is a <code class="docutils literal notranslate"><span class="pre">options.fPIC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arch_flags</span></code>: Defines C/C++ flags like <code class="docutils literal notranslate"><span class="pre">-m32,</span> <span class="pre">-m64</span></code> when necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linker_scripts</span></code>: Defines the flags for any provided linker scripts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libcxx</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">-stdlib=libc++</span></code> flag when necessary as well as <code class="docutils literal notranslate"><span class="pre">_GLIBCXX_USE_CXX11_ABI</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vs_runtime</span></code>: Defines the <code class="docutils literal notranslate"><span class="pre">CMAKE_MSVC_RUNTIME_LIBRARY</span></code> variable, as a generator expression for multiple configurations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cppstd</span></code>: defines <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_STANDARD</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_EXTENSIONS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel</span></code>: defines <code class="docutils literal notranslate"><span class="pre">/MP</span></code> parallel build flag for Visual.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake_flags_init</span></code>: defines <code class="docutils literal notranslate"><span class="pre">CMAKE_XXX_FLAGS</span></code> variables based on previously defined Conan variables. The blocks above only define <code class="docutils literal notranslate"><span class="pre">CONAN_XXX</span></code> variables, and this block will define CMake ones like <code class="docutils literal notranslate"><span class="pre">set(CMAKE_CXX_FLAGS_INIT</span> <span class="pre">&quot;${CONAN_CXX_FLAGS}&quot;</span> <span class="pre">CACHE</span> <span class="pre">STRING</span> <span class="pre">&quot;&quot;</span> <span class="pre">FORCE)`</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">try_compile</span></code>: Stop processing the toolchain, skipping the blocks below this one, if <code class="docutils literal notranslate"><span class="pre">IN_TRY_COMPILE</span></code> CMake property is defined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_paths</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_PACKAGE_PREFER_CONFIG</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_MODULE_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_PREFIX_PATH</span></code> so the generated files from <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> are found.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpath</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_SKIP_RPATH</span></code>. By default it is disabled, and it is needed to define <code class="docutils literal notranslate"><span class="pre">self.blocks[&quot;rpath&quot;].skip_rpath=True</span></code> if you want to activate <code class="docutils literal notranslate"><span class="pre">CMAKE_SKIP_RPATH</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shared</span></code>: defines <code class="docutils literal notranslate"><span class="pre">BUILD_SHARED_LIBS</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_dirs</span></code>: Define the <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_XXX</span></code> variables.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>CMAKE_INSTALL_PREFIX</strong>: Is set with the <code class="docutils literal notranslate"><span class="pre">package_folder</span></code>, so if a “cmake install” operation is run, the artifacts go
to that location.</p></li>
<li><p><strong>CMAKE_INSTALL_BINDIR</strong>, <strong>CMAKE_INSTALL_SBINDIR</strong> and <strong>CMAKE_INSTALL_LIBEXECDIR</strong>: Set by default to <code class="docutils literal notranslate"><span class="pre">bin</span></code>.</p></li>
<li><p><strong>CMAKE_INSTALL_LIBDIR</strong>: Set by default to <code class="docutils literal notranslate"><span class="pre">lib</span></code>.</p></li>
<li><p><strong>CMAKE_INSTALL_INCLUDEDIR</strong> and <strong>CMAKE_INSTALL_OLDINCLUDEDIR</strong>: Set by default to <code class="docutils literal notranslate"><span class="pre">include</span></code>.</p></li>
<li><p><strong>CMAKE_INSTALL_DATAROOTDIR</strong>: Set by default to <code class="docutils literal notranslate"><span class="pre">res</span></code>.</p></li>
</ul>
<p>If you want to change the default values, adjust the <code class="docutils literal notranslate"><span class="pre">cpp.package</span></code> object at the <code class="docutils literal notranslate"><span class="pre">layout()</span></code> method:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="c1"># For CMAKE_INSTALL_BINDIR, CMAKE_INSTALL_SBINDIR and CMAKE_INSTALL_LIBEXECDIR, takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">bindirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mybin&quot;</span><span class="p">]</span>
    <span class="c1"># For CMAKE_INSTALL_LIBDIR, takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">libdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mylib&quot;</span><span class="p">]</span>
    <span class="c1"># For CMAKE_INSTALL_INCLUDEDIR, CMAKE_INSTALL_OLDINCLUDEDIR, takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">includedirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;myinclude&quot;</span><span class="p">]</span>
    <span class="c1"># For CMAKE_INSTALL_DATAROOTDIR, takes the first value:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp</span><span class="o">.</span><span class="n">package</span><span class="o">.</span><span class="n">resdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;myres&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is <strong>not valid</strong> to change the self.cpp_info  at the <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method.</p>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Conan 1.45 the CMakeToolchain doesn’t append the root package folder of the dependencies (declared in the cpp_info.builddirs)
to the <code class="docutils literal notranslate"><span class="pre">CMAKE_PREFIX_PATH</span></code> variable. That interfered with the <code class="docutils literal notranslate"><span class="pre">find_file</span></code>, <code class="docutils literal notranslate"><span class="pre">find_path</span></code> and <code class="docutils literal notranslate"><span class="pre">find_program</span></code>, making,
for example, impossible to locate only the executables from the build context. In Conan 2.0, the <code class="docutils literal notranslate"><span class="pre">cppinfo.builddirs</span></code>
won’t contain by default the <code class="docutils literal notranslate"><span class="pre">''</span></code> entry (root package).</p>
</div>
<p>Blocks can be customized in different ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove an existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;generic_system&quot;</span><span class="p">)</span>

<span class="c1"># modify the template of an existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">template</span>
    <span class="n">new_tmp</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># replace, fully replace, append...</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">new_tmp</span>

<span class="c1"># modify one or more variables of the context</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="n">conanfile</span><span class="p">)</span>
    <span class="c1"># block.values is the context dictionary</span>
    <span class="n">toolset</span> <span class="o">=</span> <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;toolset&quot;</span><span class="p">]</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;toolset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;other_toolset&quot;</span>

<span class="c1"># modify the whole context values</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="n">conanfile</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;toolset&quot;</span><span class="p">:</span> <span class="s2">&quot;other_toolset&quot;</span><span class="p">}</span>

<span class="c1"># modify the context method of an existing block</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">types</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">generic_block</span> <span class="o">=</span> <span class="n">toolchain</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span>  <span class="c1"># Your own custom logic here</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;toolset&quot;</span><span class="p">:</span> <span class="s2">&quot;other_toolset&quot;</span><span class="p">}</span>
    <span class="n">generic_block</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">generic_block</span><span class="p">)</span>

<span class="c1"># completely replace existing block</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeToolchain</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># this could go to a python_requires</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">MyGenericBlock</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;HelloWorld&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyGenericBlock</span>

<span class="c1"># add a completely new block</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeToolchain</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># this could go to a python_requires</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">MyBlock</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Hello {{myvar}}!!!&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;myvar&quot;</span><span class="p">:</span> <span class="s2">&quot;World&quot;</span><span class="p">}</span>

    <span class="n">tc</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="s2">&quot;mynewblock&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyBlock</span>
</pre></div>
</div>
<p>For more information about these blocks, please have a look at the source code.</p>
</section>
<section id="cross-building">
<h2>Cross building<a class="headerlink" href="#cross-building" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">generic_system</span></code> block contains some basic cross-building capabilities. In the general
case, the user would want to provide their own user toolchain defining all the specifics,
which can be done with the configuration <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:user_toolchain</span></code>. If
this conf value is defined, the <code class="docutils literal notranslate"><span class="pre">generic_system</span></code> block will include the provided file or files, but
no further define any CMake variable for cross-building.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">user_toolchain</span></code> is not defined and Conan detects it is cross-building, because the build
and host profiles contain different OS or architecture, it will try to define the following
variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>: <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_name</span></code> configuration if
defined, otherwise, it will try to autodetect it. This block will consider
cross-building if Android systems (that is managed by other blocks), and not 64bits to
32bits builds in x86_64, sparc and ppc systems.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_VERSION</span></code>: <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_version</span></code> conf if defined, otherwise
<code class="docutils literal notranslate"><span class="pre">os.version</span></code> subsetting (host) when defined</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_PROCESSOR</span></code>: <code class="docutils literal notranslate"><span class="pre">tools.cmake.cmaketoolchain:system_processor</span></code> conf if defined, otherwise
<code class="docutils literal notranslate"><span class="pre">arch</span></code> setting (host) if defined</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cmakedeps.html" class="btn btn-neutral float-left" title="CMakeDeps" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cmake.html" class="btn btn-neutral float-right" title="CMake" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, JFrog.
      <span class="lastupdated">Last updated on Sep 29, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.59
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.59/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>