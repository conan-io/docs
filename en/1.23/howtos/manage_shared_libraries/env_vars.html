



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Manage Shared Libraries with Environment Variables &mdash; conan 1.23.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="conan 1.23.0 documentation" href="../../index.html"/>
        <link rel="up" title="How to manage shared libraries" href="../manage_shared_libraries.html"/>
        <link rel="next" title="Manage RPATHs" href="rpaths.html"/>
        <link rel="prev" title="How to manage shared libraries" href="../manage_shared_libraries.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 



</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://conan.io">
          

          
            
            <img src="../../_static/conan-logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../howtos.html">Howtos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../header_only.html">How to package header-only libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmake_launch.html">How to launch conan install from cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="../visual_studio_packages.html">How to create and reuse packages based on Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../makefiles.html">Creating and reusing packages based on Makefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manage_gcc_abi.html">How to manage the GCC &gt;= 5 ABI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vs2017_cmake.html">Using Visual Studio 2017 - CMake integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intel_compiler.html">Working with Intel compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manage_cpp_standard.html">How to manage C++ standard [EXPERIMENTAL]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../run_conan_in_docker.html">How to use Docker to create and cross-build C and C++ Conan packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_code_reuse.html">How to reuse Python code in recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_generators.html">How to create and share a custom generator with generator packages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../manage_shared_libraries.html">How to manage shared libraries</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Manage Shared Libraries with Environment Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-tool-from-a-different-package">Using the tool from a different package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-an-application-using-the-shared-library-from-toola">Building an application using the shared library from <code class="docutils literal notranslate"><span class="pre">toolA</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-shared-libraries-from-dependencies">Using shared libraries from dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-virtualrunenv-generator">Using <code class="docutils literal notranslate"><span class="pre">virtualrunenv</span></code> generator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rpaths.html">Manage RPATHs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cmake_install.html">How to reuse cmake install for package() method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collaborate_packages.html">How to collaborate with other usersâ€™ packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../link_apple_framework.html">How to link with Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../link_apple_framework.html#how-to-package-apple-frameworks">How to package Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collect_licenses.html">How to collect licenses of dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extract_licenses_from_headers.html">How to extract licenses from headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../capture_version.html">How to dynamically define the name and version of a package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../capture_version.html#how-to-capture-package-version-from-scm-git">How to capture package version from SCM: git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../capture_version.html#how-to-capture-package-version-from-scm-svn">How to capture package version from SCM: svn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../capture_version.html#how-to-capture-package-version-from-text-or-build-files">How to capture package version from text or build files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_languages_package_manager.html">How to use Conan as other language package manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../use_tls_certificates.html">How to manage SSL (TLS) certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../check_conan_version_in_conanfile.html">How to check the version of the Conan client inside a conanfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic_ci_artifactory.html">Use a generic CI with Conan and Artifactory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sanitizers.html">Compiler sanitizers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conan_v2.html">Road to Conan 2.0</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p>Sign up for release updates:</p>
              <script src="https://app-lon04.marketo.com/js/forms2/js/forms2.min.js"></script>
              <form id="mktoForm_1479"></form>
              <script>MktoForms2.loadForm("https://app-lon04.marketo.com", "256-FNZ-187", 1479);</script>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../howtos.html">Howtos</a> &raquo;</li>
        
          <li><a href="../manage_shared_libraries.html">How to manage shared libraries</a> &raquo;</li>
        
      <li>Manage Shared Libraries with Environment Variables</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/howtos/manage_shared_libraries/env_vars.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="manage-shared-libraries-with-environment-variables">
<span id="manage-shared-libraries-env-vars"></span><h1>Manage Shared Libraries with Environment Variables<a class="headerlink" href="#manage-shared-libraries-with-environment-variables" title="Permalink to this headline">Â¶</a></h1>
<p>Shared libraries are loaded at runtime. The application executable needs to know where to find the
required shared libraries when it runs.</p>
<p>Depending on the operating system, we can use environment variables to help the dynamic linker to find the
shared libraries:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OPERATING SYSTEM</th>
<th class="head">ENVIRONMENT VARIABLE</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WINDOWS</td>
<td>PATH</td>
</tr>
<tr class="row-odd"><td>LINUX</td>
<td>LD_LIBRARY_PATH</td>
</tr>
<tr class="row-even"><td>OSX</td>
<td>DYLD_LIBRARY_PATH</td>
</tr>
</tbody>
</table>
<p>If your package recipe (A) is generating shared libraries you can declare the needed environment variables
pointing to the package directory. This way, any other package depending on (A) will automatically have
the right environment variable set, so they will be able to locate the (A) shared library.</p>
<p>Similarly if you use the <a class="reference internal" href="../../mastering/virtualenv.html#virtual-environment-generator"><span class="std std-ref">virtualenv generator</span></a> and you
activate it, you will get the paths needed to locate the shared libraries in your terminal.</p>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">Â¶</a></h2>
<p>We are packaging a tool called <code class="docutils literal notranslate"><span class="pre">toolA</span></code> with a library and an executable that will, for example, compress data.</p>
<p>The package offers two flavors, shared library or static library (embedded in the executable of the tool and
available to link with).
You can use the <code class="docutils literal notranslate"><span class="pre">toolA</span></code> package library to develop another executable or library or you can just use the
executable provided by the package. In both cases, if you choose to install the <cite>shared</cite> package of <code class="docutils literal notranslate"><span class="pre">toolA</span></code>
you will need to have the shared library available.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">tools</span><span class="p">,</span> <span class="n">ConanFile</span>

<span class="k">class</span> <span class="nc">ToolA</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="o">....</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;toolA&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]}</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># build your shared library</span>

    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Copy the executable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;toolA*&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Copy the libraries</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">shared</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*.dll&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*.dylib&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*.so*&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-tool-from-a-different-package">
<h2>Using the tool from a different package<a class="headerlink" href="#using-the-tool-from-a-different-package" title="Permalink to this headline">Â¶</a></h2>
<p>If we are now creating a package that uses the <code class="docutils literal notranslate"><span class="pre">ToolA</span></code> executable to compress some data, we can
execute directly <code class="docutils literal notranslate"><span class="pre">toolA</span></code> using RunEnvironment build helper to set the environment variables accordingly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">tools</span><span class="p">,</span> <span class="n">ConanFile</span>

<span class="k">class</span> <span class="nc">PackageB</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;packageB&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;toolA/1.0@myuser/stable&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">exe_name</span> <span class="o">=</span> <span class="s2">&quot;toolA.exe&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">os</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="k">else</span> <span class="s2">&quot;toolA&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> --someparams&quot;</span> <span class="o">%</span> <span class="n">exe_name</span><span class="p">,</span> <span class="n">run_environment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="building-an-application-using-the-shared-library-from-toola">
<h2>Building an application using the shared library from <code class="docutils literal notranslate"><span class="pre">toolA</span></code><a class="headerlink" href="#building-an-application-using-the-shared-library-from-toola" title="Permalink to this headline">Â¶</a></h2>
<p>As we are building a final application, we will probably want to distribute it together with the
shared library from the <code class="docutils literal notranslate"><span class="pre">toolA</span></code>, so we can use the <a class="reference internal" href="../../using_packages/conanfile_txt.html#imports-txt"><span class="std std-ref">Imports</span></a> to import the required
shared libraries to our user space.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><em>conanfile.txt</em></span><a class="headerlink" href="#id1" title="Permalink to this code">Â¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="p">[</span><span class="n">requires</span><span class="p">]</span>
 <span class="n">toolA</span><span class="o">/</span><span class="mf">1.0</span><span class="nd">@myuser</span><span class="o">/</span><span class="n">stable</span>

 <span class="p">[</span><span class="n">generators</span><span class="p">]</span>
 <span class="n">cmake</span>

 <span class="p">[</span><span class="n">options</span><span class="p">]</span>
 <span class="n">toolA</span><span class="p">:</span><span class="n">shared</span><span class="o">=</span><span class="kc">True</span>

 <span class="p">[</span><span class="n">imports</span><span class="p">]</span>
 <span class="nb">bin</span><span class="p">,</span> <span class="o">*.</span><span class="n">dll</span> <span class="o">-&gt;</span> <span class="o">./</span><span class="nb">bin</span> <span class="c1"># Copies all dll files from packages bin folder to my &quot;bin&quot; folder</span>
 <span class="n">lib</span><span class="p">,</span> <span class="o">*.</span><span class="n">dylib</span><span class="o">*</span> <span class="o">-&gt;</span> <span class="o">./</span><span class="nb">bin</span> <span class="c1"># Copies all dylib files from packages lib folder to my &quot;bin&quot; folder</span>
 <span class="n">lib</span><span class="p">,</span> <span class="o">*.</span><span class="n">so</span><span class="o">*</span> <span class="o">-&gt;</span> <span class="o">./</span><span class="nb">bin</span> <span class="c1"># Copies all dylib files from packages lib folder to my &quot;bin&quot; folder</span>
</pre></div>
</div>
</div>
<p>Now you can build the project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
$ conan install ..
$ cmake .. -G <span class="s2">&quot;Visual Studio 14 Win64&quot;</span>
$ cmake --build . --config Release
$ <span class="nb">cd</span> bin <span class="o">&amp;&amp;</span> mytool
</pre></div>
</div>
<p>The previous example will work only in Windows and OSX (changing the CMake generator), because the
dynamic linker will look in the current directory (the binary directory) where we copied the shared
libraries too.</p>
<p>In Linux you still need to set the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>, or in OSX, the <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> bin <span class="o">&amp;&amp;</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span> <span class="o">&amp;&amp;</span> ./mytool
</pre></div>
</div>
</div>
<div class="section" id="using-shared-libraries-from-dependencies">
<h2>Using shared libraries from dependencies<a class="headerlink" href="#using-shared-libraries-from-dependencies" title="Permalink to this headline">Â¶</a></h2>
<p>If you are executing something that depends on shared libraries belonging to your dependencies, those shared libraries have to be found at
runtime. In Windows, it is enough if the package added its binary folder to the system <code class="docutils literal notranslate"><span class="pre">PATH</span></code>. In Linux and OSX, it is necessary that the
<code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> environment variables are used.</p>
<p>Security restrictions might apply in OSX
(<a class="reference external" href="https://stackoverflow.com/questions/35568122/why-isnt-dyld-library-path-being-propagated-here">read this thread</a>), so the
<code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">DYLD_FRAMEWORK_PATH</span></code> environment variables are not directly transferred to the child process. In that case, you have to use it explicitly in
your <em>conanfile.py</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">env_build</span> <span class="o">=</span> <span class="n">RunEnvironment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">tools</span><span class="o">.</span><span class="n">environment_append</span><span class="p">(</span><span class="n">env_build</span><span class="o">.</span><span class="n">vars</span><span class="p">):</span>
        <span class="c1"># self.run(&quot;./myexetool&quot;) # won&#39;t work, even if &#39;DYLD_LIBRARY_PATH&#39; and &#39;DYLD_FRAMEWORK_PATH&#39; are in the env</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;DYLD_LIBRARY_PATH=</span><span class="si">%s</span><span class="s2"> DYLD_FRAMEWORK_PATH=</span><span class="si">%s</span><span class="s2"> ./myexetool&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DYLD_LIBRARY_PATH&#39;</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DYLD_FRAMEWORK_PATH&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>Or you could use <code class="docutils literal notranslate"><span class="pre">RunEnvironment</span></code> helper described above.</p>
</div>
<div class="section" id="using-virtualrunenv-generator">
<h2>Using <code class="docutils literal notranslate"><span class="pre">virtualrunenv</span></code> generator<a class="headerlink" href="#using-virtualrunenv-generator" title="Permalink to this headline">Â¶</a></h2>
<p><a class="reference internal" href="../../mastering/virtualenv.html#virtual-run-environment-generator"><span class="std std-ref">virtualrunenv generator</span></a> will set the environment variables <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>,
<code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> pointing to <em>lib</em> and <em>bin</em> folders automatically.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><em>conanfile.txt</em></span><a class="headerlink" href="#id2" title="Permalink to this code">Â¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="p">[</span><span class="n">requires</span><span class="p">]</span>
 <span class="n">toolA</span><span class="o">/</span><span class="mf">1.0</span><span class="nd">@myuser</span><span class="o">/</span><span class="n">stable</span>

 <span class="p">[</span><span class="n">options</span><span class="p">]</span>
 <span class="n">toolA</span><span class="p">:</span><span class="n">shared</span><span class="o">=</span><span class="kc">True</span>

 <span class="p">[</span><span class="n">generators</span><span class="p">]</span>
 <span class="n">virtualrunenv</span>
</pre></div>
</div>
</div>
<p>In the terminal window:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install .
$ <span class="nb">source</span> activate_run
$ toolA --someparams
<span class="c1"># Only For Mac OS users to avoid restrictions:</span>
$ <span class="nv">DYLD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$DYLD_LIBRARY_PATH</span> toolA --someparams
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rpaths.html" class="btn btn-neutral float-right" title="Manage RPATHs" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../manage_shared_libraries.html" class="btn btn-neutral" title="How to manage shared libraries" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, JFrog.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 1.23
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          
            <dd><a href="/en/latest/index.html">1.25</a></dd>
          
        
          
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
          
        
          
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
          
        
          
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
          
        
          
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
          
        
          
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
          
        
          
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
          
        
          
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
          
        
          
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
          
        
          
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
          
        
          
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
          
        
          
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
          
        
          
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
          
        
          
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
          
        
          
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
          
        
          
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
          
        
          
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
          
        
          
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
          
        
          
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
          
        
          
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
          
        
          
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
          
        
          
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
          
        
          
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
          
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/en/1.23/conan.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.23.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../../_static/js/modernizr.min.js"></script>
  <script src="../../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.23");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>