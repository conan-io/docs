



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Workspaces &mdash; conan 1.11.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="conan 1.11.2 documentation" href="../index.html"/>
        <link rel="up" title="Developing packages" href="../developing_packages.html"/>
        <link rel="next" title="Package apps and devtools" href="../devtools.html"/>
        <link rel="prev" title="Package development flow" href="package_dev_flow.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-WK44ZFM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-WK44ZFM');
</script>


</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://conan.io">
          

          
            
            <img src="../_static/conan_logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../developing_packages.html">Developing packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="package_dev_flow.html">Package development flow</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Workspaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#in-source-builds">In-source builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conanws-yml-syntax">conanws.yml syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-limitations">Known limitations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p>Sign up for release updates:</p>
              <script src="https://app-lon04.marketo.com/js/forms2/js/forms2.min.js"></script>
              <form id="mktoForm_1479"></form>
              <script>MktoForms2.loadForm("https://app-lon04.marketo.com", "256-FNZ-187", 1479);</script>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../developing_packages.html">Developing packages</a> &raquo;</li>
        
      <li>Workspaces</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/developing_packages/workspaces.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="workspaces">
<span id="id1"></span><h1>Workspaces<a class="headerlink" href="#workspaces" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is an <strong>experimental</strong> feature. This is actually a preview of the feature, with the main goal of receiving feedbacks and improving
it. Consider the file formats, commands and flows to be unstable and subject to changes in the next releases.</p>
</div>
<p>Sometimes, it is necessary to work simultaneously on more than one package. In theory, each package should be a “work unit”, and developers
should be able to work on them in isolation. But sometimes, some changes require modifications in more than one package at the same time.
The local development flow can help, but it still requires using <strong class="command">export-pkg</strong> to put the artifacts in the local cache, where other
packages under development will consume them.</p>
<p>The Conan workspaces allow to have more than one package in user folders, and have them to directly use other packages from user folders
without needing to put them in the local cache.</p>
<p>Lets introduce them with a practical example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/memsharded/conan-workspace-example.git
$ <span class="nb">cd</span> conan-workspace-example
</pre></div>
</div>
<p>Note that this folder contains a file <em>conanws.yml</em> in the root, with the following contents:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HelloB:
    folder: B
    includedirs: src
    cmakedir: src
HelloC:
    folder: C
    includedirs: src
    cmakedir: src
HelloA:
    folder: A
    cmakedir: src

root: HelloA
generator: cmake
name: MyProject
</pre></div>
</div>
<p>Next, run a <strong class="command">conan install</strong> as usual, using a <em>build</em> folder to output the dependencies information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install . -if<span class="o">=</span>build
Using conanws.yml file from C:<span class="se">\U</span>sers<span class="se">\&lt;</span>youruser&gt;<span class="se">\c</span>onan-workspace-example
Workspace: Installing...
Requirements
    HelloA/root@project/develop from <span class="s1">&#39;conanws.yml&#39;</span>
    HelloB/0.1@user/testing from <span class="s1">&#39;conanws.yml&#39;</span>
    HelloC/0.1@user/testing from <span class="s1">&#39;conanws.yml&#39;</span>
Packages
    HelloA/root@project/develop:8a1ff0ad9a2a372996a26ff4136faa83268b5442
    HelloB/0.1@user/testing:e5affb0ca4e5d6998c29f435daf78ab20ef50be5
    HelloC/0.1@user/testing:63da998e3642b50bee33f4449826b2d623661505

Workspace HelloC: Generator cmake created conanbuildinfo.cmake
Workspace HelloC: Generated conaninfo.txt
Workspace HelloC: Generated conanbuildinfo.txt
Workspace HelloB: Generator cmake created conanbuildinfo.cmake
Workspace HelloB: Generated conaninfo.txt
Workspace HelloB: Generated conanbuildinfo.txt
Workspace HelloA: Generator cmake created conanbuildinfo.cmake
Workspace HelloA: Generated conaninfo.txt
Workspace HelloA: Generated conanbuildinfo.txt
</pre></div>
</div>
<p>Note that nothing will really be installed in the local cache, all the dependencies are resolved locally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan search
There are no packages
</pre></div>
</div>
<p>Also, each dependency generates one <em>conanbuildinfo.cmake</em> file and all of them are installed in the <em>build</em> folder. You can inspect them to check
that the paths they define for their dependencies are user folders, not pointing to the local cache.</p>
<p>As defined in the <em>conanws.yml</em>, a root <em>CMakeLists.txt</em> is generated for us. We can use it to generate the super-project and build it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> build
$ cmake .. -G <span class="s2">&quot;Visual Studio 14 Win64&quot;</span> <span class="c1"># Adapt accordingly to your Conan profile</span>
<span class="c1"># Now build it. You can also open your IDE and build</span>
$ cmake --build . --config Release
$ ./A/Release/app.exe
Hello World C Release!
Hello World B Release!
Hello World A Release!
</pre></div>
</div>
<p>Now the project is editable, you can change the code of folder C <em>hello.cpp</em> to say “Bye World” and:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Edit your C/src/hello.cpp file to say &quot;Bye&quot;</span>
<span class="c1"># Or press the build button of your IDE</span>
$ cmake --build . --config Release
$ ./A/Release/app.exe
Bye World C Release!
Hello World B Release!
Hello World A Release!
</pre></div>
</div>
<div class="section" id="in-source-builds">
<h2>In-source builds<a class="headerlink" href="#in-source-builds" title="Permalink to this headline">¶</a></h2>
<p>The current approach with the super-project automatic generation, is only valid if all the opened packages are using the
same build system, CMake. However, without using a super-project, it is still possible to use workspaces to simultaneously
work on different packages with different build systems.</p>
<p>For this case, the <em>conanws.yml</em> won’t have the <code class="docutils literal notranslate"><span class="pre">generator</span></code> or <code class="docutils literal notranslate"><span class="pre">name</span></code> fields. The installation will be done without specifying an
install folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install .
</pre></div>
</div>
<p>Each local package will have their own build folder, and the generated <em>conanbuildinfo.cmake</em> will be located in it.
You can do local builds in each of the packages, and they will be referring and linking the other opened packages in
user folders.</p>
</div>
<div class="section" id="conanws-yml-syntax">
<h2>conanws.yml syntax<a class="headerlink" href="#conanws-yml-syntax" title="Permalink to this headline">¶</a></h2>
<p>The <em>conanws.yml</em> file can be located in any parent folder of the location pointed by the <strong class="command">conan install</strong> command.
Conan will search up the folder hierarchy looking for a <em>conanws.yml</em> file. If it is not found, the normal <strong class="command">conan install</strong>
for a single package will be executed.</p>
<p>Any “opened” package will have an entry in the <em>conanws.yml</em> file. This entry will define the relative location of different
folders:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>HelloB:
    folder: B
    includedirs: src  # relative to B, i.e. B/src
    cmakedir: src # Where the CMakeLists.txt is, necessary for the super-project
    build: &quot;&#39;build&#39; if &#39;{os}&#39;==&#39;Windows&#39; else &#39;build_{build_type}&#39;.lower()&quot;
    libdirs: &quot;&#39;build/{build_type}&#39; if &#39;{os}&#39;==&#39;Windows&#39; else &#39;build_{build_type}&#39;.lower()&quot;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> and <code class="docutils literal notranslate"><span class="pre">libdirs</span></code> local folders can be parameterized with the build type and the architecture (<code class="docutils literal notranslate"><span class="pre">arch</span></code>) if necessary, to account for
different layouts and configurations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">root</span></code> field of <em>conanws.yml</em> defines which are the end consumers. They are needed as an input to define the dependency graph.
There can be more than one <code class="docutils literal notranslate"><span class="pre">root</span></code>, in a comma separated list, but all of them will share the same dependency graph, so if they
require different versions of the same dependencies, they will conflict.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root: HelloA, Other
generator: cmake # The super-project build system
name: MyProject # Name for the super-project
</pre></div>
</div>
</div>
<div class="section" id="known-limitations">
<h2>Known limitations<a class="headerlink" href="#known-limitations" title="Permalink to this headline">¶</a></h2>
<p>So far, only the CMake super-project generator is implemented. A Visual Studio one is being under development, and seems feasible, but
it is ongoing work, not yet available.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">We really want your feedback. Please submit any issues to <a class="reference external" href="https://github.com/conan-io/conan/issues">https://github.com/conan-io/conan/issues</a> with any suggestion, problem, idea,
and using [workspaces] prefix in the issue title.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../devtools.html" class="btn btn-neutral float-right" title="Package apps and devtools" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="package_dev_flow.html" class="btn btn-neutral" title="Package development flow" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, JFrog.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 1.11
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          
            <dd><a href="/en/latest/index.html">1.25</a></dd>
          
        
          
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
          
        
          
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
          
        
          
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
          
        
          
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
          
        
          
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
          
        
          
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
          
        
          
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
          
        
          
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
          
        
          
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
          
        
          
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
          
        
          
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
          
        
          
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
          
        
          
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
          
        
          
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
          
        
          
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
          
        
          
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
          
        
          
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
          
        
          
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
          
        
          
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
          
        
          
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
          
        
          
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
          
        
          
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
          
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/en/1.11/conan.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.11.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../_static/js/modernizr.min.js"></script>
  <script src="../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.11");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>