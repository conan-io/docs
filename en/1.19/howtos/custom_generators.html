



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to create and share a custom generator with generator packages &mdash; conan 1.19.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="conan 1.19.3 documentation" href="../index.html"/>
        <link rel="up" title="Howtos" href="../howtos.html"/>
        <link rel="next" title="How to manage shared libraries" href="manage_shared_libraries.html"/>
        <link rel="prev" title="How to reuse Python code in recipes" href="python_code_reuse.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 



</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://conan.io">
          

          
            
            <img src="../_static/conan-logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howtos.html">Howtos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="header_only.html">How to package header-only libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmake_launch.html">How to launch conan install from cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="visual_studio_packages.html">How to create and reuse packages based on Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="makefiles.html">Creating and reusing packages based on Makefiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="manage_gcc_abi.html">How to manage the GCC &gt;= 5 ABI</a></li>
<li class="toctree-l2"><a class="reference internal" href="vs2017_cmake.html">Using Visual Studio 2017 - CMake integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="manage_cpp_standard.html">How to manage C++ standard [EXPERIMENTAL]</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_conan_in_docker.html">How to use Docker to create and cross-build C and C++ Conan packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_code_reuse.html">How to reuse Python code in recipes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to create and share a custom generator with generator packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-premake-generator">Creating a Premake generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-generator">Using the generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-template-files-for-custom-generators">Using template files for custom generators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="manage_shared_libraries.html">How to manage shared libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmake_install.html">How to reuse cmake install for package() method</a></li>
<li class="toctree-l2"><a class="reference internal" href="collaborate_packages.html">How to collaborate with other users’ packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_apple_framework.html">How to link with Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_apple_framework.html#how-to-package-apple-frameworks">How to package Apple Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="collect_licenses.html">How to collect licenses of dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="extract_licenses_from_headers.html">How to extract licenses from headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html">How to dynamically define the name and version of a package</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-scm-git">How to capture package version from SCM: git</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-scm-svn">How to capture package version from SCM: svn</a></li>
<li class="toctree-l2"><a class="reference internal" href="capture_version.html#how-to-capture-package-version-from-text-or-build-files">How to capture package version from text or build files</a></li>
<li class="toctree-l2"><a class="reference internal" href="other_languages_package_manager.html">How to use Conan as other language package manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="use_tls_certificates.html">How to manage SSL (TLS) certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="check_conan_version_in_conanfile.html">How to check the version of the Conan client inside a conanfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_ci_artifactory.html">Use a generic CI with Conan and Artifactory</a></li>
<li class="toctree-l2"><a class="reference internal" href="sanitizers.html">Compiler sanitizers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p>Sign up for release updates:</p>
              <script src="https://app-lon04.marketo.com/js/forms2/js/forms2.min.js"></script>
              <form id="mktoForm_1479"></form>
              <script>MktoForms2.loadForm("https://app-lon04.marketo.com", "256-FNZ-187", 1479);</script>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../howtos.html">Howtos</a> &raquo;</li>
        
      <li>How to create and share a custom generator with generator packages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/howtos/custom_generators.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-create-and-share-a-custom-generator-with-generator-packages">
<span id="dyn-generators"></span><h1>How to create and share a custom generator with generator packages<a class="headerlink" href="#how-to-create-and-share-a-custom-generator-with-generator-packages" title="Permalink to this headline">¶</a></h1>
<p>There are several built-in generators, like <code class="docutils literal notranslate"><span class="pre">cmake</span></code>, <code class="docutils literal notranslate"><span class="pre">visual_studio</span></code>, <code class="docutils literal notranslate"><span class="pre">xcode</span></code>… But what if your build system is not included or the
existing built-in ones doesn’t satisfy your needs? This <strong>how to</strong> will show you how to create a generator for
<a class="reference external" href="https://premake.github.io/">Premake</a> build system.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Check the reference of the <a class="reference internal" href="../reference/generators/custom.html#custom-generator"><span class="std std-ref">Custom generator</span></a> section to know the syntax and attributes available.</p>
</div>
<div class="section" id="creating-a-premake-generator">
<h2>Creating a Premake generator<a class="headerlink" href="#creating-a-premake-generator" title="Permalink to this headline">¶</a></h2>
<p>Create a folder with a new <em>conanfile.py</em> with the following contents:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir conan-premake <span class="o">&amp;&amp;</span> <span class="nb">cd</span> conan-premake
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><em>conanfile.py</em></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">conans.model</span> <span class="kn">import</span> <span class="n">Generator</span>
 <span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">ConanFile</span>


 <span class="k">class</span> <span class="nc">PremakeDeps</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deps_cpp_info</span><span class="p">):</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">include_paths</span> <span class="o">=</span> <span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
                                         <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">include_paths</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">lib_paths</span> <span class="o">=</span> <span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
                                     <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">lib_paths</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">bin_paths</span> <span class="o">=</span> <span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
                                     <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">bin_paths</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">libs</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">libs</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">defines</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">defines</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">cppflags</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">cppflags</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">cflags</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">cflags</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">sharedlinkflags</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">sharedlinkflags</span><span class="p">)</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">exelinkflags</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">exelinkflags</span><span class="p">)</span>

         <span class="bp">self</span><span class="o">.</span><span class="n">rootpath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">deps_cpp_info</span><span class="o">.</span><span class="n">rootpath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>


 <span class="k">class</span> <span class="nc">Premake</span><span class="p">(</span><span class="n">Generator</span><span class="p">):</span>

     <span class="nd">@property</span>
     <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="k">return</span> <span class="s2">&quot;conanpremake.lua&quot;</span>

     <span class="nd">@property</span>
     <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="n">deps</span> <span class="o">=</span> <span class="n">PremakeDeps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deps_build_info</span><span class="p">)</span>

         <span class="n">template</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;conan_includedirs</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.include_paths}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_libdirs</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.lib_paths}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_bindirs</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.bin_paths}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_libs</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.libs}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_cppdefines</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.defines}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_cppflags</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.cppflags}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_cflags</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.cflags}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_sharedlinkflags</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.sharedlinkflags}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;conan_exelinkflags</span><span class="si">{dep}</span><span class="s1"> = {{</span><span class="si">{deps.exelinkflags}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

         <span class="n">sections</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#!lua&quot;</span><span class="p">]</span>
         <span class="n">all_flags</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">deps</span><span class="o">=</span><span class="n">deps</span><span class="p">)</span>
         <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">all_flags</span><span class="p">)</span>
         <span class="n">template_deps</span> <span class="o">=</span> <span class="n">template</span> <span class="o">+</span> <span class="s1">&#39;conan_rootpath</span><span class="si">{dep}</span><span class="s1"> = &quot;</span><span class="si">{deps.rootpath}</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

         <span class="k">for</span> <span class="n">dep_name</span><span class="p">,</span> <span class="n">dep_cpp_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">deps_build_info</span><span class="o">.</span><span class="n">dependencies</span><span class="p">:</span>
             <span class="n">deps</span> <span class="o">=</span> <span class="n">PremakeDeps</span><span class="p">(</span><span class="n">dep_cpp_info</span><span class="p">)</span>
             <span class="n">dep_name</span> <span class="o">=</span> <span class="n">dep_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
             <span class="n">dep_flags</span> <span class="o">=</span> <span class="n">template_deps</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">dep_name</span><span class="p">,</span> <span class="n">deps</span><span class="o">=</span><span class="n">deps</span><span class="p">)</span>
             <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dep_flags</span><span class="p">)</span>

         <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span>


 <span class="k">class</span> <span class="nc">MyCustomGeneratorPackage</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
     <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;PremakeGen&quot;</span>
     <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
     <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/memsharded/conan-premake&quot;</span>
     <span class="n">license</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>
</pre></div>
</div>
</div>
<p>This is a full working example. Note the <code class="docutils literal notranslate"><span class="pre">PremakeDeps</span></code> class as a helper. The generator is creating Premake information for each
individual library separately, then also an aggregated information for all dependencies. This <code class="docutils literal notranslate"><span class="pre">PremakeDeps</span></code> wraps a single item of such
information.</p>
<p>Note the <strong>name of the package</strong> will be <strong>PremakeGen/0.1&#64;&lt;user&gt;/&lt;channel&gt;</strong> as that is the name given to it, while the generator name is
<strong>Premake</strong> (the name of the class that inherits from <code class="docutils literal notranslate"><span class="pre">Generator</span></code>). You can give the package any name you want, even the same as the
generator’s name if desired.</p>
<p>You <code class="docutils literal notranslate"><span class="pre">export</span></code> the package recipe to the local cache, so it can be used by other projects as usual:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan <span class="nb">export</span> . myuser/testing
</pre></div>
</div>
</div>
<div class="section" id="using-the-generator">
<h2>Using the generator<a class="headerlink" href="#using-the-generator" title="Permalink to this headline">¶</a></h2>
<p>Let’s create a test project that uses this generator. We will use a simple application that will use a “Hello World” library package as a
requirement.</p>
<p>First, let’s create the “Hello World” library package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir conan-hello <span class="o">&amp;&amp;</span> <span class="nb">cd</span> conan-hello
$ conan new hello/0.1
$ conan create . myuser/testing
</pre></div>
</div>
<p>Now, let’s create a folder for the application that will use Premake as build system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ..
$ mkdir premake-project <span class="o">&amp;&amp;</span> <span class="nb">cd</span> premake-project
</pre></div>
</div>
<p>Put the following files inside. Note the <code class="docutils literal notranslate"><span class="pre">PremakeGen&#64;0.1&#64;myuser/testing</span></code> package reference in your <em>conanfile.txt</em>.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><em>conanfile.txt</em></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> [requires]
 hello/0.1@myuser/testing
 PremakeGen@0.1@myuser/testing

 [generators]
 Premake
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><em>main.cpp</em></span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="cp">#include</span> <span class="cpf">&quot;hello.h&quot;</span><span class="cp"></span>

 <span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">hello</span><span class="p">();</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><em>premake4.lua</em></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span> <span class="c1">-- premake4.lua</span>

 <span class="nb">require</span> <span class="s1">&#39;conanpremake&#39;</span>

 <span class="c1">-- A solution contains projects, and defines the available configurations solution &quot;MyApplication&quot;</span>

 <span class="n">configurations</span> <span class="p">{</span> <span class="s2">&quot;Debug&quot;</span><span class="p">,</span> <span class="s2">&quot;Release&quot;</span> <span class="p">}</span>
 <span class="n">includedirs</span> <span class="p">{</span> <span class="n">conan_includedirs</span> <span class="p">}</span>
 <span class="n">libdirs</span> <span class="p">{</span> <span class="n">conan_libdirs</span> <span class="p">}</span>
 <span class="n">links</span> <span class="p">{</span> <span class="n">conan_libs</span> <span class="p">}</span>

 <span class="c1">-- A project defines one build target</span>

 <span class="n">project</span> <span class="s2">&quot;MyApplication&quot;</span>
     <span class="n">kind</span> <span class="s2">&quot;ConsoleApp&quot;</span>
     <span class="n">language</span> <span class="s2">&quot;C++&quot;</span>
     <span class="n">files</span> <span class="p">{</span> <span class="s2">&quot;**.h&quot;</span><span class="p">,</span> <span class="s2">&quot;**.cpp&quot;</span> <span class="p">}</span>

     <span class="n">configuration</span> <span class="s2">&quot;Debug&quot;</span>
         <span class="n">defines</span> <span class="p">{</span> <span class="s2">&quot;DEBUG&quot;</span> <span class="p">}</span>
         <span class="n">flags</span> <span class="p">{</span> <span class="s2">&quot;Symbols&quot;</span> <span class="p">}</span>

     <span class="n">configuration</span> <span class="s2">&quot;Release&quot;</span>
         <span class="n">defines</span> <span class="p">{</span> <span class="s2">&quot;NDEBUG&quot;</span> <span class="p">}</span>
         <span class="n">flags</span> <span class="p">{</span> <span class="s2">&quot;Optimize&quot;</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>Let’s install the requirements:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install . -s <span class="nv">compiler</span><span class="o">=</span>gcc -s compiler.version<span class="o">=</span><span class="m">4</span>.9 -s compiler.libcxx<span class="o">=</span>libstdc++ --build
</pre></div>
</div>
<p>This generates the <em>premake4.lua</em> file with the requirements information for building.</p>
<p>Now we are ready to build the project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ premake4 gmake
$ make <span class="o">(</span>or mingw32-make <span class="k">if</span> in windows-mingw<span class="o">)</span>
$ ./MyApplication
Hello World!
</pre></div>
</div>
<p>Now everything works, so you might want to share your generator:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan upload PremakeGen/0.1@myuser/testing
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This is a regular Conan package, so you could create a <em>test_package</em> folder with a <em>conanfile.py</em> to test the generator as done in
the example above (invoke the Premake build in the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method).</p>
</div>
</div>
<div class="section" id="using-template-files-for-custom-generators">
<h2>Using template files for custom generators<a class="headerlink" href="#using-template-files-for-custom-generators" title="Permalink to this headline">¶</a></h2>
<p>If your generator has a lot of common, non-parameterized text, you might want to use files that contain the template. It is possible to do
this as long as the template file is exported in the recipe. The following example uses a simple text file, but you could use other
templating formats:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">load</span>
<span class="kn">from</span> <span class="nn">conans.model</span> <span class="kn">import</span> <span class="n">Generator</span>


<span class="k">class</span> <span class="nc">MyCustomGenerator</span><span class="p">(</span><span class="n">Generator</span><span class="p">):</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;customfile.gen&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;mytemplate.txt&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">template</span> <span class="o">%</span> <span class="s2">&quot;Hello&quot;</span>

<span class="k">class</span> <span class="nc">MyCustomGeneratorPackage</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;custom&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">exports</span> <span class="o">=</span> <span class="s2">&quot;mytemplate.txt&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="manage_shared_libraries.html" class="btn btn-neutral float-right" title="How to manage shared libraries" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="python_code_reuse.html" class="btn btn-neutral" title="How to reuse Python code in recipes" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, JFrog.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 1.19
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          
            <dd><a href="/en/latest/index.html">1.25</a></dd>
          
        
          
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
          
        
          
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
          
        
          
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
          
        
          
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
          
        
          
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
          
        
          
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
          
        
          
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
          
        
          
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
          
        
          
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
          
        
          
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
          
        
          
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
          
        
          
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
          
        
          
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
          
        
          
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
          
        
          
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
          
        
          
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
          
        
          
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
          
        
          
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
          
        
          
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
          
        
          
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
          
        
          
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
          
        
          
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
          
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/en/1.19/conan.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.19.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../_static/js/modernizr.min.js"></script>
  <script src="../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.19");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>