<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>conan.tools.cmake &mdash; conan 1.36.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/reference/conanfile/tools/cmake.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=c726727a"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="conan.tools.gnu" href="gnu.html" />
    <link rel="prev" title="tools" href="../tools.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.36
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../conanfile.html">conanfile.py</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../methods.html">Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../tools.html">tools</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">conan.tools.cmake</a></li>
<li class="toctree-l4"><a class="reference internal" href="gnu.html">conan.tools.gnu</a></li>
<li class="toctree-l4"><a class="reference internal" href="meson.html">conan.tools.meson</a></li>
<li class="toctree-l4"><a class="reference internal" href="microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l4"><a class="reference internal" href="env.html">conan.tools.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="files.html">conan.tools.files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../other.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../other.html#output-and-running">Output and Running</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generators.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../build_helpers.html">Build helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../env_vars.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hooks.html">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conan_v2_mode.html">CONAN_V2_MODE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../conan_v2.html">Road to Conan 2.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  📖 The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../../conanfile.html">conanfile.py</a></li>
          <li class="breadcrumb-item"><a href="../tools.html">tools</a></li>
      <li class="breadcrumb-item active">conan.tools.cmake</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/reference/conanfile/tools/cmake.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conan-tools-cmake">
<span id="id1"></span><h1>conan.tools.cmake<a class="headerlink" href="#conan-tools-cmake" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These tools are <strong>experimental</strong> and subject to breaking changes.</p>
</div>
<section id="cmakedeps">
<h2>CMakeDeps<a class="headerlink" href="#cmakedeps" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.33.0">1.33.0</a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> helper will generate one <strong>xxxx-config.cmake</strong> file per dependency, together with other necessary <em>.cmake</em> files
like version, flags and directory data or configuration. It can be used like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;hello/0.1&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeDeps&quot;</span>
</pre></div>
</div>
<p>The full instantiation, that allows custom configuration can be done in the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeDeps</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;hello/0.1&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMakeDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configurations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ReleaseShared&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shared</span><span class="p">:</span>
            <span class="n">cmake</span><span class="o">.</span><span class="n">configuration</span> <span class="o">=</span> <span class="s2">&quot;ReleaseShared&quot;</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>As it can be seen, it allows to define custom user CMake configurations besides the standard Release, Debug, etc ones.
If the <strong>settings.yml</strong> file is customized to add new configurations to the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code>, then, adding it
explicitly to <code class="docutils literal notranslate"><span class="pre">.configurations</span></code> is not necessary.</p>
</section>
<section id="cmaketoolchain">
<span id="conan-cmake-toolchain"></span><h2>CMakeToolchain<a class="headerlink" href="#cmaketoolchain" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> is the toolchain generator for CMake. It will generate toolchain files that can be used in the
command line invocation of CMake with the <code class="docutils literal notranslate"><span class="pre">-DCMAKE_TOOLCHAIN_FILE=conantoolchain.cmake</span></code>. This generator translates
the current package configuration, settings, and options, into CMake toolchain syntax.</p>
<p>It can be declared as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;CMakeToolchain&quot;</span>
</pre></div>
</div>
<p>Or fully instantiated in the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMakeToolchain</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;hello/0.1&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;cmake_find_package_multi&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]}</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;MYVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MYVAR_VALUE&quot;</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="p">[</span><span class="s2">&quot;MYDEFINE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MYDEF_VALUE&quot;</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>This will generate the following files after a <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">install</span></code> (or when building the package
in the cache) with the information provided in the <code class="docutils literal notranslate"><span class="pre">generate()</span></code> method as well as information
translated from the current <code class="docutils literal notranslate"><span class="pre">settings</span></code>:</p>
<ul class="simple">
<li><p><em>conan_toolchain.cmake</em> file, containing the translation of Conan settings to CMake variables.
Some things that will be defined in this file:</p>
<ul>
<li><p>Definition of the CMake generator platform and generator toolset</p></li>
<li><p>Definition of the CMake <code class="docutils literal notranslate"><span class="pre">build_type</span></code></p></li>
<li><p>Definition of the <code class="docutils literal notranslate"><span class="pre">CMAKE_POSITION_INDEPENDENT_CODE</span></code>, based on <code class="docutils literal notranslate"><span class="pre">fPIC</span></code> option.</p></li>
<li><p>Definition of the C++ standard as necessary</p></li>
<li><p>Definition of the standard library used for C++</p></li>
<li><p>Deactivation of rpaths in OSX</p></li>
</ul>
</li>
<li><p><em>conanbuild.json</em>: The toolchain can also generate a <code class="docutils literal notranslate"><span class="pre">conanbuild.json</span></code> file that contains arguments to
the command line <code class="docutils literal notranslate"><span class="pre">CMake()</span></code> helper used in the recipe <code class="docutils literal notranslate"><span class="pre">build()</span></code> method. At the moment it contains only the CMake
generator. The CMake generator will be deduced from the current Conan compiler settings:</p>
<ul>
<li><p>For <code class="docutils literal notranslate"><span class="pre">settings.compiler=&quot;Visual</span> <span class="pre">Studio&quot;</span></code>, the CMake generator is a direct mapping of <code class="docutils literal notranslate"><span class="pre">compiler.version</span></code>, as this version represents the IDE version, not the compiler version.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">settings.compiler=msvc</span></code>, the CMake generator will be by default the one of the Visual Studio that introduced this compiler version (<code class="docutils literal notranslate"><span class="pre">msvc</span> <span class="pre">19.0</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">14</span></code>, <code class="docutils literal notranslate"><span class="pre">msvc</span> <span class="pre">19.1</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">15</span></code>, etc). This can be changed, using the <code class="docutils literal notranslate"><span class="pre">tools.microsoft.msbuild:vs_version</span></code> [conf] configuration. If it is defined, that Visual Studio version will be used as the CMake generator, and the specific compiler version and toolset will be defined in the <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
</ul>
</li>
<li><p><em>conanvcvars.bat</em>: In some cases, the Visual Studio environment needs to be defined correctly for building,
like when using the Ninja or NMake generators. If necessary, the <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> will generate this script,
so defining the correct Visual Studio prompt is easier.</p></li>
</ul>
<section id="constructor">
<h3>constructor<a class="headerlink" href="#constructor" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conanfile</span><span class="p">,</span> <span class="n">generator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">generator_platform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">cmake_system_name</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">toolset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>Most of the arguments are optional and will be deduced from the current <code class="docutils literal notranslate"><span class="pre">settings</span></code>, and not
necessary to define them.</p>
</section>
<section id="preprocessor-definitions">
<h3>preprocessor_definitions<a class="headerlink" href="#preprocessor-definitions" title="Link to this heading"></a></h3>
<p>This attribute allows defining CMake variables, for multiple configurations (Debug, Release, etc).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="p">[</span><span class="s2">&quot;MYVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="o">.</span><span class="n">debug</span><span class="p">[</span><span class="s2">&quot;MYCONFIGVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyDebugValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">preprocessor_definitions</span><span class="o">.</span><span class="n">release</span><span class="p">[</span><span class="s2">&quot;MYCONFIGVAR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;MyReleaseValue&quot;</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</pre></div>
</div>
<p>This will be translated to:</p>
<ul class="simple">
<li><p>One <code class="docutils literal notranslate"><span class="pre">set()</span></code> definition for <code class="docutils literal notranslate"><span class="pre">MYVAR</span></code> in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file.</p></li>
<li><p>One <code class="docutils literal notranslate"><span class="pre">set()</span></code> definition, using a cmake generator expression in <code class="docutils literal notranslate"><span class="pre">conan_toolchain.cmake</span></code> file,
using the different values for different configurations.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> is intended to run with the <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> dependencies generator. It might temporarily
work with others like <code class="docutils literal notranslate"><span class="pre">cmake_find_package</span></code> and <code class="docutils literal notranslate"><span class="pre">cmake_find_package_multi</span></code>, but this will be removed soon.</p>
</section>
<section id="using-the-toolchain-in-developer-flow">
<h3>Using the toolchain in developer flow<a class="headerlink" href="#using-the-toolchain-in-developer-flow" title="Link to this heading"></a></h3>
<p>One of the advantages of using Conan toolchains is that they can help to achieve the exact same build
with local development flows, than when the package is created in the cache.</p>
<p>With the <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> it is possible to do, for multi-configuration systems like Visual Studio
(assuming we are using the <code class="docutils literal notranslate"><span class="pre">cmake_find_package_multi</span></code> generator):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets start in the folder containing the conanfile.py</span>
$<span class="w"> </span>mkdir<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="c1"># Install both debug and release deps and create the toolchain</span>
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
<span class="c1"># the conan_toolchain.cmake is common for both configurations</span>
<span class="c1"># Need to pass the generator WITHOUT the platform, that matches your default settings</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Visual Studio 15&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake
<span class="c1"># Now you can open the IDE, select Debug or Release config and build</span>
<span class="c1"># or, in the command line</span>
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Release
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w"> </span>--config<span class="w"> </span>Debug
</pre></div>
</div>
<p><strong>NOTE</strong>: The platform (Win64), is already encoded in the toolchain. The command line shouldn’t pass it, so using
<code class="docutils literal notranslate"><span class="pre">-G</span> <span class="pre">&quot;Visual</span> <span class="pre">Studio</span> <span class="pre">15&quot;</span></code> instead of the <code class="docutils literal notranslate"><span class="pre">-G</span> <span class="pre">&quot;Visual</span> <span class="pre">Studio</span> <span class="pre">15</span> <span class="pre">Win64&quot;</span></code></p>
<p>For single-configuration build systems:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lets start in the folder containing the conanfile.py</span>
$<span class="w"> </span>mkdir<span class="w"> </span>build_release<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build_release
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..
<span class="c1"># the build type Release is encoded in the toolchain already.</span>
<span class="c1"># This conan_toolchain.cmake is specific for release</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w">  </span><span class="c1"># or just &quot;make&quot;</span>

<span class="c1"># debug build requires its own folder</span>
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>..<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>build_debug<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build_debug
$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>..<span class="w"> </span>-s<span class="w"> </span><span class="nv">build_type</span><span class="o">=</span>Debug
<span class="c1"># the build type Debug is encoded in the toolchain already.</span>
<span class="c1"># This conan_toolchain.cmake is specific for debug</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span>conan_toolchain.cmake
$<span class="w"> </span>cmake<span class="w"> </span>--build<span class="w"> </span>.<span class="w">  </span><span class="c1"># or just &quot;make&quot;</span>
</pre></div>
</div>
</section>
<section id="extending-and-customizing-cmaketoolchain">
<h3>Extending and customizing CMakeToolchain<a class="headerlink" href="#extending-and-customizing-cmaketoolchain" title="Link to this heading"></a></h3>
<p>Since Conan 1.36, <code class="docutils literal notranslate"><span class="pre">CMakeToolchain</span></code> implements a powerful capability for extending and customizing the resulting toolchain file.</p>
<p>The following predefined blocks are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">generic_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_GENERATOR_PLATFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_GENERATOR_TOOLSET</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code>,``CMAKE_CXX_COMPILER`` and <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">android_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">ANDROID_PLATFORM</span></code>, <code class="docutils literal notranslate"><span class="pre">ANDROID_STL</span></code>, <code class="docutils literal notranslate"><span class="pre">ANDROID_ABI</span></code> and includes <code class="docutils literal notranslate"><span class="pre">CMAKE_ANDROID_NDK/build/cmake/android.toolchain.cmake</span></code>
where CMAKE_ANDROID_NDK comes defined in <code class="docutils literal notranslate"><span class="pre">tools.android:ndk_path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ios_system</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_VERSION</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_OSX_ARCHITECTURES</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_OSX_SYSROOT</span></code> for Apple systems.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">find_paths</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_PACKAGE_PREFER_CONFIG</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_MODULE_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_PREFIX_PATH</span></code> so the generated files from <code class="docutils literal notranslate"><span class="pre">CMakeDeps</span></code> are found.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fpic</span></code>: Defines the <code class="docutils literal notranslate"><span class="pre">CMAKE_POSITION_INDEPENDENT_CODE</span></code> when there is a <code class="docutils literal notranslate"><span class="pre">options.fPIC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpath</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">CMAKE_SKIP_RPATH</span></code> for OSX</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arch_flags</span></code>: Defines C/C++ flags like <code class="docutils literal notranslate"><span class="pre">-m32,</span> <span class="pre">-m64</span></code> when necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libcxx</span></code>: Defines <code class="docutils literal notranslate"><span class="pre">-stdlib=libc++</span></code> flag when necessary as well as <code class="docutils literal notranslate"><span class="pre">_GLIBCXX_USE_CXX11_ABI</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vs_runtime</span></code>: Defines the <code class="docutils literal notranslate"><span class="pre">CMAKE_MSVC_RUNTIME_LIBRARY</span></code> variable, as a generator expression for
for multiple configurations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cppstd</span></code>: defines <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_STANDARD</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_EXTENSIONS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shared</span></code>: defines <code class="docutils literal notranslate"><span class="pre">BUILD_SHARED_LIBS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel</span></code>: defines <code class="docutils literal notranslate"><span class="pre">/MP</span></code> parallel build flag for Visual.</p></li>
</ul>
<p>Blocks can be customized in different ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove an existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;generic_system&quot;</span><span class="p">)</span>

<span class="c1"># modify the template of an existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">template</span>
    <span class="n">new_tmp</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># replace, fully replace, append...</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">new_tmp</span>

<span class="c1"># modify the context (variables) of an existing block</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">types</span>

<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">generic_block</span> <span class="o">=</span> <span class="n">toolchain</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span>  <span class="c1"># Your own custom logic here</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;build_type&quot;</span><span class="p">:</span> <span class="s2">&quot;SuperRelease&quot;</span><span class="p">}</span>
    <span class="n">generic_block</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">generic_block</span><span class="p">)</span>

<span class="c1"># completely replace existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># this could go to a python_requires</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">MyGenericBlock</span><span class="p">(</span><span class="n">Block</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;HelloWorld&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyBlock</span>

<span class="c1"># add a completely new block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># this could go to a python_requires</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">MyBlock</span><span class="p">(</span><span class="n">Block</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Hello {{myvar}}!!!&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;myvar&quot;</span><span class="p">:</span> <span class="s2">&quot;World&quot;</span><span class="p">}</span>

    <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;mynewblock&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyBlock</span>


<span class="c1"># extend from an existing block</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1"># this could go to a python_requires</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">MyBlock</span><span class="p">(</span><span class="n">GenericSystemBlock</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Hello {{build_type}}!!&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyBlock</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">context</span><span class="p">()</span>
            <span class="n">c</span><span class="p">[</span><span class="s2">&quot;build_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;build_type&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Super&quot;</span>
            <span class="k">return</span> <span class="n">c</span>

    <span class="n">tc</span><span class="o">.</span><span class="n">pre_blocks</span><span class="p">[</span><span class="s2">&quot;generic_system&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyBlock</span>
</pre></div>
</div>
<p>Recall that this is a very <strong>experimental</strong> feature, and these interfaces might change in the following releases.</p>
<p>For more information about these blocks, please have a look at the source code.</p>
</section>
</section>
<section id="cmake">
<h2>CMake<a class="headerlink" href="#cmake" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CMake</span></code> build helper is a wrapper around the command line invocation of cmake. It will abstract the
calls like <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--config</span> <span class="pre">Release</span></code> into Python method calls. It will also add the argument
<code class="docutils literal notranslate"><span class="pre">-DCMAKE_TOOLCHAIN_FILE=conantoolchain.cmake</span></code> to the <code class="docutils literal notranslate"><span class="pre">configure()</span></code> call.</p>
<p>The helper is intended to be used in the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method, to call CMake commands automatically
when a package is being built directly by Conan (create, install)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.cmake</span><span class="w"> </span><span class="kn">import</span> <span class="n">CMake</span><span class="p">,</span> <span class="n">CMakeToolchain</span><span class="p">,</span> <span class="n">CMakeDeps</span>

<span class="k">class</span><span class="w"> </span><span class="nc">App</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span>
    <span class="n">requires</span> <span class="o">=</span> <span class="s2">&quot;hello/0.1&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]}</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;fPIC&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">CMakeToolchain</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">tc</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
        <span class="n">deps</span> <span class="o">=</span> <span class="n">CMakeDeps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">deps</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Note:</strong> This helper includes the additional flag <cite>-DCMAKE_SH=”CMAKE_SH-NOTFOUND”</cite> when using the <cite>MinGW Makefiles</cite> CMake’s
generator, to avoid the error of <cite>sh</cite> being in the PATH (CMake version &lt; 3.17.0).</p>
<p>It supports the following methods:</p>
<section id="id3">
<h3>constructor<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conanfile</span><span class="p">,</span> <span class="n">build_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">conanfile</span></code>: the current recipe object. Always use <code class="docutils literal notranslate"><span class="pre">self</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_folder</span></code>: Relative path to a folder to contain the temporary build files</p></li>
</ul>
</section>
<section id="configure">
<h3>configure()<a class="headerlink" href="#configure" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>Calls <code class="docutils literal notranslate"><span class="pre">cmake</span></code>, with the generator defined in the <code class="docutils literal notranslate"><span class="pre">cmake_generator</span></code> field of the
<code class="docutils literal notranslate"><span class="pre">conanbuild.json</span></code> file, and passing <code class="docutils literal notranslate"><span class="pre">-DCMAKE_TOOLCHAIN_FILE=conan_toolchain.cmake</span></code>.
If <code class="docutils literal notranslate"><span class="pre">conanbuild.json</span></code> file is not there, no generator will be passed.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source_folder</span></code>: Relative path to the folder containing the root <em>CMakeLists.txt</em></p></li>
</ul>
</section>
<section id="build">
<h3>build()<a class="headerlink" href="#build" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>Calls the build system. Equivalent to <strong class="command">cmake --build .</strong> in the build folder.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build_type</span></code>: Use it only to override the value defined in the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code> for a multi-configuration generator (e.g. Visual Studio, XCode).
This value will be ignored for single-configuration generators, they will use the one defined in the toolchain file during the install step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code>: name of the build target to run.</p></li>
</ul>
</section>
<section id="install">
<h3>install()<a class="headerlink" href="#install" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</pre></div>
</div>
<p>Equivalent to run <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--target=install</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build_type</span></code>: Use it only to override the value defined in the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code>. It
can fail if the build is single configuration (e.g. Unix Makefiles), as in that case the build
type must be specified at configure time, not build type.</p></li>
</ul>
</section>
<section id="test">
<h3>test()<a class="headerlink" href="#test" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_on_failure</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</pre></div>
</div>
<p>Equivalent to running <strong class="command">cmake --build . --target=RUN_TESTS</strong>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build_type</span></code>: Use it only to override the value defined in the <code class="docutils literal notranslate"><span class="pre">settings.build_type</span></code>. It
can fail if the build is single configuration (e.g. Unix Makefiles), as in that case the build
type must be specified at configure time, not build type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code>: name of the build target to run, by default <code class="docutils literal notranslate"><span class="pre">RUN_TESTS</span></code> or <code class="docutils literal notranslate"><span class="pre">test</span></code>.</p></li>
</ul>
</section>
<section id="conf">
<h3>conf<a class="headerlink" href="#conf" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tools.microsoft.msbuild:verbosity</span></code> will accept one of <code class="docutils literal notranslate"><span class="pre">&quot;Quiet&quot;,</span> <span class="pre">&quot;Minimal&quot;,</span> <span class="pre">&quot;Normal&quot;,</span> <span class="pre">&quot;Detailed&quot;,</span> <span class="pre">&quot;Diagnostic&quot;</span></code> to be passed
to the <code class="docutils literal notranslate"><span class="pre">CMake.build()</span></code> command, when a Visual Studio generator (MSBuild build system) is being used for CMake. It is passed as
an argument to the underlying build system via the call <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">.</span> <span class="pre">--config</span> <span class="pre">Release</span> <span class="pre">--</span> <span class="pre">/verbosity:Diagnostic</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.ninja:jobs</span></code> argument for the <code class="docutils literal notranslate"><span class="pre">--jobs</span></code> parameter when running Ninja generator. (overrides
the general <code class="docutils literal notranslate"><span class="pre">tools.build:processes</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools.microsoft.msbuild:max_cpu_count</span></code> argument for the <code class="docutils literal notranslate"><span class="pre">/m</span></code> (<code class="docutils literal notranslate"><span class="pre">/maxCpuCount</span></code>) when running
<code class="docutils literal notranslate"><span class="pre">MSBuild</span></code> (overrides the general <code class="docutils literal notranslate"><span class="pre">tools.build:processes</span></code>).</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tools.html" class="btn btn-neutral float-left" title="tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gnu.html" class="btn btn-neutral float-right" title="conan.tools.gnu" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2020, JFrog.
      <span class="lastupdated">Last updated on Sep 29, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.36
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.36/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>