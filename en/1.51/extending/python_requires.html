<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python requires &mdash; conan 1.51.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/extending/python_requires.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=10118182"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python requires (legacy)" href="python_requires_legacy.html" />
    <link rel="prev" title="Customizing settings" href="custom_settings.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.51
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../extending.html">Extending Conan</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="custom_settings.html">Customizing settings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python requires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extending-base-classes">Extending base classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reusing-files">Reusing files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packageid">PackageID</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resolution-of-python-requires">Resolution of python-requires</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python_requires_legacy.html">Python requires (legacy)</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_build_helper.html">Creating a custom build helper for Conan</a></li>
<li class="toctree-l2"><a class="reference internal" href="hooks.html">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="template_system.html">Template system</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  üìñ The complete Conan 2 training is now available for free on
                  JFrog Academy: <a
                  href="https://academy.jfrog.com/path/conan-cc-package-manager?utm_source=Conan+Docs"
                  target="_blank">Essentials</a> and <a
                  href="https://academy.jfrog.com/path/conan-2-advanced?utm_source=Conan+Docs"
                  target="_blank">Advanced</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../extending.html">Extending Conan</a></li>
      <li class="breadcrumb-item active">Python requires</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-requires">
<span id="id1"></span><h1>Python requires<a class="headerlink" href="#python-requires" title="Link to this heading">ÔÉÅ</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an <strong>experimental</strong> feature subject to breaking changes in future releases.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This syntax supersedes the <a class="reference internal" href="python_requires_legacy.html#python-requires-legacy"><span class="std std-ref">legacy python_requires()</span></a> syntax.
The most important changes are:</p>
<ul class="simple">
<li><p>These new python_requires affect the consumers <code class="docutils literal notranslate"><span class="pre">package_id</span></code>. So different binaries can
be managed, and CI systems can re-build affected packages according to package ID modes and
versioning policies.</p></li>
<li><p>The syntax defines a <em>class attribute</em> instead of a module function call, so recipes are
cleaner and more aligned with other types of requirements.</p></li>
<li><p>The new python_requires will play better with lockfiles and deterministic dependency graphs.</p></li>
<li><p>They are able to extend base classes more naturally without conflicts of ConanFile classes.</p></li>
</ul>
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">ÔÉÅ</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">python_requires</span></code> feature is a very convenient way to share files and code between
different recipes. A python requires is similar to any other recipe, it is the way it is
required from the consumer what makes the difference.</p>
<p>A very simple recipe that we want to reuse could be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="n">myvar</span> <span class="o">=</span> <span class="mi">123</span>

<span class="k">def</span><span class="w"> </span><span class="nf">myfunct</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">234</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>And then we will make it available to other packages with <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">export</span></code>. Note that we are
not calling <code class="docutils literal notranslate"><span class="pre">conan</span> <span class="pre">create</span></code>, because this recipe doesn‚Äôt have binaries. It is just the python
code that we want to reuse.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span><span class="nb">export</span><span class="w"> </span>.<span class="w"> </span>pyreq/0.1@user/channel
</pre></div>
</div>
<p>We can reuse the above recipe functionality declaring the dependency in the <code class="docutils literal notranslate"><span class="pre">python_requires</span></code>
attribute and we can access its members using <code class="docutils literal notranslate"><span class="pre">self.python_requires[&quot;&lt;name&gt;&quot;].module</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">python_requires</span> <span class="o">=</span> <span class="s2">&quot;pyreq/0.1@user/channel&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;pyreq&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">myvar</span>  <span class="c1"># v will be 123</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;pyreq&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">myfunct</span><span class="p">()</span>  <span class="c1"># f will be 234</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>pkg/0.1@user/channel
...
pkg/0.1@user/channel:<span class="w"> </span><span class="m">123</span>,<span class="w"> </span><span class="m">234</span>
</pre></div>
</div>
<p>It is also possible to require more than one python-require, and use the package name
to address the functionality:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">python_requires</span> <span class="o">=</span> <span class="s2">&quot;pyreq/0.1@user/channel&quot;</span><span class="p">,</span> <span class="s2">&quot;other/1.2@user/channel&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;pyreq&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">myvar</span>  <span class="c1"># v will be 123</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;other&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">otherfunc</span><span class="p">(</span><span class="s2">&quot;some-args&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="extending-base-classes">
<h2>Extending base classes<a class="headerlink" href="#extending-base-classes" title="Link to this heading">ÔÉÅ</a></h2>
<p>A common use case would be to declare a base class with methods we want to reuse in several
recipes via inheritance. We‚Äôd write this base class in a python-requires package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;My cool source!&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;My cool build!&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;My cool package!&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;My cool package_info!&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PyReq</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pyreq&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
</pre></div>
</div>
<p>And make it available for reuse with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span><span class="nb">export</span><span class="w"> </span>.<span class="w"> </span>pyreq/0.1@user/channel
</pre></div>
</div>
<p>Note that there are two classes in the recipe file:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MyBase</span></code> is the one intended for inheritance and doesn‚Äôt extend <code class="docutils literal notranslate"><span class="pre">ConanFile</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyReq</span></code> is the one that defines the current package being exported, it is the recipe
for the reference <code class="docutils literal notranslate"><span class="pre">pyreq/0.1&#64;user/channel</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Once the package with the base class we want to reuse is available we can use it in other
recipes to inherit the functionality from that base class. We‚Äôd need to declare the
<code class="docutils literal notranslate"><span class="pre">python_requires</span></code> as we did before and we‚Äôd need to tell Conan the base classes to use
in the attribute <code class="docutils literal notranslate"><span class="pre">python_requires_extend</span></code>. Here our recipe will inherit from the
class <code class="docutils literal notranslate"><span class="pre">MyBase</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">python_requires</span> <span class="o">=</span> <span class="s2">&quot;pyreq/0.1@user/channel&quot;</span>
    <span class="n">python_requires_extend</span> <span class="o">=</span> <span class="s2">&quot;pyreq.MyBase&quot;</span>
</pre></div>
</div>
<p>The resulting inheritance is equivalent to declare our <code class="docutils literal notranslate"><span class="pre">Pkg</span></code> class as <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Pkg(pyreq.MyBase,</span> <span class="pre">ConanFile)</span></code>.
So creating the package we can see how the methods from the base class are reused:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>create<span class="w"> </span>.<span class="w"> </span>pkg/0.1@user/channel
...
pkg/0.1@user/channel:<span class="w"> </span>My<span class="w"> </span>cool<span class="w"> </span>source!
pkg/0.1@user/channel:<span class="w"> </span>My<span class="w"> </span>cool<span class="w"> </span>build!
pkg/0.1@user/channel:<span class="w"> </span>My<span class="w"> </span>cool<span class="w"> </span>package!
pkg/0.1@user/channel:<span class="w"> </span>My<span class="w"> </span>cool<span class="w"> </span>package_info!
...
</pre></div>
</div>
<p>If there is extra logic needed to extend from a base class, like composing the base class settings
with the current recipe, the <code class="docutils literal notranslate"><span class="pre">init()</span></code> method can be used for it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PkgTest</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">license</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;arch&quot;</span><span class="p">,</span> <span class="c1"># tuple!</span>
    <span class="n">python_requires</span> <span class="o">=</span> <span class="s2">&quot;base/1.1@user/testing&quot;</span>
    <span class="n">python_requires_extend</span> <span class="o">=</span> <span class="s2">&quot;base.MyConanfileBase&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;base&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">MyConanfileBase</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">settings</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span>  <span class="c1"># Note, adding 2 tuples = tuple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">license</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">license</span>  <span class="c1"># License is overwritten</span>
</pre></div>
</div>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">init()</span></code> method visit <a class="reference internal" href="../reference/conanfile/methods.html#method-init"><span class="std std-ref">init()</span></a></p>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">ÔÉÅ</a></h3>
<p>There are a few limitations that should be taken into account:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">version</span></code> fields shouldn‚Äôt be inherited. <code class="docutils literal notranslate"><span class="pre">set_name()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_version()</span></code>
might be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">short_paths</span></code> cannot be inherited from a <code class="docutils literal notranslate"><span class="pre">python_requires</span></code>. Make sure to specify it directly
in the recipes that need the paths shortened in Windows.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exports</span></code>, <code class="docutils literal notranslate"><span class="pre">exports_sources</span></code> shouldn‚Äôt be inherited from a base class, but explictly defined
directly in the recipes. A reusable alternative might be using the <code class="docutils literal notranslate"><span class="pre">SCM</span></code> component.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_policy</span></code> shouldn‚Äôt be inherited from a base class, but explictly defined
directly in the recipes.</p></li>
<li><p>Mixing Python inheritance with <code class="docutils literal notranslate"><span class="pre">python_requires_extend</span></code> should be avoided, because
the inheritance order can be different than the expected one. Multiple level <code class="docutils literal notranslate"><span class="pre">python_requires_extend</span></code>
might be possible, but don‚Äôt mix both approaches (also in general try to avoid
multiple inheritance and multiple level hierarchies, try to keep it simple).</p></li>
</ul>
</section>
</section>
<section id="reusing-files">
<h2>Reusing files<a class="headerlink" href="#reusing-files" title="Link to this heading">ÔÉÅ</a></h2>
<p>It is possible to access the files exported by a recipe that is used with <code class="docutils literal notranslate"><span class="pre">python_requires</span></code>.
We could have this recipe, together with a <em>myfile.txt</em> file containing the ‚ÄúHello‚Äù text.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PyReq</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">exports</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>myfile.txt
$<span class="w"> </span>conan<span class="w"> </span><span class="nb">export</span><span class="w"> </span>.<span class="w"> </span>pyreq/0.1@user/channel
</pre></div>
</div>
<p>Now the recipe has been exported, we can access its path (the place where <em>myfile.txt</em> is) with the
<code class="docutils literal notranslate"><span class="pre">path</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">load</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">python_requires</span> <span class="o">=</span> <span class="s2">&quot;pyreq/0.1@user/channel&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pyreq_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_requires</span><span class="p">[</span><span class="s2">&quot;pyreq&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">path</span>
        <span class="n">myfile_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pyreq_path</span><span class="p">,</span> <span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="n">myfile_path</span><span class="p">)</span>  <span class="c1"># content = &quot;Hello&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="c1"># we could also copy the file, instead of reading it</span>
</pre></div>
</div>
<p>Note that only <code class="docutils literal notranslate"><span class="pre">exports</span></code> work for this case, but not <code class="docutils literal notranslate"><span class="pre">exports_sources</span></code>.</p>
</section>
<section id="packageid">
<h2>PackageID<a class="headerlink" href="#packageid" title="Link to this heading">ÔÉÅ</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">python-requires</span></code> will affect the <code class="docutils literal notranslate"><span class="pre">package_id</span></code> of the packages using those dependencies.
By default, the policy is <code class="docutils literal notranslate"><span class="pre">minor_mode</span></code>, which means:</p>
<ul class="simple">
<li><p>Changes to the <strong>patch</strong> version of a python-require will not affect the package ID. So depending
on <code class="docutils literal notranslate"><span class="pre">&quot;pyreq/1.2.3&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;pyreq/1.2.4&quot;</span></code> will result in identical package ID (both will be mapped
to <code class="docutils literal notranslate"><span class="pre">&quot;pyreq/1.2.Z&quot;</span></code> in the hash computation). Bump the patch version if you want to change your
common code, but you don‚Äôt want the consumers to be affected or to fire a re-build of the dependants.</p></li>
<li><p>Changes to the <strong>minor</strong> or <strong>major</strong> version will produce a different package ID. So if you depend
on <code class="docutils literal notranslate"><span class="pre">&quot;pyreq/1.2.3&quot;</span></code>, and you bump the version to <code class="docutils literal notranslate"><span class="pre">&quot;pyreq/1.3.0&quot;</span></code>, then, you will need to build
new binaries that are using that new python-require. Bump the minor or major version if you want to
make sure that packages requiring this python-require will be built using these changes in the code.</p></li>
<li><p>Both changing the <strong>minor</strong> and <strong>major</strong> requires a new package ID, and then a build from source.
You could use changes in the <strong>minor</strong> to indicate that it should be source compatible, and consumers
wouldn‚Äôt need to do changes, and changes in the <strong>major</strong> for source incompatible changes.</p></li>
</ul>
<p>As with the regular <code class="docutils literal notranslate"><span class="pre">requires</span></code>, this default can be customized. First you can customize it at attribute
global level, modifying the <em>conan.conf</em> <code class="docutils literal notranslate"><span class="pre">[general]</span></code> variable <code class="docutils literal notranslate"><span class="pre">default_python_requires_id_mode</span></code>, which can take the values
<code class="docutils literal notranslate"><span class="pre">unrelated_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">semver_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">patch_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">minor_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">major_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">full_version_mode</span></code>,
<code class="docutils literal notranslate"><span class="pre">full_recipe_mode</span></code> and <code class="docutils literal notranslate"><span class="pre">recipe_revision_mode</span></code>.</p>
<p>For example, if you want to make the package IDs never be affected by any change in the versions of
python-requires, you could do:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><em>conan.conf</em> configuration file</span><a class="headerlink" href="#id2" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[general]
default_python_requires_id_mode=unrelated_mode
</pre></div>
</div>
</div>
<p>Read more about these modes in <a class="reference internal" href="../creating_packages/define_abi_compatibility.html#package-id-mode"><span class="std std-ref">Using package_id() for Package Dependencies</span></a>.</p>
<p>It is also possible to customize the effect of <code class="docutils literal notranslate"><span class="pre">python_requires</span></code> per package, using the <code class="docutils literal notranslate"><span class="pre">package_id()</span></code>
method:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conans</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">python_requires</span> <span class="o">=</span><span class="s2">&quot;pyreq/[&gt;=1.0]&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">package_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">python_requires</span><span class="o">.</span><span class="n">patch_mode</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="resolution-of-python-requires">
<h2>Resolution of python-requires<a class="headerlink" href="#resolution-of-python-requires" title="Link to this heading">ÔÉÅ</a></h2>
<p>There are few things that should be taken into account when using <code class="docutils literal notranslate"><span class="pre">python-requires</span></code>:</p>
<ul class="simple">
<li><p>Python requires recipes are loaded by the interpreter just once, and they are common to
all consumers. Do not use any global state in the <code class="docutils literal notranslate"><span class="pre">python-requires</span></code> recipes.</p></li>
<li><p>Python requires are private to the consumers. They are not transitive. Different consumers
can require different versions of the same python-require.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> can use version ranges expressions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> can <code class="docutils literal notranslate"><span class="pre">python-require</span></code> other recipes too, but this should probably be limited
to very few cases, we recommend to use the simplest possible structure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> can conflict if they require other recipes and create conflicts in different
versions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> cannot use regular <code class="docutils literal notranslate"><span class="pre">requires</span></code> or <code class="docutils literal notranslate"><span class="pre">tool_requires</span></code>.</p></li>
<li><p>It is possible to use <code class="docutils literal notranslate"><span class="pre">python-requires</span></code> without user and channel.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> can use native python <code class="docutils literal notranslate"><span class="pre">import</span></code> to other python files, as long as these are
exported together with the recipe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> should not create packages, but use <code class="docutils literal notranslate"><span class="pre">export</span></code> only.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> can be used as editable packages too.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python-requires</span></code> are locked in lockfiles.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="custom_settings.html" class="btn btn-neutral float-left" title="Customizing settings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="python_requires_legacy.html" class="btn btn-neutral float-right" title="Python requires (legacy)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, JFrog.
      <span class="lastupdated">Last updated on Feb 25, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.51
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.26/index.html">2.26</a></dd>
        
    
        
            <dd><a href="/2.25/index.html">2.25</a></dd>
        
    
        
            <dd><a href="/2.24/index.html">2.24</a></dd>
        
    
        
            <dd><a href="/2.23/index.html">2.23</a></dd>
        
    
        
            <dd><a href="/2.22/index.html">2.22</a></dd>
        
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.51/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>