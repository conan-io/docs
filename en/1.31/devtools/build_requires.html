<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build requirements &mdash; conan 1.31.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/en/latest/devtools/build_requires.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=b50c9913"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Versioning" href="../versioning.html" />
    <link rel="prev" title="Creating conan packages to install dev tools" href="create_installer_packages.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.31
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../devtools.html">Package apps and devtools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="running_packages.html">Running and deploying packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_installer_packages.html">Creating conan packages to install dev tools</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#declaring-build-requirements">Declaring build requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-and-host-contexts">Build and Host contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#properties-of-build-requirements">Properties of build requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-testing-framework-and-build-tool">Example: testing framework and build tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conan_v2.html">Road to Conan 2.0</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  üìñ The complete Conan 2 training is now available for free on
                  JFrog Academy: <a
                  href="https://academy.jfrog.com/path/conan-cc-package-manager?utm_source=Conan+Docs"
                  target="_blank">Essentials</a> and <a
                  href="https://academy.jfrog.com/path/conan-2-advanced?utm_source=Conan+Docs"
                  target="_blank">Advanced</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../devtools.html">Package apps and devtools</a></li>
      <li class="breadcrumb-item active">Build requirements</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="build-requirements">
<span id="build-requires"></span><h1>Build requirements<a class="headerlink" href="#build-requirements" title="Link to this heading">ÔÉÅ</a></h1>
<p>There are some requirements that don‚Äôt feel natural to add to a package recipe. For example, imagine that you had a <code class="docutils literal notranslate"><span class="pre">cmake/3.4</span></code> package in
Conan. Would you add it as a requirement to the <code class="docutils literal notranslate"><span class="pre">zlib</span></code> package, so it will install cmake first in order to build <code class="docutils literal notranslate"><span class="pre">zlib</span></code>?</p>
<p>In short:</p>
<ul class="simple">
<li><p>There are requirements that are only needed when you need to build a package from sources, but if the binary package already exists, you
don‚Äôt want to install or retrieve them.</p></li>
<li><p>These could be dev tools, compilers, build systems, code analyzers, testing libraries, etc.</p></li>
<li><p>They can be very orthogonal to the creation of the package. It doesn‚Äôt matter whether you build zlib with CMake 3.4, 3.5 or 3.6. As long
as the <em>CMakeLists.txt</em> is compatible, it will produce the same final package.</p></li>
<li><p>You don‚Äôt want to add a lot of different versions (like those of CMake) to be able to use them to build the package. You want to easily
change the requirements, without needing to edit the zlib package recipe.</p></li>
<li><p>Some of them might not even be taken into account when a package like zlib is created, such as cross-compiling it to Android (in which
the Android toolchain would be a build requirement too).</p></li>
</ul>
<p>To address these needs Conan implements <code class="docutils literal notranslate"><span class="pre">build_requires</span></code>.</p>
<section id="declaring-build-requirements">
<h2>Declaring build requirements<a class="headerlink" href="#declaring-build-requirements" title="Link to this heading">ÔÉÅ</a></h2>
<p>Build requirements can be declared in profiles, like:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">my_profile</span><a class="headerlink" href="#id1" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">[build_requires]</span>
<span class="w"> </span><span class="na">tool1/0.1@user/channel</span>
<span class="w"> </span><span class="na">tool2/0.1@user/channel, tool3/0.1@user/channel</span>
<span class="w"> </span><span class="na">*</span><span class="o">:</span><span class="w"> </span><span class="s">tool4/0.1@user/channel</span>
<span class="w"> </span><span class="na">my_pkg*</span><span class="o">:</span><span class="w"> </span><span class="s">tool5/0.1@user/channel</span>
<span class="w"> </span><span class="na">&amp;</span><span class="o">:</span><span class="w"> </span><span class="s">tool6/0.1@user/channel</span>
<span class="w"> </span><span class="na">&amp;!</span><span class="o">:</span><span class="w"> </span><span class="s">tool7/0.1@user/channel</span>
</pre></div>
</div>
</div>
<p>Build requirements are specified by a <code class="docutils literal notranslate"><span class="pre">pattern:</span></code>. If such pattern is not specified, it will be assumed to be <code class="docutils literal notranslate"><span class="pre">*</span></code>, i.e. to apply to all
packages. Packages can be declared in different lines or by a comma separated list. In this example, <code class="docutils literal notranslate"><span class="pre">tool1</span></code>, <code class="docutils literal notranslate"><span class="pre">tool2</span></code>, <code class="docutils literal notranslate"><span class="pre">tool3</span></code> and
<code class="docutils literal notranslate"><span class="pre">tool4</span></code> will be used for all packages in the dependency graph (while running <strong class="command">conan install</strong> or <strong class="command">conan create</strong>).</p>
<p>If a pattern like <code class="docutils literal notranslate"><span class="pre">my_pkg*</span></code> is specified, the declared build requirements will only be applied to packages matching that pattern: <code class="docutils literal notranslate"><span class="pre">tool5</span></code>
will not be applied to Zlib for example, but it will be applied to <code class="docutils literal notranslate"><span class="pre">my_pkg_zlib</span></code>.</p>
<p>The special case of a <strong>consumer</strong> conanfile (without name or version) it is impossible to match with a pattern, so it is handled with the
special character <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code> means apply these build requirements to the consumer conanfile</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;!</span></code> means apply the build requirements to all packages except the consumer one.</p></li>
</ul>
<p>Remember that the consumer conanfile is the one inside the <em>test_package</em> folder or the one referenced in the <strong class="command">conan install</strong>
command.</p>
<p>Build requirements can also be specified in a package recipe, with the <code class="docutils literal notranslate"><span class="pre">build_requires</span></code> attribute and the <code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyPkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">build_requires</span> <span class="o">=</span> <span class="s2">&quot;tool_a/0.2@user/testing&quot;</span><span class="p">,</span> <span class="s2">&quot;tool_b/0.2@user/testing&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># useful for example for conditional build_requires</span>
        <span class="c1"># This means, if we are running on a Windows machine, require ToolWin</span>
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_requires</span><span class="p">(</span><span class="s2">&quot;tool_win/0.1@user/stable&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above <code class="docutils literal notranslate"><span class="pre">tool_a</span></code> and <code class="docutils literal notranslate"><span class="pre">tool_b</span></code> will always be retrieved and used for building this recipe, while the <code class="docutils literal notranslate"><span class="pre">tool_win</span></code> one will only be used
only in Windows.</p>
<p>If any build requirement defined inside <code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code> has the same package name as the one defined in the <code class="docutils literal notranslate"><span class="pre">build_requires</span></code>
attribute, the one inside the <code class="docutils literal notranslate"><span class="pre">build_requirements()</span></code> method will prevail.</p>
<p>As a rule of thumb, downstream defined values always override upstream dependency values. If some build requirement is defined in the
profile, it will overwrite the build requirements defined in package recipes that have the same package name.</p>
</section>
<section id="build-and-host-contexts">
<span id="build-requires-context"></span><h2>Build and Host contexts<a class="headerlink" href="#build-and-host-contexts" title="Link to this heading">ÔÉÅ</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section refers to the <strong>experimental feature</strong> that is activated when using <code class="docutils literal notranslate"><span class="pre">--profile:build</span></code> and <code class="docutils literal notranslate"><span class="pre">--profile:host</span></code>
in the command-line. It is currently under development, features can be added or removed in the following versions.</p>
</div>
<p>Conan v1.24 differentiates between the <code class="docutils literal notranslate"><span class="pre">build</span></code> context and the <code class="docutils literal notranslate"><span class="pre">host</span></code> context in the dependency graph (read more about
the meaning of <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">build</span></code> platforms in the <a class="reference internal" href="../systems_cross_building/cross_building.html#cross-building"><span class="std std-ref">cross building</span></a> section) <strong>when the user
supplies two profiles</strong> to the command line using the <code class="docutils literal notranslate"><span class="pre">--profile:build</span></code> and <code class="docutils literal notranslate"><span class="pre">--profile:host</span></code> arguments:</p>
<ul class="simple">
<li><p>The <strong>host context</strong> is populated with the root package (the one specified in the <strong class="command">conan install</strong> or <strong class="command">conan create</strong> command),
all its requirements and the build requirements forced to be in the host context.</p></li>
<li><p>The <strong>build context</strong> contains the rest of  build requirements and all of them in the profiles. This category typically
includes all the <a class="reference internal" href="create_installer_packages.html#create-installer-packages"><span class="std std-ref">dev tools</span></a> like CMake, compilers, linkers,‚Ä¶</p></li>
</ul>
<p>Build requirements declared in the recipes can be forced to stay in the host context, this is needed for testing libraries that will
be linked to the generated library or other executable we want to deploy to the <code class="docutils literal notranslate"><span class="pre">host</span></code> platform, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyPkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">build_requires</span> <span class="o">=</span> <span class="s2">&quot;nasm/2.14&quot;</span>  <span class="c1"># &#39;build&#39; context (nasm.exe will be available)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_requires</span><span class="p">(</span><span class="s2">&quot;protobuf/3.6.1&quot;</span><span class="p">)</span>  <span class="c1"># &#39;build&#39; context (protoc.exe will be available)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_requires</span><span class="p">(</span><span class="s2">&quot;gtest/0.1&quot;</span><span class="p">,</span> <span class="n">force_host_context</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># &#39;host&#39; context (our library will link with it)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/conan-cross-build-variables.png"><img alt="../_images/conan-cross-build-variables.png" class="align-center" src="../_images/conan-cross-build-variables.png" style="width: 500px;" /></a>
<p>Take into account that the same package (executable or library) can appear two times in the graph, in the <code class="docutils literal notranslate"><span class="pre">host</span></code> and
in the <code class="docutils literal notranslate"><span class="pre">build</span></code> context, with different package IDs. Conan will propagate the proper information to the consumers:</p>
<ul>
<li><p>Build requirements in the <code class="docutils literal notranslate"><span class="pre">host</span></code> context will propagate like any other requirement:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cpp_info</span></code>: all information will be available in the <code class="docutils literal notranslate"><span class="pre">deps_cpp_info[&quot;xxx&quot;]</span></code> object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_info</span></code>: won‚Äôt be propagated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">user_info</span></code>: will be available using the <code class="docutils literal notranslate"><span class="pre">deps_user_info[&quot;xxx&quot;]</span></code> object.</p></li>
</ul>
</li>
<li><p>Build requirements in the <code class="docutils literal notranslate"><span class="pre">build</span></code> context will propagate all the <code class="docutils literal notranslate"><span class="pre">env_info</span></code> and Conan will also populate the
environment variables <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> and <code class="docutils literal notranslate"><span class="pre">PATH</span></code> with the corresponding information from
the <code class="docutils literal notranslate"><span class="pre">cpp_info</span></code> object. All this information will be available in the <code class="docutils literal notranslate"><span class="pre">deps_env_info</span></code> object.</p>
<p>Custom information declared in the <code class="docutils literal notranslate"><span class="pre">user_info</span></code> attribute will be available in the <code class="docutils literal notranslate"><span class="pre">user_info_build[&quot;xxx&quot;]</span></code> object
in the consumer <em>conanfile</em>.</p>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">--profile:build</span></code> is provided, all build requirements will belong to the one and only context and they will share
their dependencies with the libraries we are building. In this scenario all the build requirements propagate <code class="docutils literal notranslate"><span class="pre">user_info</span></code>,
<code class="docutils literal notranslate"><span class="pre">cpp_info</span></code> and <code class="docutils literal notranslate"><span class="pre">env_info</span></code> to the consumer‚Äôs <code class="docutils literal notranslate"><span class="pre">deps_user_info</span></code>, <code class="docutils literal notranslate"><span class="pre">deps_cpp_info</span></code> and <code class="docutils literal notranslate"><span class="pre">deps_env_info</span></code>.</p>
</div>
</section>
<section id="properties-of-build-requirements">
<h2>Properties of build requirements<a class="headerlink" href="#properties-of-build-requirements" title="Link to this heading">ÔÉÅ</a></h2>
<p>The behavior of <code class="docutils literal notranslate"><span class="pre">build_requires</span></code> is the same irrespective if they are defined in the profile or if defined in the package recipe.</p>
<ul class="simple">
<li><p>They will only be retrieved and installed if some package that has to be built from sources and matches the declared pattern. Otherwise,
they will not even be checked for existence.</p></li>
<li><p>Options and environment variables declared in the profile as well as in the command line will affect the build requirements for packages.
In that way, you can define, for example, for the <code class="docutils literal notranslate"><span class="pre">cmake/3.16.3</span></code> package which CMake version will be installed.</p></li>
<li><p>Build requirements will be activated for matching packages, see the section above about <a class="reference internal" href="#build-requires-context"><span class="std std-ref">build requires context</span></a>
to know the information that this package will propagate to its consumers.</p></li>
<li><p>Build requirements can also be transitive. They can declare their own requirements, both normal requirements and their own build
requirements. Normal logic for dependency graph resolution applies, such as conflict resolution and dependency overriding.</p></li>
<li><p>Each matching pattern will produce a different dependency graph of build requirements. These graphs are cached so that they are only
computed once. If a build requirement applies to different packages with the same configuration it will only be installed once (same
behavior as normal dependencies - once they are cached locally, there is no need to retrieve or build them again).</p></li>
<li><p>Build requirements do not affect the binary package ID. If using a different build requirement produces a different binary, you should
consider adding an option or a setting to model that (if not already modeled).</p></li>
<li><p>Can also use version-ranges, like <code class="docutils literal notranslate"><span class="pre">Tool/[&gt;0.3]&#64;user/channel</span></code>.</p></li>
<li><p>Build requirements are not listed in <strong class="command">conan info</strong> nor are represented in the graph (with <strong class="command">conan info --graph</strong>).</p></li>
</ul>
</section>
<section id="example-testing-framework-and-build-tool">
<h2>Example: testing framework and build tool<a class="headerlink" href="#example-testing-framework-and-build-tool" title="Link to this heading">ÔÉÅ</a></h2>
<p>One example of build requirement is a testing framework implemented as a library, another good example is a build tool used
in the compile process. Let‚Äôs call them <code class="docutils literal notranslate"><span class="pre">mytest_framework</span></code> and <code class="docutils literal notranslate"><span class="pre">cmake_turbo</span></code>, and imagine we already have a package available
for both of them.</p>
<p>Build requirements can be checked for existence (whether they‚Äôve been applied) in the recipes, which can be useful for conditional logic in
the recipes. In this example, we could have one recipe with the following <code class="docutils literal notranslate"><span class="pre">build()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">build_requirements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">enable_testing</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_requires</span><span class="p">(</span><span class="s2">&quot;mytest_framework/0.1@user/channel&quot;</span><span class="p">,</span> <span class="n">force_host_context</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Use our own &#39;cmake_turbo&#39; if it is available</span>
    <span class="n">use_cmake_turbo</span> <span class="o">=</span> <span class="s2">&quot;cmake_turbo&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">deps_env_info</span><span class="o">.</span><span class="n">deps</span>
    <span class="n">cmake_executable</span> <span class="o">=</span> <span class="s2">&quot;cmake_turbo&quot;</span> <span class="k">if</span> <span class="n">use_cmake_turbo</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmake_program</span><span class="o">=</span><span class="n">cmake_executable</span><span class="p">)</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">defs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ENABLE_TESTING&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">enable_testing</span><span class="p">})</span>
    <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">enable_testing</span><span class="p">:</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
</pre></div>
</div>
<p>And the package <em>CMakeLists.txt</em>:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">PackageTest</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.8.12</span><span class="p">)</span>

<span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/conanbuildinfo.cmake</span><span class="p">)</span>
<span class="nb">conan_basic_setup</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">ENABLE_TESTING</span><span class="p">)</span>
<span class="w">    </span><span class="nb">add_executable</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">test.cpp</span><span class="p">)</span>
<span class="w">    </span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="o">${</span><span class="nv">CONAN_LIBS</span><span class="o">}</span><span class="p">)</span>

<span class="w">    </span><span class="nb">enable_testing</span><span class="p">()</span>
<span class="w">    </span><span class="nb">add_test</span><span class="p">(</span><span class="s">NAME</span><span class="w"> </span><span class="s">example</span>
<span class="w">              </span><span class="s">WORKING_DIRECTORY</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/bin</span>
<span class="w">              </span><span class="s">COMMAND</span><span class="w"> </span><span class="s">example</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>This package recipe won‚Äôt retrieve the <code class="docutils literal notranslate"><span class="pre">cmake_turbo</span></code> package for normal installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>But if the following profile is defined:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">use_cmake_turbo_profile</span><a class="headerlink" href="#id2" title="Link to this code">ÔÉÅ</a></div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">[build_requires]</span>
<span class="w"> </span><span class="na">cmake_turbo/0.1@user/channel</span>
</pre></div>
</div>
</div>
<p>then the install command will retrieve the <code class="docutils literal notranslate"><span class="pre">cmake_turbo</span></code> and use it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--profile<span class="o">=</span>use_cmake_turbo_profile
</pre></div>
</div>
<p>Although the previous line would work it is preferred to use the feature from Conan v1.24 and provide
two profiles to the command line, that way the build requirements in the <code class="docutils literal notranslate"><span class="pre">build</span></code> context won‚Äôt
interfer with the <code class="docutils literal notranslate"><span class="pre">host</span></code> graph if they share common requirements (see <a class="reference internal" href="create_installer_packages.html#create-installer-packages"><span class="std std-ref">section about dev tools</span></a>).
It can also be needed if cross compiling (see <a class="reference internal" href="../systems_cross_building/cross_building.html#cross-building-build-requires"><span class="std std-ref">section about cross compiling</span></a>).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conan<span class="w"> </span>install<span class="w"> </span>.<span class="w"> </span>--profile:host<span class="o">=</span>use_cmake_turbo_profile<span class="w"> </span>--profile:build<span class="o">=</span>build_machine
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="create_installer_packages.html" class="btn btn-neutral float-left" title="Creating conan packages to install dev tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../versioning.html" class="btn btn-neutral float-right" title="Versioning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2020, JFrog.
      <span class="lastupdated">Last updated on Feb 25, 2026.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.31
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.26/index.html">2.26</a></dd>
        
    
        
            <dd><a href="/2.25/index.html">2.25</a></dd>
        
    
        
            <dd><a href="/2.24/index.html">2.24</a></dd>
        
    
        
            <dd><a href="/2.23/index.html">2.23</a></dd>
        
    
        
            <dd><a href="/2.22/index.html">2.22</a></dd>
        
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.31/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>