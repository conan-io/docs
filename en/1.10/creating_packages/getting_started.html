



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; conan 1.10.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  


  
    <link rel="stylesheet" href="../_static/css/signup.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../_static/css/search.css" type="text/css" />
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="conan 1.10.2 documentation" href="../index.html"/>
        <link rel="up" title="Creating Packages" href="../creating_packages.html"/>
        <link rel="next" title="Recipe and Sources in a Different Repo" href="external_repo.html"/>
        <link rel="prev" title="Creating Packages" href="../creating_packages.html"/>

 <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-WK44ZFM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-WK44ZFM');
</script>


</script>


  

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://conan.io">
          

          
            
            <img src="../_static/conan_logo.png" class="logo" />
          
          </a>

            

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_packages.html">Using packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../creating_packages.html">Creating Packages</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-package-recipe">Creating the Package Recipe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-test-package-folder">The test_package Folder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-and-testing-packages">Creating and Testing Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#settings-vs-options">Settings vs. Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="external_repo.html">Recipe and Sources in a Different Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_repo.html">Recipe and Sources in the Same Repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="existing_binaries.html">Packaging Existing Binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="understand_packaging.html">Understanding Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="define_abi_compatibility.html">Defining Package ABI Compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspecting_packages.html">Inspecting Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_approaches.html">Packaging Approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="package_tools.html">Package Creator Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing_packages.html">Developing Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos.html">Howtos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
          <div class="dark_newsletter-div">
             <p>Sign up for release updates:</p>
              <script src="https://app-lon04.marketo.com/js/forms2/js/forms2.min.js"></script>
              <form id="mktoForm_1479"></form>
              <script>MktoForms2.loadForm("https://app-lon04.marketo.com", "256-FNZ-187", 1479);</script>
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conan</a>
        
      </nav>


      
      <script>
        var reldir = "../index.html".replace("index.html","").replace("#", "");
      </script>
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation" id="breadcrumbs">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../creating_packages.html">Creating Packages</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/conan-io/docs/blob/master/creating_packages/getting_started.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
</div>
          <!--<select id="search" name="state" multiple="true" onchange="window.location = reldir + this.value;" style="width:90%"></select>
          <hr/>-->

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="packaging-getting-started"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>To start learning about creating packages, we will create a package from the existing source code
repository: <a class="reference external" href="https://github.com/memsharded/hello">https://github.com/memsharded/hello</a>. You can check that project, it is a very simple
“hello world” C++ library, using CMake as the build system to build a library and an executable. It does not contain
any association with Conan.</p>
<p>We are using a similar GitHub repository as an example, but the same process also applies to other source
code origins, like downloading a zip or tarball from the internet.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For this concrete example you will need, besides a C++ compiler, both <em>CMake</em> and <em>git</em>
installed and in your path. They are not required by conan, so you could use your own build system
and version control instead.</p>
</div>
<div class="section" id="creating-the-package-recipe">
<h2>Creating the Package Recipe<a class="headerlink" href="#creating-the-package-recipe" title="Permalink to this headline">¶</a></h2>
<p>First, let’s create a folder for our package recipe, and use the <strong class="command">conan new</strong> helper command that
will create a working package recipe for us:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir mypkg <span class="o">&amp;&amp;</span> <span class="nb">cd</span> mypkg
$ conan new Hello/0.1 -t
</pre></div>
</div>
<p>This will generate the following files:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>conanfile.py
test_package
  CMakeLists.txt
  conanfile.py
  example.cpp
</pre></div>
</div>
<p>On the root level, there is a <em>conanfile.py</em> which is the main recipe file, responsible for
defining our package. Also, there is a <em>test_package</em> folder, which contains a simple example
consuming project that will require and link with the created package. It is useful to make sure
that our package is correctly created.</p>
<p>Let’s have a look at the root package recipe <em>conanfile.py</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span><span class="p">,</span> <span class="n">tools</span>

<span class="k">class</span> <span class="nc">HelloConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">license</span> <span class="o">=</span> <span class="s2">&quot;&lt;Put the package license here&gt;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;&lt;Package recipe repository url here, for issues about the package&gt;&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&lt;Description of Hello here&gt;&quot;</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]}</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;shared&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;cmake&quot;</span>

    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;git clone https://github.com/memsharded/hello.git&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;cd hello &amp;&amp; git checkout static_shared&quot;</span><span class="p">)</span>
        <span class="c1"># This small hack might be useful to guarantee proper /MT /MD linkage</span>
        <span class="c1"># in MSVC if the packaged project doesn&#39;t have variables to set it</span>
        <span class="c1"># properly</span>
        <span class="n">tools</span><span class="o">.</span><span class="n">replace_in_file</span><span class="p">(</span><span class="s2">&quot;hello/CMakeLists.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;PROJECT(MyHello)&quot;</span><span class="p">,</span>
                              <span class="sd">&#39;&#39;&#39;PROJECT(MyHello)</span>
<span class="sd">include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)</span>
<span class="sd">conan_basic_setup()&#39;&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">source_folder</span><span class="o">=</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

        <span class="c1"># Explicit way:</span>
        <span class="c1"># self.run(&#39;cmake %s/hello %s&#39;</span>
        <span class="c1">#          % (self.source_folder, cmake.command_line))</span>
        <span class="c1"># self.run(&quot;cmake --build . %s&quot; % cmake.build_config)</span>

    <span class="k">def</span> <span class="nf">package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.h&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;include&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*hello.lib&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.dll&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.so&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.dylib&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.a&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>This is a complete package recipe. Without going into detail, these are the
basics:</p>
<ul>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">settings</span></code> field defines the configuration of the different binary packages. In
this example, we defined that any change to the OS, compiler, architecture or build type will
generate a different binary package. Please note that Conan generates different binary packages for
different introduced configuration (in this case settings) for the same recipe.</p>
<p>Note that the platform on which the recipe is running and the package being built differ from
the final platform where the code will be running (<code class="docutils literal notranslate"><span class="pre">self.settings.os</span></code> and <code class="docutils literal notranslate"><span class="pre">self.settings.arch</span></code>) if
the package is being cross-built. So if you want to apply a different build depending on the current
build machine, you need to check it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">source_folder</span><span class="o">=</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">env_build</span> <span class="o">=</span> <span class="n">AutoToolsBuildEnvironment</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">env_build</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">env_build</span><span class="o">.</span><span class="n">make</span><span class="p">()</span>
</pre></div>
</div>
<p>Learn more in the <a class="reference internal" href="../systems_cross_building/cross_building.html#cross-building"><span class="std std-ref">Cross building</span></a> section.</p>
</li>
<li><p class="first">This package recipe is also able to create different binary packages for static and shared
libraries with the <code class="docutils literal notranslate"><span class="pre">shared</span></code> option, which is set by default to <code class="docutils literal notranslate"><span class="pre">False</span></code> (i.e. by default it will use
static linkage).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">source()</span></code> method executes a <strong class="command">git clone</strong> to retrieve the sources from Github. Other
origins, such as downloading a zip file are also available. As you can see, any manipulation of the
code can be done, such as checking out any branch or tag, or patching the source code. In this example,
we are adding two lines to the existing CMake code, to ensure binary compatibility. Don’t worry
about it now, we’ll deal with it later.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">build()</span></code> configures the project, and then proceeds to build it using standard CMake commands. The
<code class="docutils literal notranslate"><span class="pre">CMake</span></code> object just assists to translate the Conan settings to CMake command line
arguments. Please note that <strong>CMake is not strictly required</strong>. You can build packages directly
by invoking <strong>make</strong>, <strong>MSBuild</strong>, <strong>SCons</strong> or any other build system.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Check the <a class="reference internal" href="../reference/build_helpers.html#build-helpers"><span class="std std-ref">existing build helpers</span></a>.</p>
</div>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">package()</span></code> method copies artifacts (headers, libs) from the build folder to the final
package folder.</p>
</li>
<li><p class="first">Finally, the <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method defines that the consumer must link with the “hello” library
when using this package. Other information as include or lib paths can be defined as well. This
information is used for files created by generators to be used by consumers, as
<em>conanbuildinfo.cmake</em>.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When writing your own <em>conanfile.py</em> references, please bear in mind that you should follow the rules in
<a class="reference internal" href="../reference/conanfile.html#conanfile-reference"><span class="std std-ref">conanfile.py</span></a></p>
</div>
</div>
<div class="section" id="the-test-package-folder">
<h2>The test_package Folder<a class="headerlink" href="#the-test-package-folder" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <strong>test_package</strong> differs from the library unit or integration tests, which should be
more comprehensive. These tests are “package” tests, and validate that the package is properly
created, and that the package consumers will be able to link against it and reuse it.</p>
</div>
<p>If you look at the <code class="docutils literal notranslate"><span class="pre">test_package</span></code> folder, you will realize that the <code class="docutils literal notranslate"><span class="pre">example.cpp</span></code> and the
<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> files don’t have unique characteristics. The <em>test_package/conanfile.py</em> file is just
another recipe, that can be perceived as a consumer <em>conanfile.txt</em> that has been displayed in
previous sections:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">conans</span> <span class="kn">import</span> <span class="n">ConanFile</span><span class="p">,</span> <span class="n">CMake</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">HelloTestConan</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;compiler&quot;</span><span class="p">,</span> <span class="s2">&quot;build_type&quot;</span><span class="p">,</span> <span class="s2">&quot;arch&quot;</span>
    <span class="n">generators</span> <span class="o">=</span> <span class="s2">&quot;cmake&quot;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmake</span> <span class="o">=</span> <span class="n">CMake</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="n">cmake</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">imports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.dll&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s2">&quot;*.dylib*&quot;</span><span class="p">,</span> <span class="n">dst</span><span class="o">=</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;lib&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;bin&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;.</span><span class="si">%s</span><span class="s2">example&quot;</span> <span class="o">%</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
</pre></div>
</div>
<p>The <em>conanfile.py</em> described above has the following characteristics:</p>
<ul class="simple">
<li>It doesn’t have a name and version, as we are not creating a package so they are not
necessary.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">package()</span></code> and <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> methods are not required since we are not creating a
package.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">test()</span></code> method specifies which binaries need to run.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">imports()</span></code> method is set to copy the shared libraries to the <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder. When
dynamic linking is applied, and the <code class="docutils literal notranslate"><span class="pre">test()</span></code> method launches the <code class="docutils literal notranslate"><span class="pre">example</span></code> executable, they are
found causing the <code class="docutils literal notranslate"><span class="pre">example</span></code> to run.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An important difference with respect to standard package recipes is that you don’t have
to declare a <code class="docutils literal notranslate"><span class="pre">requires</span></code> attribute to depend on the tested <code class="docutils literal notranslate"><span class="pre">Hello/0.1&#64;demo/testing</span></code> package
as the <code class="docutils literal notranslate"><span class="pre">requires</span></code> will automatically be injected by Conan during the run. However, if you choose to
declare it explicitly, it will work, but you will have to remember to bump the version,
and possibly also the user and channel if you decide to change them.</p>
</div>
</div>
<div class="section" id="creating-and-testing-packages">
<span id="id1"></span><h2>Creating and Testing Packages<a class="headerlink" href="#creating-and-testing-packages" title="Permalink to this headline">¶</a></h2>
<p>You can create and test the package with our default settings simply by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan create . demo/testing
...
Hello world!
</pre></div>
</div>
<p>If “Hello world!” is displayed, it worked.</p>
<p>The <strong class="command">conan create</strong> command does the following:</p>
<ul class="simple">
<li>Copies (“export” in conan terms) the <em>conanfile.py</em> from the user folder into the <strong>local cache</strong>.</li>
<li>Installs the package, forcing it to be built from the sources.</li>
<li>Moves to the <em>test_package</em> folder and creates a temporary <em>build</em> folder.</li>
<li>Executes the <strong class="command">conan install ..</strong>, to install the requirements of the
<em>test_package/conanfile.py</em>. Note that it will build “Hello” from the sources.</li>
<li>Builds and launches the <em>example</em> consuming application, calling the <em>test_package/conanfile.py</em>
<code class="docutils literal notranslate"><span class="pre">build()</span></code> and <code class="docutils literal notranslate"><span class="pre">test()</span></code> methods respectively.</li>
</ul>
<p>Using Conan commands, the <strong class="command">conan create</strong> command would be equivalent to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan <span class="nb">export</span> . demo/testing
$ conan install Hello/0.1@demo/testing --build<span class="o">=</span>Hello
<span class="c1"># package is created now, use test to test it</span>
$ conan <span class="nb">test</span> test_package Hello/0.1@demo/testing
</pre></div>
</div>
<p>The <strong class="command">conan create</strong> command receives the same command line parameters as <strong class="command">conan install</strong> so
you can pass to it the same settings, options, and command line switches. If you want to create and
test packages for different configurations, you could:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan create . demo/testing -s <span class="nv">build_type</span><span class="o">=</span>Debug
$ conan create . demo/testing -o Hello:shared<span class="o">=</span>True -s <span class="nv">arch</span><span class="o">=</span>x86
$ conan create . demo/testing -pr my_gcc49_debug_profile
...
$ conan create ...
</pre></div>
</div>
</div>
<div class="section" id="settings-vs-options">
<span id="id2"></span><h2>Settings vs. Options<a class="headerlink" href="#settings-vs-options" title="Permalink to this headline">¶</a></h2>
<p>We have used settings such as <code class="docutils literal notranslate"><span class="pre">os</span></code>, <code class="docutils literal notranslate"><span class="pre">arch</span></code> and <code class="docutils literal notranslate"><span class="pre">compiler</span></code>. Note the above package recipe also contains a
<code class="docutils literal notranslate"><span class="pre">shared</span></code> option (defined as <code class="docutils literal notranslate"><span class="pre">options</span> <span class="pre">=</span> <span class="pre">{&quot;shared&quot;:</span> <span class="pre">[True,</span> <span class="pre">False]}</span></code>). What is the difference between
settings and options?</p>
<p><strong>Settings</strong> are a project-wide configuration, something that typically affects the whole project that
is being built. For example, the operating system or the architecture would be naturally the same for all
packages in a dependency graph, linking a Linux library for a Windows app, or
mixing architectures is impossible.</p>
<p>Settings cannot be defaulted in a package recipe. A recipe for a given library cannot say that its default is
<code class="docutils literal notranslate"><span class="pre">os=Windows</span></code>. The <code class="docutils literal notranslate"><span class="pre">os</span></code> will be given by the environment in which that recipe is processed. It is
a mandatory input.</p>
<p>Settings are configurable. You can edit, add, remove settings or subsettings in your <em>settings.yml</em> file.
See <a class="reference internal" href="../reference/config_files/settings.yml.html#settings-yml"><span class="std std-ref">the settings.yml reference</span></a>.</p>
<p>On the other hand, <strong>options</strong> are a package-specific configuration. Static or shared library are not
settings that apply to all packages. Some can be header only libraries while others packages can be just data,
or package executables. Packages can contain a mixture of different artifacts. <code class="docutils literal notranslate"><span class="pre">shared</span></code> is a common
option, but packages can define and use any options they want.</p>
<p>Options are defined in the package recipe, including their supported values, while other can be defaulted by the package
recipe itself. A package for a library can well define that by default it will be a static library (a typical default).
If not specified other. the package will be static.</p>
<p>There are some exceptions to the above. For example, settings can be defined per-package using the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install . -s MyPkg:compiler<span class="o">=</span>gcc -s <span class="nv">compiler</span><span class="o">=</span>clang ..
</pre></div>
</div>
<p>This will use <code class="docutils literal notranslate"><span class="pre">gcc</span></code> for MyPkg and <code class="docutils literal notranslate"><span class="pre">clang</span></code> for the rest of the dependencies (extremely rare case).</p>
<p>There are situations whereby many packages use the same option, thereby allowing you to set it’s value once using patterns, like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conan install . -o *:shared<span class="o">=</span>True
</pre></div>
</div>
<p>Any doubts? Please check out our <a class="reference internal" href="../faq.html#faq"><span class="std std-ref">FAQ section</span></a> or <a href="mailto:info@conan.io" target="_blank">write us</a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="external_repo.html" class="btn btn-neutral float-right" title="Recipe and Sources in a Different Repo" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../creating_packages.html" class="btn btn-neutral" title="Creating Packages" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, JFrog.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <!--<span class="fa fa-pencil-square-o"> Other versions:</span> -->
      Version: 1.10
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          
            <dd><a href="/en/latest/index.html">1.25</a></dd>
          
        
          
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
          
        
          
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
          
        
          
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
          
        
          
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
          
        
          
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
          
        
          
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
          
        
          
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
          
        
          
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
          
        
          
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
          
        
          
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
          
        
          
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
          
        
          
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
          
        
          
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
          
        
          
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
          
        
          
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
          
        
          
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
          
        
          
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
          
        
          
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
          
        
          
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
          
        
          
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
          
        
          
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
          
        
          
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
          
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="/en/1.10/conan.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.10.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <!-- <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="../_static/js/modernizr.min.js"></script>
  <script src="../_static/js/search.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
-->
  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  


  <script>
    // initSearch("1.10");
  </script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>