<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>conan.tools.files basic operations &mdash; conan 1.65.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/conan.css?v=f9087e22" />

  
    <link rel="shortcut icon" href="../../../../_static/conan-favicon.png"/>
    <link rel="canonical" href="https://docs.conan.io/reference/conanfile/tools/files/basic.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=0c8760e3"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="conan.tools.files downloads" href="downloads.html" />
    <link rel="prev" title="conan.tools.files" href="../files.html" />


<script
  data-cfasync="false"
  data-tracker-overrides="GoogleConsentMode:security_storage=on;ad_storage=SaleOfInfo,Advertising;ad_user_data=SaleOfInfo,Advertising;ad_personalization=SaleOfInfo,Advertising;analytics_storage=Analytics,SaleOfInfo;functionality_storage=Functional,SaleOfInfo;personalization_storage=Functional,SaleOfInfo"
  src="https://transcend-cdn.com/cm/f0071674-c641-4cf3-9d31-303ec0c86b1b/airgap.js" data-languages="en"
></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.jfrog.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WK44ZFM');</script>
<!-- End Google Tag Manager -->
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "GTM-WK44ZFM");
      gtag('set', 'developer_id.dODQ2Mj', true);
</script>

 



</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/conan-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.65
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../conan_v2.html">Conan migration guide to 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../training_courses.html">Training Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../using_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../creating_packages.html">Creating Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../uploading_packages.html">Uploading Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developing_packages.html">Developing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devtools.html">Package apps and devtools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versioning.html">Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mastering.html">Mastering Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../systems_cross_building.html">Systems and cross building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../extending.html">Extending Conan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howtos.html">Howtos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../conanfile_txt.html">conanfile.txt</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../conanfile.html">conanfile.py</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../attributes.html">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../methods.html">Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../tools.html">tools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../cmake.html">conan.tools.cmake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gnu.html">conan.tools.gnu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../google.html">conan.tools.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apple.html">conan.tools.apple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../meson.html">conan.tools.meson</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intel.html">conan.tools.intel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../microsoft.html">conan.tools.microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qbs.html">conan.tools.qbs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../env.html">conan.tools.env</a></li>
<li class="toctree-l4"><a class="reference internal" href="../system.html">conan.tools.system</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../files.html">conan.tools.files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../layout.html">conan.tools.layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scm.html">conan.tools.scm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../build.html">conan.tools.build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../android.html">conan.tools.android</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scons.html">conan.tools.scons</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dependencies.html">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html">Python requires</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../other.html#output-and-running">Output and Running</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../generators.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../profiles.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../build_helpers.html">Build helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../config_files.html">Configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../env_vars.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hooks.html">Hooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../videos.html">Videos and links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">conan</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div class="admonition warning wy-text-center" style="position:sticky;top:0;background: #fcfcfc;padding: inherit;z-index:1" id="conan-banners">
            
            <div style="border: 2px solid #eb8484;background-color: #ffcaca;padding: 3px;margin-bottom: 5px">
              <p>This document is for a <b>"1.X" legacy</b> Conan version, <b>which is no longer recommended</b>. Please update to Conan 2, <a href="https://docs.conan.io/2/">click here to read the <b>Conan 2</b> documentation</a></p>
            </div>
            
            <div style="border: 2px solid #4a7d7e; background-color: #e6f2f2; padding: 8px">
                <p>
                  📖 The Conan 2 essentials training is now available in the JFrog Academy for free.
                  <a href="https://academy.jfrog.com/conan-2-essentials?utm_source=Conan+Docs" target="_blank">Register now</a>.
                </p>
              </div>                                                  
          </div>
          <!--@ OUTDATED_VERSION_PLACEHOLDER_BEGIN @
          <div>
            <div class="admonition warning wy-text-center" style="position:sticky">
              <p>This document is for an <b>outdated</b> Conan version.
              <a href="https://docs.conan.io/2/@LATEST_DOC_PAGE_URL@">Click here to read the <b>latest</b> documentation</a></p>
             </div>
          </div>
          @ OUTDATED_VERSION_PLACEHOLDER_END @-->
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../../../conanfile.html">conanfile.py</a></li>
          <li class="breadcrumb-item"><a href="../../tools.html">tools</a></li>
          <li class="breadcrumb-item"><a href="../files.html">conan.tools.files</a></li>
      <li class="breadcrumb-item active">conan.tools.files basic operations</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/conan-io/docs/blob/master/reference/conanfile/tools/files/basic.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conan-tools-files-basic-operations">
<h1>conan.tools.files basic operations<a class="headerlink" href="#conan-tools-files-basic-operations" title="Link to this heading"></a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Some of the features used in this section are still <strong>under development</strong>, while they are
recommended and usable and we will try not to break them in future releases, some breaking
changes might still happen if necessary to prepare for the <em>Conan 2.0 release</em>.</p>
</div>
<section id="conan-tools-files-copy">
<span id="id1"></span><h2>conan.tools.files.copy()<a class="headerlink" href="#conan-tools-files-copy" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.46.0">1.46.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">keep_path</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_case</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Copy the files matching the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> (fnmatch) at the <code class="docutils literal notranslate"><span class="pre">src</span></code> folder to a <code class="docutils literal notranslate"><span class="pre">dst</span></code> folder.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>pattern</strong>: An fnmatch file pattern of the files that should be copied. It must not start with <code class="docutils literal notranslate"><span class="pre">..</span></code> relative path or an exception will be raised.</p></li>
<li><p><strong>src</strong>: Source folder in which those files will be searched. This folder will be stripped from the
dst parameter. E.g., <cite>lib/Debug/x86</cite>.</p></li>
<li><p><strong>dst</strong>: Destination local folder. It must be different from <code class="docutils literal notranslate"><span class="pre">src</span></code> value or an exception will be raised.</p></li>
<li><p><strong>keep_path</strong>: Means if you want to keep the relative path when you copy the files from the <strong>src</strong>
folder to the <strong>dst</strong> one.</p></li>
<li><p><strong>excludes</strong>: A tuple/list of fnmatch patterns or even a single one to be excluded from the copy.</p></li>
<li><p><strong>ignore_case</strong>: If enabled, it will do a case-insensitive pattern matching.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The files that are <strong>symlinks to files</strong> or <strong>symlinks to folders</strong> with be treated like any other file, so they will only
be copied if the specified pattern matches with the file.</p>
<p>At the destination folder, the symlinks will be created pointing to the exact same file or folder, absolute or relative,
being the responsibility of the user to manipulate the symlink to, for example, transform the symlink into a relative path
before copying it so it points to the destination folder.</p>
<p>Check <a class="reference internal" href="symlinks.html#conan-tools-files-symlinks"><span class="std std-ref">here</span></a> the reference of tools to manage symlinks.</p>
</div>
</section>
<section id="conan-tools-files-load">
<h2>conan.tools.files.load()<a class="headerlink" href="#conan-tools-files-load" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.35.0">1.35.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Utility function to load files in one line. It will manage the open and close of the file, and load binary encodings. Returns the content of
the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">load</span>

<span class="n">content</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>path</strong>: Path to the file.</p></li>
<li><p><strong>encoding</strong>: Specifies the input file text encoding.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-save">
<h2>conan.tools.files.save()<a class="headerlink" href="#conan-tools-files-save" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.35.0">1.35.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">):</span>
</pre></div>
</div>
<p>Utility function to save files in one line. It will manage the open and close of the file and creating directories if necessary.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">save</span>

<span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;path/to/otherfile.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;contents of the file&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>path</strong>: Path to the file.</p></li>
<li><p><strong>content</strong>: Content that should be saved into the file.</p></li>
<li><p><strong>append</strong>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, it will append the content.</p></li>
<li><p><strong>encoding</strong>: Specifies the output file text encoding.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-rename">
<h2>conan.tools.files.rename()<a class="headerlink" href="#conan-tools-files-rename" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.37.0">1.37.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">rename</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</pre></div>
</div>
<p>Utility function to rename a file or folder <em>src</em> to <em>dst</em>. On Windows, it is very common that <code class="docutils literal notranslate"><span class="pre">os.rename()</span></code> raises an “Access is denied” exception, so this tool uses:command:<cite>robocopy</cite> if available. If that is not the case, or the rename is done in a non-Windows machine, it falls back to the <code class="docutils literal notranslate"><span class="pre">os.rename()</span></code> implementation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">rename</span>

<span class="k">def</span><span class="w"> </span><span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">rename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lib-sources-abe2h9fe&quot;</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">)</span>  <span class="c1"># renaming a folder</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>src</strong>: Path to be renamed.</p></li>
<li><p><strong>dst</strong>: Path to be renamed to.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-replace-in-file">
<h2>conan.tools.files.replace_in_file()<a class="headerlink" href="#conan-tools-files-replace-in-file" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.46.0">1.46.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">replace_in_file</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">search</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Replace a string <code class="docutils literal notranslate"><span class="pre">search</span></code> in the contents of the file <code class="docutils literal notranslate"><span class="pre">file_path</span></code> with the string <code class="docutils literal notranslate"><span class="pre">replace</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">replace_in_file</span>

<span class="n">replace_in_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">,</span> <span class="s2">&quot;folder&quot;</span><span class="p">,</span> <span class="s2">&quot;file.txt&quot;</span><span class="p">),</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>file_path</strong>: File path of the file to perform the replace in.</p></li>
<li><p><strong>search</strong>: String you want to be replaced.</p></li>
<li><p><strong>replace</strong>: String to replace the searched string.</p></li>
<li><p><strong>strict</strong>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, it raises an error if the searched string is not found, so nothing is
actually replaced.</p></li>
<li><p><strong>encoding</strong>: Specifies the input and output files text encoding.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-rm">
<h2>conan.tools.files.rm()<a class="headerlink" href="#conan-tools-files-rm" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.50.0">1.50.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">rm</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Remove the files following the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> (fnmatch) from the specified <code class="docutils literal notranslate"><span class="pre">folder</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">rm</span>

<span class="n">rm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;*.tmp&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_folder</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>pattern</strong>: Pattern that the files to be removed have to match (fnmatch).</p></li>
<li><p><strong>folder</strong>: Folder to search/remove the files.</p></li>
<li><p><strong>recursive</strong>: If <code class="docutils literal notranslate"><span class="pre">recursive</span></code> is specified it will search in the subfolders.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-mkdir">
<h2>conan.tools.files.mkdir()<a class="headerlink" href="#conan-tools-files-mkdir" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.35.0">1.35.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mkdir</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>Utility functions to create a directory. The existence of the specified directory is checked, so <code class="docutils literal notranslate"><span class="pre">mkdir()</span></code> will do nothing if the
directory already exists.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">mkdir</span>

<span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;mydir&quot;</span><span class="p">)</span> <span class="c1"># Creates mydir if it does not already exist</span>
<span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;mydir&quot;</span><span class="p">)</span> <span class="c1"># Does nothing</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>path</strong>: Path to the directory.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-rmdir">
<h2>conan.tools.files.rmdir()<a class="headerlink" href="#conan-tools-files-rmdir" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.47.0">1.47.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">rmdir</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
<p>Utility functions to remove a directory. The existence of the specified directory is checked, so <code class="docutils literal notranslate"><span class="pre">rmdir()</span></code> will do nothing if the
directory doesn’t exists.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">rmdir</span>

<span class="n">rmdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;mydir&quot;</span><span class="p">)</span> <span class="c1"># Remove mydir if it exist</span>
<span class="n">rmdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;mydir&quot;</span><span class="p">)</span> <span class="c1"># Does nothing</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>path</strong>: Path to the directory.</p></li>
</ul>
</dd>
</dl>
<p>The behavior regarding the path is the same as Python <code class="docutils literal notranslate"><span class="pre">shutil.rmtree</span></code>. The provided path can be
relative to the current folder (the current folder depends in which method this tool is used), or
it can be an absolute path.</p>
</section>
<section id="conan-tools-files-chdir">
<h2>conan.tools.files.chdir()<a class="headerlink" href="#conan-tools-files-chdir" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.40.0">1.40.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">chdir</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">newdir</span><span class="p">):</span>
</pre></div>
</div>
<p>This is a context manager that allows to temporary change the current directory in your conanfile:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">chdir</span>

<span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;./subdir&quot;</span><span class="p">):</span>
        <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>newdir</strong>: Directory path name to change the current directory.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-unzip">
<h2>conan.tools.files.unzip()<a class="headerlink" href="#conan-tools-files-unzip" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.46.0">1.46.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">unzip</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">keep_permissions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
          <span class="n">strip_root</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</pre></div>
</div>
<p>This function extract different compressed formats (<code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, <code class="docutils literal notranslate"><span class="pre">.tzb2</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar.bz2</span></code>, <code class="docutils literal notranslate"><span class="pre">.tgz</span></code>, <code class="docutils literal notranslate"><span class="pre">.txz</span></code>,
<code class="docutils literal notranslate"><span class="pre">tar.xz</span></code>, and <code class="docutils literal notranslate"><span class="pre">.zip</span></code>) into the given destination folder.</p>
<p>It also accepts gzipped files, with extension <code class="docutils literal notranslate"><span class="pre">.gz</span></code> (not matching any of the above), and it will unzip them into a file with the same name
but without the extension, or to a filename defined by the <code class="docutils literal notranslate"><span class="pre">destination</span></code> argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">unzip</span>

<span class="n">tools</span><span class="o">.</span><span class="n">unzip</span><span class="p">(</span><span class="s2">&quot;myfile.zip&quot;</span><span class="p">)</span>
<span class="c1"># or to extract in &quot;myfolder&quot; sub-folder</span>
<span class="n">tools</span><span class="o">.</span><span class="n">unzip</span><span class="p">(</span><span class="s2">&quot;myfile.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;myfolder&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can keep the permissions of the files using the <code class="docutils literal notranslate"><span class="pre">keep_permissions=True</span></code> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">unzip</span>

<span class="n">unzip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;myfile.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;myfolder&quot;</span><span class="p">,</span> <span class="n">keep_permissions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> argument if you want to filter specific files and paths to decompress from the archive.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">unzip</span>

<span class="c1"># Extract only files inside relative folder &quot;small&quot;</span>
<span class="n">unzip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;bigfile.zip&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;small/*&quot;</span><span class="p">)</span>
<span class="c1"># Extract only txt files</span>
<span class="n">unzip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;bigfile.zip&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>Parameters:</dt><dd><ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>filename</strong>: File to be unzipped.</p></li>
<li><p><strong>destination</strong>: Destination folder for unzipped files.</p></li>
<li><p><strong>keep_permissions</strong>: Keep permissions of files. <strong>WARNING:</strong> Can be dangerous if the zip
was not created in a NIX system, the bits could produce undefined permission schema. Use only this option if you are sure that
the zip was created correctly.</p></li>
<li><p><strong>pattern</strong>: Extract from the archive only paths matching the pattern. This should be a Unix
shell-style wildcard. See <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html">fnmatch</a> documentation for more details.</p></li>
<li><p><strong>strip_root</strong>: When <code class="docutils literal notranslate"><span class="pre">True</span></code> and the ZIP file contains one folder containing all the contents,
it will strip the root folder moving all its contents to the root. E.g: <em>mylib-1.2.8/main.c</em> will be extracted as <em>main.c</em>. If the compressed
file contains more than one folder or only a file it will raise a <code class="docutils literal notranslate"><span class="pre">ConanException</span></code>.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="conan-tools-files-update-conandata">
<h2>conan.tools.files.update_conandata()<a class="headerlink" href="#conan-tools-files-update-conandata" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.46.0">1.46.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">update_conandata</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Parameters:</p>
<ul class="simple">
<li><p><strong>conanfile</strong>: Conanfile object.</p></li>
<li><p><strong>data</strong>: A dictionary (can be nested), of values to update</p></li>
</ul>
<p>This function reads the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> inside the exported folder in the conan cache, if it exists.
If the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> does not exist, it will create it.
Then, it updates the conandata dictionary with the provided <code class="docutils literal notranslate"><span class="pre">data</span></code> one, which is updated recursively,
prioritizing the <code class="docutils literal notranslate"><span class="pre">data</span></code> values, but keeping other existing ones. Finally the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> is saved
in the same place.</p>
<p>This helper can only be used within the <code class="docutils literal notranslate"><span class="pre">export()</span></code> method, it can raise otherwise. One application is
to capture in the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> the scm coordinates (like Git remote url and commit), to be able to
recover it later in the <code class="docutils literal notranslate"><span class="pre">source()</span></code> method and have reproducible recipes that can build from sources
without actually storing the sources in the recipe.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">update_conandata</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pkg&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This is an example, doesn&#39;t make sense to have static data, instead you</span>
        <span class="c1"># could put the data directly in a conandata.yml file.</span>
        <span class="c1"># This would be useful for storing dynamic data, obtained at export() time from elsewhere</span>
        <span class="n">update_conandata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;mydata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;nested1&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s2">&quot;nested2&quot;</span><span class="p">:</span> <span class="s2">&quot;some-string&quot;</span><span class="p">}}})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conan_data</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">][</span><span class="s2">&quot;mydata&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="conan-tools-files-trim-conandata">
<h2>conan.tools.files.trim_conandata()<a class="headerlink" href="#conan-tools-files-trim-conandata" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.61.0">1.61.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">trim_conandata</span><span class="p">(</span><span class="n">conanfile</span><span class="p">)</span>
</pre></div>
</div>
<p>This function modifies the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> inside the exported folder in the conan
cache, if it exists, and keeps only the information related to the currently built
version.</p>
<p>This helper can only be used within the <code class="docutils literal notranslate"><span class="pre">export()</span></code> method, it raises an exception otherwise. One
application is to ensure changes in the <code class="docutils literal notranslate"><span class="pre">conandata.yml</span></code> file related to some versions do
not affect the generated recipe revisions of the rest.</p>
<p>Usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConanFile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">trim_conandata</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pkg&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># any change to other versions in the conandata.yml</span>
        <span class="c1"># won&#39;t affect the revision of the version that is built</span>
        <span class="n">trim_conandata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="conan-tools-files-collect-libs">
<h2>conan.tools.files.collect_libs()<a class="headerlink" href="#conan-tools-files-collect-libs" title="Link to this heading"></a></h2>
<p>Available since: <a class="reference external" href="https://github.com/conan-io/conan/releases/tag/1.46.0">1.46.0</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">collect_libs</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Returns a sorted list of library names from the libraries (files with extensions <em>.so</em>, <em>.lib</em>, <em>.a</em> and <em>.dylib</em>) located inside the
<code class="docutils literal notranslate"><span class="pre">conanfile.cpp_info.libdirs</span></code> (by default) or the <strong>folder</strong> argument (see below) relative to the package folder. Useful to collect not
inter-dependent libraries or with complex names like <code class="docutils literal notranslate"><span class="pre">libmylib-x86-debug-en.lib</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conan.tools.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">collect_libs</span>

<span class="k">def</span><span class="w"> </span><span class="nf">package_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libdirs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lib&quot;</span><span class="p">,</span> <span class="s2">&quot;other_libdir&quot;</span><span class="p">]</span>  <span class="c1"># Default value is &#39;lib&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpp_info</span><span class="o">.</span><span class="n">libs</span> <span class="o">=</span> <span class="n">collect_libs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>For UNIX libraries starting with <strong>lib</strong>, like <em>libmath.a</em>, this tool will collect the library name <strong>math</strong>.</p>
<p>Regarding symlinks, this tool will keep only the “most generic” file among the resolved real file and all symlinks pointing to this real file.
For example among files below, this tool will select <em>libmath.dylib</em> file and therefore only append <em>math</em> in the returned list:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>-rwxr-xr-x<span class="w"> </span>libmath.1.0.0.dylib
lrwxr-xr-x<span class="w"> </span>libmath.1.dylib<span class="w"> </span>-&gt;<span class="w"> </span>libmath.1.0.0.dylib
lrwxr-xr-x<span class="w"> </span>libmath.dylib<span class="w"> </span>-&gt;<span class="w"> </span>libmath.1.dylib
</pre></div>
</div>
<dl class="simple">
<dt><strong>Parameters:</strong></dt><dd><ul class="simple">
<li><p><strong>conanfile</strong> (Required): A <code class="docutils literal notranslate"><span class="pre">ConanFile</span></code> object to get the <code class="docutils literal notranslate"><span class="pre">package_folder</span></code> and <code class="docutils literal notranslate"><span class="pre">cpp_info</span></code>.</p></li>
<li><p><strong>folder</strong> (Optional, Defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code>): String indicating the subfolder name inside <code class="docutils literal notranslate"><span class="pre">conanfile.package_folder</span></code> where
the library files are.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This tool collects the libraries searching directly inside the package folder and returns them in no specific order. If libraries are
inter-dependent, then <code class="docutils literal notranslate"><span class="pre">package_info()</span></code> method should order them to achieve correct linking order.</p>
</div>
</section>
<section id="conan-tools-files-move-folder-contents">
<h2>conan.tools.files.move_folder_contents()<a class="headerlink" href="#conan-tools-files-move-folder-contents" title="Link to this heading"></a></h2>
<p>Available since Conan 1.60.0</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">move_folder_contents</span><span class="p">(</span><span class="n">conanfile</span><span class="p">,</span> <span class="n">src_folder</span><span class="p">,</span> <span class="n">dst_folder</span><span class="p">)</span>
</pre></div>
</div>
<p>This function allows to replace the <code class="docutils literal notranslate"><span class="pre">dst_folder</span></code> contents with the contents of <code class="docutils literal notranslate"><span class="pre">src_folder</span></code>, also when <code class="docutils literal notranslate"><span class="pre">src_folder</span></code> is a
children of <code class="docutils literal notranslate"><span class="pre">dst_folder</span></code>.</p>
<dl class="simple">
<dt><strong>Parameters:</strong></dt><dd><ul class="simple">
<li><p><strong>conanfile</strong> (Required): A <code class="docutils literal notranslate"><span class="pre">ConanFile</span></code> object, always <code class="docutils literal notranslate"><span class="pre">self</span></code> inside a recipe.</p></li>
<li><p><strong>src_folder</strong> (Required): The folder which contents we want to move to <code class="docutils literal notranslate"><span class="pre">dst_folder</span></code></p></li>
<li><p><strong>dst_folder</strong> (Required): The destination folder.</p></li>
</ul>
</dd>
</dl>
<p>This helper function can help when using the <code class="docutils literal notranslate"><span class="pre">scm</span></code> capture strategy instead of <code class="docutils literal notranslate"><span class="pre">exports</span></code>, and  a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code>
is cloning a whole repository, but we want to process only a subfolder of it.
This situation can happen in mono-repo like projects, and also when using the <code class="docutils literal notranslate"><span class="pre">self.folders.root</span> <span class="pre">=</span> <span class="pre">&quot;..&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">layout()</span></code> definition
because the <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> is not located in the root of the repo, but in one subfolder.</p>
<p>For example, for a project repository containing 2 subprojects, each one with its own <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> package definition:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>project
 |- pkg1
      | - conanfile.py
      | - CMakeLists, cpp/h files, etc
 |- pkg2
      | - conanfile.py
      | - CMakeLists, cpp/h files, etc
</pre></div>
</div>
<p>Assuming the <code class="docutils literal notranslate"><span class="pre">project</span></code> is a Git repo, each <code class="docutils literal notranslate"><span class="pre">conanfile.py</span></code> recipe would look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pkg</span><span class="p">(</span><span class="n">ConanFile</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">package</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
   <span class="n">version</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">package</span><span class="o">-</span><span class="n">version</span><span class="o">&gt;</span>

   <span class="c1"># Each package will have its ``requires``</span>

   <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">git</span> <span class="o">=</span> <span class="n">Git</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe_folder</span><span class="p">)</span>
       <span class="n">scm_url</span><span class="p">,</span> <span class="n">scm_commit</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">get_url_and_commit</span><span class="p">()</span>
       <span class="n">folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recipe_folder</span><span class="p">)</span>
       <span class="c1"># Captures the Git repo and commit of &quot;project&quot;, and folder name (pkg1/pkg2)</span>
       <span class="n">update_conandata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{{</span><span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="p">{{</span><span class="s2">&quot;commit&quot;</span><span class="p">:</span> <span class="n">scm_commit</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">scm_url</span><span class="p">,</span>
                                             <span class="s2">&quot;folder&quot;</span><span class="p">:</span> <span class="n">folder</span><span class="p">}}}})</span>

   <span class="k">def</span><span class="w"> </span><span class="nf">layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="c1"># this defines the location of each package sources wrt to itself</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">folders</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>

   <span class="k">def</span><span class="w"> </span><span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="n">git</span> <span class="o">=</span> <span class="n">Git</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
       <span class="n">sources</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">conan_data</span><span class="p">[</span><span class="s2">&quot;sources&quot;</span><span class="p">]</span>
       <span class="n">git</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">sources</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">],</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
       <span class="n">git</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="n">sources</span><span class="p">[</span><span class="s2">&quot;commit&quot;</span><span class="p">])</span>
       <span class="c1"># This created in the cache the full original &quot;project&quot; structure, containing</span>
       <span class="c1"># both &quot;pkg1&quot; and &quot;pkg2&quot; subfolders, but we only want the contents of the &quot;pkg1&quot;</span>
       <span class="n">src_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">,</span> <span class="n">sources</span><span class="p">[</span><span class="s2">&quot;folder&quot;</span><span class="p">])</span> <span class="c1"># the &quot;pkg1&quot; subfolder</span>
       <span class="c1"># replace the current self.source_folder with the &quot;pkg1&quot; subfolder contents</span>
       <span class="n">move_folder_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src_folder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_folder</span><span class="p">)</span>
       <span class="c1"># now we have the same relative layout in the cache as we had in the project clone</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../files.html" class="btn btn-neutral float-left" title="conan.tools.files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="downloads.html" class="btn btn-neutral float-right" title="conan.tools.files downloads" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, JFrog.
      <span class="lastupdated">Last updated on Sep 29, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    Version: 1.65
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
    
        
            <dd><a href="/2.21/index.html">2.21</a></dd>
        
    
        
            <dd><a href="/2.20/index.html">2.20</a></dd>
        
    
        
            <dd><a href="/2.19/index.html">2.19</a></dd>
        
    
        
            <dd><a href="/2.18/index.html">2.18</a></dd>
        
    
        
            <dd><a href="/2.17/index.html">2.17</a></dd>
        
    
        
            <dd><a href="/2.16/index.html">2.16</a></dd>
        
    
        
            <dd><a href="/2.15/index.html">2.15</a></dd>
        
    
        
            <dd><a href="/2.14/index.html">2.14</a></dd>
        
    
        
            <dd><a href="/2.13/index.html">2.13</a></dd>
        
    
        
            <dd><a href="/2.12/index.html">2.12</a></dd>
        
    
        
            <dd><a href="/2.11/index.html">2.11</a></dd>
        
    
        
            <dd><a href="/2.10/index.html">2.10</a></dd>
        
    
        
            <dd><a href="/2.9/index.html">2.9</a></dd>
        
    
        
            <dd><a href="/2.8/index.html">2.8</a></dd>
        
    
        
            <dd><a href="/2.7/index.html">2.7</a></dd>
        
    
        
            <dd><a href="/2.6/index.html">2.6</a></dd>
        
    
        
            <dd><a href="/2.5/index.html">2.5</a></dd>
        
    
        
            <dd><a href="/2.4/index.html">2.4</a></dd>
        
    
        
            <dd><a href="/2.3/index.html">2.3</a></dd>
        
    
        
            <dd><a href="/2.2/index.html">2.2</a></dd>
        
    
        
            <dd><a href="/2.1/index.html">2.1</a></dd>
        
    
        
            <dd><a href="/2.0/index.html">2.0</a></dd>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/2/index.html">2</a></dd>
        
    
    <br>
        <details>
            <summary>Conan 1 releases</summary>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <dd><a href="/1/index.html">1</a></dd>
        
    
        
            <dd><a href="/en/1.66/index.html">1.66</a></dd>
        
    
        
            <dd><a href="/en/1.65/index.html">1.65</a></dd>
        
    
        
            <dd><a href="/en/1.64/index.html">1.64</a></dd>
        
    
        
            <dd><a href="/en/1.63/index.html">1.63</a></dd>
        
    
        
            <dd><a href="/en/1.62/index.html">1.62</a></dd>
        
    
        
            <dd><a href="/en/1.61/index.html">1.61</a></dd>
        
    
        
            <dd><a href="/en/1.60/index.html">1.60</a></dd>
        
    
        
            <dd><a href="/en/1.59/index.html">1.59</a></dd>
        
    
        
            <dd><a href="/en/1.58/index.html">1.58</a></dd>
        
    
        
            <dd><a href="/en/1.57/index.html">1.57</a></dd>
        
    
        
            <dd><a href="/en/1.56/index.html">1.56</a></dd>
        
    
        
            <dd><a href="/en/1.55/index.html">1.55</a></dd>
        
    
        
            <dd><a href="/en/1.54/index.html">1.54</a></dd>
        
    
        
            <dd><a href="/en/1.53/index.html">1.53</a></dd>
        
    
        
            <dd><a href="/en/1.52/index.html">1.52</a></dd>
        
    
        
            <dd><a href="/en/1.51/index.html">1.51</a></dd>
        
    
        
            <dd><a href="/en/1.50/index.html">1.50</a></dd>
        
    
        
            <dd><a href="/en/1.49/index.html">1.49</a></dd>
        
    
        
            <dd><a href="/en/1.48/index.html">1.48</a></dd>
        
    
        
            <dd><a href="/en/1.47/index.html">1.47</a></dd>
        
    
        
            <dd><a href="/en/1.46/index.html">1.46</a></dd>
        
    
        
            <dd><a href="/en/1.45/index.html">1.45</a></dd>
        
    
        
            <dd><a href="/en/1.44/index.html">1.44</a></dd>
        
    
        
            <dd><a href="/en/1.43/index.html">1.43</a></dd>
        
    
        
            <dd><a href="/en/1.42/index.html">1.42</a></dd>
        
    
        
            <dd><a href="/en/1.41/index.html">1.41</a></dd>
        
    
        
            <dd><a href="/en/1.40/index.html">1.40</a></dd>
        
    
        
            <dd><a href="/en/1.39/index.html">1.39</a></dd>
        
    
        
            <dd><a href="/en/1.38/index.html">1.38</a></dd>
        
    
        
            <dd><a href="/en/1.37/index.html">1.37</a></dd>
        
    
        
            <dd><a href="/en/1.36/index.html">1.36</a></dd>
        
    
        
            <dd><a href="/en/1.35/index.html">1.35</a></dd>
        
    
        
            <dd><a href="/en/1.34/index.html">1.34</a></dd>
        
    
        
            <dd><a href="/en/1.33/index.html">1.33</a></dd>
        
    
        
            <dd><a href="/en/1.32/index.html">1.32</a></dd>
        
    
        
            <dd><a href="/en/1.31/index.html">1.31</a></dd>
        
    
        
            <dd><a href="/en/1.30/index.html">1.30</a></dd>
        
    
        
            <dd><a href="/en/1.29/index.html">1.29</a></dd>
        
    
        
            <dd><a href="/en/1.28/index.html">1.28</a></dd>
        
    
        
            <dd><a href="/en/1.27/index.html">1.27</a></dd>
        
    
        
            <dd><a href="/en/1.26/index.html">1.26</a></dd>
        
    
        
            <dd><a href="/en/1.25/index.html">1.25</a></dd>
        
    
        
            <dd><a href="/en/1.24/index.html">1.24</a></dd>
        
    
        
            <dd><a href="/en/1.23/index.html">1.23</a></dd>
        
    
        
            <dd><a href="/en/1.22/index.html">1.22</a></dd>
        
    
        
            <dd><a href="/en/1.21/index.html">1.21</a></dd>
        
    
        
            <dd><a href="/en/1.20/index.html">1.20</a></dd>
        
    
        
            <dd><a href="/en/1.19/index.html">1.19</a></dd>
        
    
        
            <dd><a href="/en/1.18/index.html">1.18</a></dd>
        
    
        
            <dd><a href="/en/1.17/index.html">1.17</a></dd>
        
    
        
            <dd><a href="/en/1.16/index.html">1.16</a></dd>
        
    
        
            <dd><a href="/en/1.15/index.html">1.15</a></dd>
        
    
        
            <dd><a href="/en/1.14/index.html">1.14</a></dd>
        
    
        
            <dd><a href="/en/1.13/index.html">1.13</a></dd>
        
    
        
            <dd><a href="/en/1.12/index.html">1.12</a></dd>
        
    
        
            <dd><a href="/en/1.11/index.html">1.11</a></dd>
        
    
        
            <dd><a href="/en/1.10/index.html">1.10</a></dd>
        
    
        
            <dd><a href="/en/1.9/index.html">1.9</a></dd>
        
    
        
            <dd><a href="/en/1.8/index.html">1.8</a></dd>
        
    
        
            <dd><a href="/en/1.7/index.html">1.7</a></dd>
        
    
        
            <dd><a href="/en/1.6/index.html">1.6</a></dd>
        
    
        
            <dd><a href="/en/1.5/index.html">1.5</a></dd>
        
    
        
            <dd><a href="/en/1.4/index.html">1.4</a></dd>
        
    
        
            <dd><a href="/en/1.3/index.html">1.3</a></dd>
        
    
        
    
        </details>
    </dl>
    <dl>
        <dt>Downloads</dt>
        
            <dd><a href="/en/1.65/conan.pdf">PDF</a></dd>
        
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

<noscript><iframe src="https://gtm.jfrog.com/ns.html?id=GTM-WK44ZFM" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


 


</body>
</html>